(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[78],{1077:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(46),o=n(227),s=function(e){var t=e.customHeader;return r.a.createElement("img",{src:Object(i.b)(__LOCALE__)(t.image),style:{width:t.display_width?Object(o.a)(t.display_width):"auto",height:t.display_height?Object(o.a)(t.display_height):"auto"}})};t.a=function(e){var t=e.headerText,n=e.customHeader;return n?n.image?r.a.createElement(s,{customHeader:{image:n.image,display_width:n.display_width,display_height:n.display_height}}):r.a.createElement("span",{style:{color:n.color}},t):t||null}},1086:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n(33),r=n.n(a),i=n(0),o=n.n(i),s=n(26),c=n.n(s),l=n(1016),u=n(397),d=n(121),p=(n(1130),n(434)),m=n(1077);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var h=function(e){var t=e.headerButton,n=e.onHeaderButtonClick,a=e.simpleVersion,r=e.hasNoNavigation,s=e.customButtonContent,c=e.headerButtonStyle,p=e.headerSectionButtonProps,m=t.linkTo,h=s||o.a.createElement(i.Fragment,null,t.text,"Â ",o.a.createElement(u.a,null)),v=a?o.a.createElement(d.a,f({targetType:"SeeAllButton",style:c},p),h):o.a.createElement(d.c,f({targetType:"SeeAllButton",style:c},p),h);return r?o.a.createElement("div",{className:"shopee-header-section__header-link",onClick:function(e){n&&n(e)}},v):"string"!=typeof m||"/"===m[0]?o.a.createElement(l.a,{to:m,className:"shopee-header-section__header-link",onClick:function(e){n&&n(e)}},v):o.a.createElement("a",{href:m,className:"shopee-header-section__header-link",onClick:function(e){n&&n(e)}},v)},v=Object(p.a)(function(e){var t=e.headerText,n=e.headerButton,a=e.children,i=e.simpleVersion,s=e.classNames,c=e.customButtonContent,l=e.hasNoNavigation,u=e.onHeaderButtonClick,d=e.style,p=void 0===d?{}:d,v=e.trackingRef,g=e.headerStyle,b=void 0===g?{}:g,_=e.customHeader,y=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["headerText","headerButton","children","simpleVersion","classNames","customButtonContent","hasNoNavigation","onHeaderButtonClick","style","trackingRef","headerStyle","customHeader"]);return o.a.createElement("div",{className:r()("shopee-header-section",s,!!i&&"shopee-header-section--simple"),ref:v||null,style:p},o.a.createElement("div",{className:"shopee-header-section__header"},o.a.createElement("div",{className:"shopee-header-section__header__title",style:b},o.a.createElement(m.a,{headerText:t,customHeader:_})),!!n&&o.a.createElement(h,{headerButton:n,simpleVersion:i,hasNoNavigation:l,customButtonContent:c,onHeaderButtonClick:u,headerButtonStyle:b&&b.seeAllColor?{color:b.seeAllColor}:b&&b.color?{color:b.color}:{},headerSectionButtonProps:f({},y)})),o.a.createElement("div",{className:"shopee-header-section__content"},a))},"HeaderSection");v.contextTypes=f({},v.contextTypes);var g={headerText:c.a.oneOfType([c.a.string,c.a.node]),headerButton:c.a.oneOfType([c.a.shape({text:c.a.string.isRequired,linkTo:c.a.oneOfType([c.a.string,c.a.object])}),c.a.bool]),onHeaderButtonClick:c.a.func,children:c.a.node,simpleVersion:c.a.bool,classNames:c.a.string,customButtonContent:c.a.node,hasNoNavigation:c.a.bool};v.propTypes=g,c.a.element.isRequired},1130:function(e,t,n){},1193:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(0),r=n(205),i=n(122),o=n(204),s=n(207),c=n(230),l=n(330);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function d(e,t,n){var d=a.useRef(!0),p=Object(r.b)(),m=Object(i.c)(),f=Object(i.d)(),h=a.useState(null),v=h[0],g=h[1],b=a.useRef();return a.useEffect(function(){return d.current=!0,function(){d.current=!1}},[d]),a.useEffect(function(){b.current=function(){var n=Object(i.b)(f,e||"-1"),a=u({},Object(s.a)(m),Object(s.a)(t));Object(l.a)(n,{targetData:Object(o.b)(a)}),Object(l.b)(p,n)}},[b,p,m,f,t,e]),a.useEffect(function(){if(v)return Object(c.a)(v,function(){b.current&&b.current(),Object(c.b)(v)}),function(){Object(c.b)(v)}},[b,v].concat(n)),a.useCallback(function(e){d.current&&g(e)},[d,g])}},1208:function(e,t,n){"use strict";var a=n(0),r=n(33),i=n.n(r),o=(n(1407),n(335)),s=n(1240),c=n.n(s),l={HIDDEN:0,SHOW_ON_HOVER:1,SHOW_ALWAYS:2},u={NONE:0,DOTS:1,INDEX:2,TABS:3},d={RIGHT:1,LEFT:-1},p=100,m=5,f=3,h=n(393),v=Object(h.a)(n(1408),"arrow-left-bold"),g=Object(h.a)(n(1409),"arrow-right-bold");var b=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).isDisabled=function(){var e=n.props,t=e.looping,a=e.direction,r=e.activeIndex,i=e.childrenCount;if(t)return!1;var o=r+a;return o<0||o>=i},n.onClick=function(e){if(e.preventDefault(),!n.isDisabled()){var t=n.props,a=t.direction,r=t.activeIndex;n.props.onClick(r+a)}},n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.direction,n=e.arrowDisplayType,r=e.forceHidden;return a.createElement("div",{className:i()("stardust-carousel__arrow","stardust-carousel__arrow--type-"+n,r?"stardust-carousel__arrow--hidden":null,"stardust-carousel__arrow--"+(t<0?"prev":"next"),this.isDisabled()?"stardust-carousel__arrow--disabled":null),onClick:this.onClick},t<0?a.createElement(v,null):a.createElement(g,null))},r}(a.PureComponent);n(1410);var _=function(e){var t=e.arrowDisplayType,n=e.looping,r=e.activeIndex,i=e.childrenCount,o=e.onArrowClicked;if(t===l.HIDDEN)return null;var s=!1,c=!1;return t===l.SHOW_ON_HOVER&&(s=i<=1||!n&&r<=0,c=i<=1||!n&&r>=i-1),a.createElement(a.Fragment,null,a.createElement(b,{direction:d.LEFT,arrowDisplayType:t,activeIndex:r,childrenCount:i,forceHidden:s,looping:n,onClick:o}),a.createElement(b,{direction:d.RIGHT,arrowDisplayType:t,activeIndex:r,childrenCount:i,forceHidden:c,looping:n,onClick:o}))};var y=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).onClick=function(e){e.preventDefault(),n.props.onClick(n.props.index)},n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props.isActive;return a.createElement("div",{className:i()("stardust-carousel__dot",{"stardust-carousel__dot--active":e}),onClick:this.onClick})},r}(a.PureComponent);n(1411);var C=function(e){var t=e.looping,n=e.activeIndex,r=e.childrenCount,i=e.onDotClicked;return r<=1?null:a.createElement("div",{className:"stardust-carousel__dots"},Array(r).fill(0).map(function(e,r){return a.createElement(y,{key:r,index:t?r+1:r,onClick:i,isActive:t?n===r+1:n===r})}))};n(1412);var I=function(e){var t=e.activeChildrenIndex,n=e.childrenCount;return a.createElement("div",{className:"stardust-carousel__indexing"},t+1+"/"+n)};var E=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).onClick=function(e){e.preventDefault(),n.props.onClick(n.props.index)},n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.name,n=e.isActive;return a.createElement("div",{className:i()("stardust-carousel__tab",{"stardust-carousel__tab--active":n}),onClick:this.onClick},a.createElement("span",{className:"stardust-carousel__tab-name"},t))},r}(a.PureComponent);n(1413);var O=function(e){var t=e.looping,n=e.onTabClicked,r=e.childrenCount,i=e.activeIndex,o=e.tabNames;return c()(o.length===r,"[Carousel]","[SCWARN006]","The given props.tabNames length does not correspond to number of children"),a.createElement("div",{className:"stardust-carousel__tabs"},Array(r).fill(0).map(function(e,r){return a.createElement(E,{key:r,index:t?r+1:r,onClick:n,isActive:t?i===r+1:i===r,name:o[r]})}))};function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u});var N=function(e){var t,n;function r(t){var n,r;return(r=e.call(this,t)||this).reportCarouselPosition=function(e,t,n){if(t){var a=r.getCarouselItemListWidth();"function"==typeof r.props.carouselPositionListener&&r.props.carouselPositionListener(e-t/a,n)}else"function"==typeof r.props.carouselPositionListener&&r.props.carouselPositionListener(e,n)},r.handleSwipeStart=function(e){r.childrenCount<=1||(e.stopPropagation(),r._swipeStartX=e.changedTouches[0].pageX,r._swipeStartY=e.changedTouches[0].pageY,r._swipeVx=0,r._swipeLastX=r._swipeStartX,r._swipeStarted=!0,r._swipeMoved=!1)},r.handleSwipeMove=function(e){if(r._swipeStarted){var t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY,a=t-r._swipeStartX;if(e.stopPropagation(),!r._swipeMoved){var i=n-r._swipeStartY;r.isSwiping=Math.abs(a)>Math.abs(i)&&Math.abs(a)>f,(r.isSwiping||Math.abs(i)>f)&&(r._swipeMoved=!0,r._swipeStartX=t,a=t-r._swipeStartX)}r.isSwiping&&(r.animateCarousel(r.state.activeIndex,a),r._swipeVx=.5*r._swipeVx+.5*(t-r._swipeLastX),r._swipeLastX=t)}},r.handleSwipeEnd=function(e){var t=r.props,n=t.onChangeIndex,a=t.looping;if(r._swipeStarted&&r.isSwiping){r._swipeStarted=!1,r._swipeMoved=!1,r.isSwiping=!1,e.stopPropagation();var i=e.changedTouches[0].pageX-r._swipeStartX,o=r.state.activeIndex;Math.abs(r._swipeVx)>m?r._swipeVx>0?o-=1:o+=1:i>.5*r.getCarouselItemListWidth()?o-=1:i<.5*-r.getCarouselItemListWidth()&&(o+=1),a||(o<0||o>=r.childrenCount)&&(o=r.state.activeIndex),r.animateCarousel(o,0,p),o!==r.state.activeIndex&&("function"==typeof n&&n(r.getItemIndex(o)),r._transitionTimeoutId=setTimeout(function(){r.handleSlideEnd(o)},p))}},r.getCarouselItemListWidth=function(){return r.__reflowCount>0&&c()(null!=r._carouselItemListWidth,"[Carousel] [SCWARN004] Expensive DOM operation (reflow) is about to occur again. Reflow count so far: "+r.__reflowCount),null==r._carouselItemListWidth&&r._carouselItemListRef.current&&r._carouselItemListRef.current.firstElementChild&&r._carouselItemListRef.current.firstElementChild instanceof HTMLElement&&(r._carouselItemListWidth=r._carouselItemListRef.current.firstElementChild.getBoundingClientRect().width,r.__reflowCount+=1),c()(null!=r._carouselItemListWidth,"[Carousel] [SCWARN005] carouselItemListWidth is still falsy, casting to 0"),r._carouselItemListWidth||0},r.getItemListWrapperStyle=function(){return{paddingTop:1/r.props.ratio*100+"%"}},r.getItemListStyle=function(){return{width:100*(r.props.looping?r.childrenCount+2:r.childrenCount)+"%"}},r.getItemWidthPercentage=function(){return 100/(r.props.looping?r.childrenCount+2:r.childrenCount)},r.getItemStyle=function(){return{width:r.getItemWidthPercentage()+"%"}},r.isItemInnerWrapperHidden=function(e){return!(r.props.displayAllItemsOnInitialLoad||!r._isChildDisplayed[e])&&e!==r.state.activeIndex},r.animateCarousel=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0);var a=r._carouselItemListRef.current;if(a){a.style.transition=n+"ms";var i=r.getCurrentCarouselTransform(e,t);a.style.webkitTransform=i,a.style.transform=i,r.reportCarouselPosition(e,t,n)}},r.renewAutoPlay=function(){r.stopAutoPlay(),r._autoPlayId=setTimeout(r.requestIdleCallbackSlide,r.props.autoPlayDelay)},r.stopAutoPlay=function(){r._autoPlayId&&clearTimeout(r._autoPlayId)},r.requestIdleCallbackSlide=function(e){void 0===e&&(e=r.state.activeIndex+1),r._slideId&&Object(o.a)(r._slideId),r._slideId=Object(o.b)(function(){return r.slide(e,{fromAutoPlay:!0})},{timeout:2e3})},r.slide=function(e,t){var n=void 0===t?{skipAnimation:!1,fromAutoPlay:!1}:t,a=n.skipAnimation,i=n.fromAutoPlay,o=r.state.activeIndex,s=r.props,c=s.autoPlay,l=s.looping,u=s.onChangeIndex,p=s.transitionTime,m=e;c&&!l&&i&&(r.direction===d.RIGHT&&o>=r.childrenCount-1?r.direction=d.LEFT:r.direction===d.LEFT&&o<=0&&(r.direction=d.RIGHT),m=o+r.direction),r.childrenCount<=1||m!==o&&(r.state.isSliding||(r._isChildDisplayed[m]||(r._isChildDisplayed[m]=!0),"function"==typeof u&&u(r.getItemIndex(m)),r.setState({isSliding:!0}),r.animateCarousel(m,0,a?0:p),r._transitionTimeoutId=setTimeout(function(){r.handleSlideEnd(m)},a?0:p)))},r.handleSlideEnd=function(e){var t=e;r._transitionTimeoutId=null,r.props.looping&&(0===t?(t=r.childrenCount,r.animateCarousel(t)):t===r.childrenCount+1&&(t=1,r.animateCarousel(t))),r.props.autoPlay&&r.renewAutoPlay(),r.setState({isSliding:!1,activeIndex:t})},r.childrenCount=a.Children.count(r.props.children),c()(r.childrenCount>0,"[Carousel] [SCWARN001] Empty children!"),c()(r.props.ratio>0,"[Carousel] [SCWARN002] Ratio prop is required!"),c()(r.props.indexType!==u.TABS||Array.isArray(r.props.tabNames),"[Carousel] [SCWARN003] tabNames prop is required when indexType=tabs!"),r.state={activeIndex:Math.min(r.props.startingIndex,r.childrenCount?r.childrenCount-1:0)+(r.props.looping?1:0),isSliding:!1},r._autoPlayId=null,r._transitionTimeoutId=null,r._slideId=null,r._calculateItemListWidthIdleCallbackId=null,r.direction=d.RIGHT,r.isSwiping=!1,r._isChildDisplayed=((n={})[r.state.activeIndex]=!0,n),r._swipeVx=0,r._swipeStarted=!1,r._swipeMoved=!1,r._carouselRef=a.createRef(),r._carouselItemListRef=a.createRef(),r._finalChildren=null,r._carouselItemListWidth=null,r.__reflowCount=0,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s,l,h,v=r.prototype;return v.componentDidMount=function(){var e=this,t=this.state.activeIndex,n=this.props,a=n.onChangeIndex;n.autoPlay?("function"==typeof a&&a(this.getItemIndex(t)),this.animateCarousel(t),this.renewAutoPlay()):(this.handleSlideEnd(t),this.animateCarousel(t)),this._calculateItemListWidthIdleCallbackId=Object(o.b)(function(){e.getCarouselItemListWidth()},{timeout:3e4}),this._carouselRef.current&&this._carouselRef.current.addEventListener("touchmove",this.handleSwipeMove,{passive:!1})},v.componentWillUnmount=function(){this.__reflowCount=0,this.props.autoPlay&&this.stopAutoPlay(),this._transitionTimeoutId&&clearTimeout(this._transitionTimeoutId),this._slideId&&Object(o.a)(this._slideId),this._calculateItemListWidthIdleCallbackId&&Object(o.a)(this._calculateItemListWidthIdleCallbackId),this._carouselRef.current&&this._carouselRef.current.removeEventListener("touchmove",this.handleSwipeMove,{passive:!1})},v.componentDidUpdate=function(e){e.autoPlay&&!this.props.autoPlay?this.stopAutoPlay():!e.autoPlay&&this.props.autoPlay&&this.renewAutoPlay(),e.children===this.props.children&&this.childrenCount===a.Children.count(this.props.children)||(this._finalChildren=null,this.childrenCount=a.Children.count(this.props.children),this.props.autoPlay?this.renewAutoPlay():this.forceUpdate())},v.getCurrentCarouselTransform=function(e,t){return void 0===t&&(t=0),this._carouselItemListRef.current?"translateX("+-e*this.getItemWidthPercentage()+"%) translateX("+t+"px)":""},v.getItemIndex=function(e){return this.props.looping?(e-1+this.childrenCount)%this.childrenCount:e},v.render=function(){var e=this,t=this.props,n=t.className,r=t.tabNames,o=t.arrowDisplayType,s=t.looping,c=t.indexType,l=this.state.activeIndex,d=this.getItemListWrapperStyle(),p=this.getItemListStyle(),m=this.getItemStyle();return a.createElement("div",{className:i()("stardust-carousel",n),onTouchStart:this.handleSwipeStart,onTouchEnd:this.handleSwipeEnd,ref:this._carouselRef},a.createElement("div",{className:"stardust-carousel__item-list-wrapper",style:d},a.createElement("ul",{className:"stardust-carousel__item-list",style:p,ref:this._carouselItemListRef},this.finalChildren.map(function(t,n){return a.createElement("li",{className:"stardust-carousel__item",key:n,style:m},a.createElement("div",{className:i()("stardust-carousel__item-inner-wrapper",e.isItemInnerWrapperHidden(n)&&"stardust-carousel__item-inner-wrapper--hide")},t))}))),a.createElement(_,{arrowDisplayType:o,activeIndex:l,childrenCount:this.childrenCount,looping:s,onArrowClicked:this.slide}),c===u.DOTS?a.createElement(C,{looping:s,activeIndex:l,childrenCount:this.childrenCount,onDotClicked:this.slide}):null,c===u.INDEX?a.createElement(I,{activeChildrenIndex:s?l-1:l,childrenCount:this.childrenCount}):null,c===u.TABS&&r?a.createElement(O,{looping:s,activeIndex:l,childrenCount:this.childrenCount,onTabClicked:this.slide,tabNames:r}):null)},s=r,(l=[{key:"finalChildren",get:function(){var e=this.props,t=e.children,n=e.looping;if(this._finalChildren)return this._finalChildren;var r=a.Children.toArray(t);return n&&r.length>0&&(r.unshift(r[r.length-1]),r.push(r[1])),this._finalChildren=r,r}}])&&S(s.prototype,l),h&&S(s,h),r}(a.Component);N.defaultProps={transitionTime:500,arrowDisplayType:l.SHOW_ON_HOVER,indexType:u.NONE,looping:!0,startingIndex:0,autoPlay:!0,autoPlayDelay:5e3,displayAllItemsOnInitialLoad:!1};t.c=N},1240:function(e,t,n){"use strict";var a=function(){};e.exports=a},1407:function(e,t,n){},1408:function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{stroke:"none",d:"m4.2 10l7.9-7.9-2.1-2.2-9 9-1.1 1.1 1.1 1 9 9 2.1-2.1z"}))}r.defaultProps={enableBackground:"new 0 0 13 20",viewBox:"0 0 13 20"},e.exports=r,r.default=r},1409:function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{stroke:"none",d:"m11.1 9.9l-9-9-2.2 2.2 8 7.9-8 7.9 2.2 2.1 9-9 1-1z"}))}r.defaultProps={enableBackground:"new 0 0 13 21",viewBox:"0 0 13 21"},e.exports=r,r.default=r},1410:function(e,t,n){},1411:function(e,t,n){},1412:function(e,t,n){},1413:function(e,t,n){},1446:function(e,t,n){"use strict";var a=Object.freeze({SALES:0,PRICE:1});n.d(t,"a",function(){return a}),n.d(t,"b",function(){return"/api/v4/recommend/recommend"})},1661:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var a,r=n(1),i=n(1446),o=Object(r.b)("FETCH_TOP_PRODUCT_MICROSITE"),s=((a={})[i.a.SALES]="tspmicrosite_sec",a[i.a.PRICE]="tspmicrosite_bp_sec",a)},1816:function(e,t,n){"use strict";t.a={NORMAL:"normal",NEW:"new",SOLD_OUT:"sold_out",DELETE:"delete",OFFENSIVE_HIDE:"offensive_hide",BANNED:"banned",ERROR:"error"}},1847:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(28),r=Object(a.b)();var i=1e3;switch(r){case"TW":i=1e4;break;default:i=1e3}function o(e,t,n){return void 0===n&&(n=i),e(t,0)+(t>=n?"+":"")}},1918:function(e,t,n){"use strict";var a=n(0),r=n(1086),i=n(122),o=n(1208),s=n(336),c=n(278),l=n(89),u=n(97),d=n(4),p=n(2196),m=n.n(p);t.a=function(e){var t=e.children,n=e.onPageChange;return a.createElement(i.a,{targetType:"HomeTopProducts"},a.createElement(c.a.Consumer,null,function(e){var i=e.customHeader;return a.createElement(r.a,{headerText:a.createElement("span",null,Object(l.t)("label_top_products")),headerButton:{text:Object(l.t)("rcmd_label_see_all"),linkTo:Object(u.topProducts)()},simpleVersion:!0,classNames:m.a.section,customHeader:Object(d.a)(i,[s.a.TOP_PRODUCTS])},a.createElement(o.c,{autoPlay:!1,looping:!1,indexType:o.b.NONE,arrowDisplayType:o.a.SHOW_ALWAYS,onChangeIndex:n,ratio:1200/325},t))}))}},1919:function(e,t,n){e.exports={container:"_1gJuwj",imageSection:"_1YbGPr",leftImageSection:"_3ZNgSH",rightImageSection:"TOeYr6",mainImage:"_1hbeEx",subImage:"_3bBOWX",subImageWrapper:"_1QL0LL",salesCount:"hatasw",name:"_1GKxgt",firstRank:"_1LhMiz",subRank:"_3gF-NU"}},1920:function(e,t,n){e.exports={page:"_3skDZP",item:"_3Ocs5G"}},2191:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(197);function r(e,t){void 0===t&&(t=a.a.SALES);var n=Object(a.b)({sortBy:t});if(!(e&&e[n]&&e[n].data&&e[n].data.categories&&e[n].data.categories.length))return[];var r=e[n].data.categories,i=e[n].data.current_index||0;return[].concat(r.slice(i,r.length),r.slice(0,i))}},2192:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=20},2193:function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return u});var a=n(11),r=n(13),i=n(1661);function o(e){var t={sorttype:e};return Object(a.d)(t)}function s(e,t){var n=o(t);return e&&e[n]?e[n].progress:r.b.INIT}var c=[];function l(e,t){var n=o(t);return e&&e[n]&&e[n].data?e[n].data.sections[i.b[t]].data:c}function u(e){return e.list.data}},2196:function(e,t,n){e.exports={section:"_2ijP-U"}},2247:function(e,t,n){"use strict";var a=n(0),r=n(1918),i=n(33),o=n.n(i),s=n(1817),c=n(945),l=n(1919),u=n.n(l),d=1,p=2,m=3,f=function(e){var t=e.className;return a.createElement("div",{className:o()(u.a.container,t)},a.createElement("div",{className:u.a.imageSection},a.createElement("div",{className:u.a.leftImageSection},a.createElement(s.b,{rank:d,className:u.a.firstRank}),a.createElement(c.a,{src:"",className:u.a.mainImage})),a.createElement("div",{className:u.a.rightImageSection},a.createElement("div",{className:u.a.subImageWrapper},a.createElement(s.b,{rank:p,isNumberOnly:!0,className:u.a.subRank}),a.createElement(c.a,{src:"",className:u.a.subImage})),a.createElement("div",{className:u.a.subImageWrapper},a.createElement(s.b,{rank:m,isNumberOnly:!0,className:u.a.subRank}),a.createElement(c.a,{src:"",className:u.a.subImage})))),a.createElement("div",{className:u.a.name}," "))},h=n(1920),v=new Array(3).fill();function g(){}t.a=function(){return a.createElement(r.a,{onPageChange:g},[a.createElement("div",{key:1,className:h.page},v.map(function(e,t){return a.createElement(f,{key:t,className:h.item})}))])}},2353:function(e,t,n){"use strict";var a=n(0),r=n(54),i=n(2301),o=n(980),s=n(2302),c=n(409),l=n(1816),u=n(184),d=n(3211),p=n.n(d);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var f=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={isFetching:!1,isItemsFetched:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var c=r.prototype;return c.UNSAFE_componentWillMount=function(){this.loadTopProductItems()},c.componentDidUpdate=function(){this.loadTopProductItems()},c.shouldComponentUpdate=function(){return this.props.isActive},c.loadTopProductItems=function(){var e=this,t=this.props,n=t.topProductItems,a=t.itemStore,r=t.isActive,i=this.state,o=i.isFetching,s=i.isItemsFetched;if(!o&&!s&&r){var c=n.filter(function(e){return!a[e.itemid.toString()]}).map(function(e){return{itemid:e.itemid,shopid:e.shopid}});c.length?(this.props.fetchBatchItem(c,function(){e.setState({isItemsFetched:!0,isFetching:!1})}),this.setState({isFetching:!0})):this.setState({isItemsFetched:!0})}},c.render=function(){var e=this.props,t=e.items,n=e.recommendationAlgorithm,r=e.recommendationInfo,c=e.landingPageName,l=e.clusterName,u=e.clusterKey,d=e.index;return this.state.isItemsFetched?t.length?a.createElement(a.Fragment,null,t.filter(function(e){return e.stock>0}).slice(0,30).map(function(e,t){return a.createElement(i.a,{item:e,key:e.itemid,rank:t+1,customSoldCount:e.sold,className:p.a.itemCard,recommendationAlgorithm:n,recommendationInfo:r,landingPageName:c,tabName:l,clusterKey:u,tabLocation:d})})):a.createElement(s.a,null):a.createElement(o.a,null)},r}(a.Component);t.a=Object(r.connect)(function(e,t){var n=Object(u.getItemStore)(e).items,a=t.topProductItems.map(function(e){return n[e.itemid]&&(e.score||e.count)?m({},n[e.itemid],{sold:e.score||e.count}):n[e.itemid]}).filter(function(e){return e&&e.itemid&&e.item_status!==l.a.SOLD_OUT});return{itemStore:n,items:a}},{fetchBatchItem:c.a})(f)},3210:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(33),i=n.n(r),o=n(54),s=n(876),c=n(2386),l=n(2353),u=n(184),d=n(369),p=n(2191),m=n(403),f=n(89),h=n(97),v=n(11),g=n(2192),b=n(1818),_=n.n(b);function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).onChangeCategory=function(e){n.props.history.replace(Object(h.topProducts)(e))},n.onChangeCategory=n.onChangeCategory.bind(y(y(n))),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.UNSAFE_componentWillMount=function(){this.props.categories.length||this.loadTopProducts()},o.shouldComponentUpdate=function(e){var t=this.props;return Object(m.a)(t,e,["catId","userId"],["categories"])},o.loadTopProducts=function(){var e=this.props.userId;this.props.fetchTopProducts(e,void 0,void 0,g.a)},o.render=function(){var e=this.props,t=e.categories,n=e.catId,r=Object(f.t)("label_top_products");return a.createElement("div",{className:i()(_.a.container,"container")},a.createElement("h1",{className:_.a.pageTitle},r),a.createElement(c.a,{categories:t,catId:n,onChangeCategory:this.onChangeCategory,landingPageName:r},function(e,t,n){return a.createElement(s.a,null,a.createElement(l.a,{topProductItems:e.data,isActive:n,recommendationAlgorithm:e.from,recommendationInfo:e.info,index:t,landingPageName:r,clusterName:e.name,clusterKey:e.key}))}))},r}(a.Component);t.default=Object(o.connect)(function(e,t){var n=t.location;return{categories:Object(p.a)(e.topProducts),catId:Object(v.g)(n.search).catId,userId:Object(u.getAccountInfo)(e).get("userid")}},{fetchTopProducts:d.c})(C)},3211:function(e,t,n){e.exports={itemCard:"_2QfAXF"}},3212:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a,r=n(23),i=n(264),o=n(13),s=n(1661);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var l=Object(r.a)(((a={})[s.a.REQUESTED]=function(e,t){var n,a=t.payload.key;return c({},e,((n={})[a]=c({},e[a]||{},{progress:o.b.REQ,error:0,state_update_time:0}),n))},a[s.a.SUCCESS]=function(e,t){var n,a,r=t.payload,s=r.key,l=r.section,u=r.offset,d=r.data,p=r.shouldReset,m=e[s]&&e[s].data||function(e){var t;return{update_time:0,version:"",sections:(t={},t[e]={total:0,data:[]},t)}}(l);return c({},e,((a={})[s]=c({},e[s]||{},{data:c({},m,{update_time:d.update_time,version:d.version,sections:c({},m.sections,(n={},n[l]={total:d.sections[l].total,data:Object(i.b)(p?[]:m.sections[l].data,d.sections[l].data,u)},n))}),progress:o.b.OK,state_update_time:Date.now()}),a))},a[s.a.FAILED]=function(e,t){var n,a=t.payload,r=a.key,i=a.error;return c({},e,((n={})[r]=c({},e[r],{progress:o.b.ERR,error:i}),n))},a),{})},3397:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(54),i=n(33),o=n.n(i),s=n(876),c=n(206),l=n(1550),u=n(1896),d=n(1186),p=n(2297),m=n(2298),f=n.n(m),h=function(e){var t=e.clusters,n=e.landingPageName,r=e.activeKey,i=e.className,s=e.onClick;return a.createElement("div",{className:o()(f.a.container,i||"")},t.map(function(e,t){return a.createElement(p.a,{key:t,categoryId:e.label||"",name:e.name||"",isActive:r===e.label,onClick:s,index:t,landingPageName:n})}))},v=n(89),g=n(2299),b=n.n(g),_=200,y=function(e){var t=e.dropdownItems,n=e.activeKey,r=e.landingPageName,i=e.onClickDropdownItem,o=a.useState(!1),s=o[0],c=o[1],l=a.useCallback(function(){c(!0)},[]),p=a.useCallback(function(){c(!1)},[]),m=a.useRef(null);a.useEffect(function(){var e=m.current;return e&&(e.addEventListener("mouseenter",l),e.addEventListener("mouseleave",p)),function(){e&&(e.removeEventListener("mouseenter",l),e.removeEventListener("mouseleave",p))}},[p,l]);var f=a.useCallback(function(e){i(e);var t=m.current;t&&t.removeEventListener("mouseenter",l),p(),window.setTimeout(function(){t&&t.addEventListener("mouseenter",l)},_)},[p,l,i]);return a.createElement("div",{className:b.a.dropdownButton,ref:m},a.createElement(d.b,{target:a.createElement(u.a,{name:Object(v.t)("label_other_top_products"),isDropdown:!0}),open:s,position:d.a.BOTTOM_RIGHT,showArrow:!0,fixedPosition:!0,arrowWidth:30,arrowHeight:10,arrowBackgroundColor:"white",margin:0,closeOnClickOutside:!1,popover:a.createElement(h,{clusters:t,activeKey:n||t[0]&&t[0].label||"",className:b.a.dropdown,onClick:f,landingPageName:r})}))},C=n(2300),I=n.n(C),E=7,O=20,S=0,N=2;function k(e){return e.length>E}function w(e,t,n){if(!k(e))return e;var a=function(e,n){return t?e.label===t:n===S};if(!n||!n.length){var r=e.findIndex(a),i=e[r];return r<E-1||!i?e.slice(0,E-1):[i].concat(e.slice(0,E-2))}var o=n.findIndex(a);if(-1!==o&&o<E-1)return n;var s=e.findIndex(a);return-1===s?n:[e[s]].concat(e.slice(0,E-2))}var T=Object(s.b)(function(e){var t=e.clusters,n=e.clusterId,r=e.landingPageName,i=e.children,o=e.onClusterChange,s=a.useState(w(t,n)),d=s[0],p=s[1],m=function(e,t){if(!t)return S;var n=e.findIndex(function(e){return e.label===t});return-1===n?S:n}(d,n);a.useEffect(function(){p(function(e){return w(t,n,e)})},[n,t]);var f=k(t),h=a.useCallback(function(e){o(e)},[o]),v=a.useCallback(function(e){o(e)},[o]),g=a.useCallback(function(e){return f&&e===E-1},[f]);if(!d.length)return null;var b=function(e){var t=e.clusters,n=e.tabData,r=e.activeIndex,i=e.activeClusterId,o=e.isExceedMaxTabs,s=e.landingPageName,c=e.onTabClick,l=e.onDropdownItemClick,d=n.map(function(e,t){return a.createElement(u.a,{name:e.name||"",isActive:t===r,key:e.label||t,categoryId:e.label,index:t,landingPageName:s,onClick:function(){e.label&&c(e.label)}})});return o&&d.push(a.createElement(y,{dropdownItems:t.slice(0,O),activeKey:i,onClickDropdownItem:l,landingPageName:s})),d}({clusters:t,tabData:d,activeIndex:m,activeClusterId:n,isExceedMaxTabs:f,landingPageName:r,onTabClick:h,onDropdownItemClick:v}),_=function(e){var t=e.tabData,n=e.activeIndex,r=e.children,i=e.isExceedMaxTabs,o=t.map(function(e,t){return t===n?a.createElement("div",{className:I.a.container,key:e.label},a.createElement(c.b,null),r(e,t,!0)):null});return i&&o.push(null),o}({tabData:d,activeIndex:m,children:i,isExceedMaxTabs:f});return d.length>N?a.createElement(l.a,{activeIndex:m,header:b,headerTop:0,shouldStopChangeTab:g,className:f?I.a.withDropdown:void 0},_):a.createElement("div",{className:I.a.container},i(d[0],0,!0))}),x=n(2353),j=n(3212),P=n(2193),A=n(3400),L=n(97),R=n(11),D=n(263),W=n(406),H=n(2192),B=n(1446),F=n(13),M=n(1818),U=n.n(M);function X(e){return e[W.m]}t.default=function(e){var t=e.history,n=e.location,i=a.useContext(D.a).injectAsyncReducer;a.useEffect(function(){var e;i(((e={})[W.m]=j.a,e))},[i]);var c=Object(r.useSelector)(function(e){return X(e)}),l=Object(r.useDispatch)();a.useEffect(function(){var e=Object(P.c)(c,B.a.SALES);c&&[F.b.INIT,F.b.ERR].includes(e)&&l(Object(A.a)({offset:0,limit:H.a,sortType:B.a.SALES,getStore:X}))},[l,c]);var u=a.useCallback(function(e){t.replace(Object(L.topProducts)(e))},[t]),d=Object(P.b)(c,B.a.SALES),p=Object(R.g)(n.search).catId,m=Object(v.t)("label_top_products");return a.createElement("div",{className:o()(U.a.container,"container")},a.createElement("h1",{className:U.a.pageTitle},m),a.createElement(T,{clusters:d,clusterId:p,onClusterChange:u,landingPageName:m},function(e,t,n){return a.createElement(s.a,null,a.createElement(x.a,{topProductItems:Object(P.a)(e),isActive:n,clusterKey:e.label||"",clusterName:e.name||"",recommendationInfo:e.info,landingPageName:m,index:t}))}))}},3400:function(e,t,n){"use strict";var a=n(31),r=n(11),i=n(3),o=n(1446);var s=n(2193);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function l(e,t){var n,a={update_time:e.data.update_time,version:e.data.version,sections:(n={},n[t]={total:0,data:[]},n)},r=e.data.sections.find(function(e){return e&&e.key===t});if(!r)return a;var i=r.index,o=r.data,s=r.total;return a.sections[t].total=s||0,i&&o&&i.forEach(function(e){var n=o.top_product.find(function(t){return t.key===e.key});n&&a.sections[t].data.push(function(e){var t=e.list,n=c({},function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["list"]),{list:{total:0,data:[]}});if(!t)return n;var a=t.index,r=t.data,i=t.total;n.list.total=i||0,r&&r.item_lite&&a.forEach(function(e){var t=r.item_lite.find(function(t){return t.key===e.key});t&&n.list.data.push(t)});return n}(n))}),a}var u=n(1661);function d(e){var t=e.sortType,n=e.limit,c=void 0===n?20:n,d=e.offset,m=void 0===d?0:d,f=e.getStore,h=e.onFinish,v=e.shouldSkipCall,g=e.shouldReset,b=e.version,_=Object(s.d)(t),y=u.b[t],C=Object(r.d)({bundle:t===o.a.PRICE?"top_sold_product_microsite_bp":"top_sold_product_microsite",limit:c,offset:m,version:m>0&&b||void 0});return Object(a.a)({apiCall:function(){return function(e){return Object(i.d)(""+o.b+e)}(C)},actions:[function(){return{type:u.a.REQUESTED,payload:{key:_}}},function(e,t){return{type:u.a.SUCCESS,payload:{key:_,section:y,offset:m,data:l(t,y),shouldReset:g}}},function(e,t){return{type:u.a.FAILED,payload:{key:_,error:t.error}}}],shouldSkipCall:f&&!v?p(t,f):v,onFinish:h})}function p(e,t){var n=Object(s.d)(e);return function(e){var a=t(e);return!!(a&&a[n]&&a[n].state_update_time)&&a[n].state_update_time>Date.now()-6e4}}n.d(t,"a",function(){return d})},3401:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(54),i=n(58),o=n(1918),s=n(392),c=n(33),l=n.n(c),u=n(1817),d=n(945),p=n(4),m=n(1193),f=n(318),h=n(97),v=n(90),g=n(89),b=n(396),_=n(1847),y=3,C=8,I=n(1919),E=n.n(I);function O(e){return e.item.partial}var S=1,N=2,k=3,w=3,T=function(e){for(var t=Object(m.a)("HomeTopProductsItem",e),n=Object(f.a)("HomeTopProductsItem",e),i=e.clusterKey,o=e.clusterItems,c=e.name,y=e.monthlySales,I=e.className,T=Object(h.topProducts)(i),x=Object(r.useSelector)(O),j=new Array(w).fill(null),P=0,A=0;A<w&&P<C;){var L=x[Object(p.a)(o,[P,"itemid"],0).toString()];L&&(j[A]=L.image,A+=1),P+=1}return a.createElement(s.a,{to:T,className:l()(E.a.container,I),innerRef:t,onClick:n},a.createElement("div",{className:E.a.imageSection},a.createElement("div",{className:E.a.leftImageSection},a.createElement(u.b,{rank:S,className:E.a.firstRank}),a.createElement(d.a,{src:Object(v.b)(j[0],!0),className:E.a.mainImage}),!!y&&a.createElement("div",{className:E.a.salesCount},Object(g.t)("label_monthly_sales",{count:Object(_.a)(b.l,y)}))),a.createElement("div",{className:E.a.rightImageSection},a.createElement("div",{className:E.a.subImageWrapper},a.createElement(u.b,{rank:N,isNumberOnly:!0,className:E.a.subRank}),a.createElement(d.a,{src:Object(v.b)(j[1],!0),className:E.a.subImage})),a.createElement("div",{className:E.a.subImageWrapper},a.createElement(u.b,{rank:k,isNumberOnly:!0,className:E.a.subRank}),a.createElement(d.a,{src:Object(v.b)(j[2],!0),className:E.a.subImage})))),a.createElement("div",{className:E.a.name},c))},x=n(2247),j=n(3212),P=n(3400),A=n(2193),L=n(409),R=n(263),D=n(264),W=n(1446),H=n(406),B=n(2192),F=n(13),M=n(1920);var U=[F.b.INIT,F.b.REQ];function X(e){return e[H.m]}function V(e){return e.item.partial}t.default=Object(i.d)(R.b,Object(r.connect)())(function(e){var t=e.injectAsyncReducer,n=e.dispatch;a.useEffect(function(){var e;t(((e={})[H.m]=j.a,e))},[t]);var i=a.useState(0),s=i[0],c=i[1],l=a.useState([]),u=l[0],d=l[1];a.useEffect(function(){n(Object(P.a)({offset:0,limit:B.a,sortType:W.a.SALES,getStore:X}))},[n]);var p=Object(r.useSelector)(X),m=Object(r.useSelector)(V),f=Object(A.c)(p,W.a.SALES),h=Object(A.b)(p,W.a.SALES),v=a.useMemo(function(){return function(e){if(e.length<y)return null;var t=[].concat(e);return t.length%y!=0&&(t=Object(D.a)(t,y)),t}(h)},[h]);if(a.useEffect(function(){if(v&&v.length){var e=function(e){for(var t=e.clusters,n=e.page,a=e.itemStore,r=y*n,i=r+y,o=t.slice(r,i),s=[],c=o,l=Array.isArray(c),u=0,c=l?c:c[Symbol.iterator]();;){var d;if(l){if(u>=c.length)break;d=c[u++]}else{if((u=c.next()).done)break;d=u.value}var p=d,m=Object(A.a)(p).slice(0,C),f=m.filter(function(e){var t=a[""+e.itemid];return!(t&&t.itemid&&t.image||s.some(function(t){return t.itemid===e.itemid}))});s=s.concat(f)}return s.map(function(e){return{itemid:e.itemid,shopid:e.shopid}})}({clusters:v,page:s,itemStore:m}),t=e.filter(function(e){return u.every(function(t){return t!==e.itemid})});t.length&&(d(function(e){return[].concat(e,t.map(function(e){return e.itemid}))}),n(Object(L.a)(e,void 0,!1,{schemaFilter:["items","itemid","image"]})))}},[v,n,m,u,s]),U.includes(f))return a.createElement(x.a,null);if(!v)return null;var g=Object(D.c)(v,y);return a.createElement(o.a,{onPageChange:c},g.map(function(e,t){return a.createElement("div",{key:"tp-"+t,className:M.page},e.map(function(e,n){return a.createElement(T,{key:e.label||n,clusterKey:e.label||"",clusterItems:Object(A.a)(e),name:e.name||"",monthlySales:e.count||0,className:M.item,index:t*y+n,info:e.info})}))}))})}}]);
//# sourceMappingURL=https://shopee.sg/assets/HomeTopProductBundle.5982e08930284e44c21f.js.map