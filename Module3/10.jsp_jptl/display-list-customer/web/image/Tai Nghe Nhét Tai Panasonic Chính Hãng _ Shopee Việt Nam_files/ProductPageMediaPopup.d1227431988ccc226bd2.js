(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[193],{3288:function(e,t,i){e.exports={container:"_3FzHnX",mediaPreview:"_3TtC8T",imagePlaceholder:"_1QSz1W",arrowLeft:"rv7fwm",arrowRight:"HhAy2u",video:"_18NE0y",videoClickMask:"_3xJlF0",playButton:"_1YjD61",replayButton:"s9gi2R",overlayWrapper:"_2TD6up",hidden:"_2OA-t2",videoError:"_3n__-5",videoErrorBtn:"_1wnrXs",videoErrorTxt:"urYZCt",videoErrorSuggestion:"_2AECp6",videoErrorMask:"_1CBukO"}},3289:function(e,t,i){e.exports={container:"_338qaA",title:"_2xEec7",thumbnails:"_2tm-At",thumbnail:"_2e-ot7",actions:"_1VnKdi",button:"_1Ji1OB",addToCartButton:"_1RRhCq",addToCartIcon:"_13LNsl"}},3290:function(e,t,i){e.exports={container:"_2yjnsD"}},3569:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),o=i(33),d=i.n(o),s=i(402),r=i(1089),l=i(1528),c=i(1041),h=i(945),m=i(279),v=i(272),u=i(1087),p=i(1093),f=i(90),E=i(89),y=i(3288),S=i.n(y);function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this).initializeVideo=function(e){if(p.a&&e&&"video"===e.type&&i.videoDom&&!i.videoPlayer){var t=new p.d(__LOCALE__,i.videoDom,e.id?e.id:"");t.initialize(),t.on(p.b.ENDED,i.handleVideoEnded),t.on(p.b.PLAY,i.handleVideoPlaying),t.on(p.b.PLAYING,i.handleVideoPlaying),t.on(p.b.PAUSED,i.handleVideoPaused),t.on(p.b.SEEKING,i.handleVideoSeeking),t.on(p.b.SEEKED,i.handleVideoSeeked),i.videoPlayer=t,t.play()}},i.setVideoDomRef=function(e){e&&(i.videoDom=e)},i.state={videoState:p.c.PLAYING,isVideoPausedByUser:!1},i.handleVideoPlaying=i.handleVideoPlaying.bind(_(_(i))),i.handleVideoPaused=i.handleVideoPaused.bind(_(_(i))),i.handleVideoEnded=i.handleVideoEnded.bind(_(_(i))),i.handleVideoSeeking=i.handleVideoSeeking.bind(_(_(i))),i.handleVideoSeeked=i.handleVideoSeeked.bind(_(_(i))),i.handleVideoClick=i.handleVideoClick.bind(_(_(i))),i.initializeVideo=i.initializeVideo.bind(_(_(i))),i.videoPlayer=null,i.videoDom=null,i.mounted=!1,i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.componentDidMount=function(){this.mounted=!0,this.initializeVideo(this.props.media)},o.UNSAFE_componentWillReceiveProps=function(e){this.initializeVideo(e.media)},o.componentDidUpdate=function(e){var t=this.props.media,i=this.videoPlayer;i&&t&&(e.media&&t.type===e.media.type&&t.mediaId===e.media.mediaId||("video"===t.type?this.state.isVideoPausedByUser||i&&i.play():i&&i.pause()))},o.componentWillUnmount=function(){this.mounted=!1,this.videoPlayer&&this.videoPlayer.destroy(),this.videoDom=null},o.handleVideoPlaying=function(){this.mounted&&this.setState({videoState:p.c.PLAYING})},o.handleVideoPaused=function(){this.mounted&&this.setState({videoState:p.c.PAUSED})},o.handleVideoEnded=function(){this.mounted&&this.setState({videoState:p.c.ENDED})},o.handleVideoSeeking=function(){this.mounted&&this.setState({videoState:p.c.SEEKING})},o.handleVideoSeeked=function(){this.mounted&&this.setState({videoState:this.videoPlayer&&this.videoPlayer.isPaused()?p.c.PAUSED:p.c.PLAYING})},o.handleVideoClick=function(){if(this.videoPlayer){var e=this.videoPlayer;e.isPaused()?e.play():e.pause(),this.mounted&&(this.state.videoState===p.c.ENDED?this.setState({isVideoPausedByUser:!1}):this.setState({isVideoPausedByUser:!this.state.isVideoPausedByUser}),this.setState({videoState:this.state.videoState===p.c.PLAYING?p.c.PAUSED:p.c.PLAYING}))}},o.render=function(){var e,t=this.props,i=t.media,a=t.showArrows,o=t.onLeftArrowClick,s=t.onRightArrowClick,y=t.overlays,_=t.previewInfo,w=t.flashSaleInfo,P=this.state.videoState,k=!!i&&"video"===i.type;return n.createElement("div",{className:S.a.container},n.createElement("video",{ref:this.setVideoDomRef,"data-dashjs-player":!0,controls:!0,style:{display:k&&p.a?"block":"none"},className:S.a.video}),k&&(p.a?n.createElement(n.Fragment,null,n.createElement("div",{className:S.a.videoClickMask,onClick:this.handleVideoClick}),P===p.c.PAUSED||P===p.c.SEEKING?n.createElement(l.a,{className:S.a.playButton}):P===p.c.ENDED&&n.createElement(c.a,{className:S.a.replayButton})):n.createElement("div",{className:S.a.videoError,style:i?Object(f.c)(i.mediaId,!1):null},n.createElement("div",{className:S.a.videoErrorMask},n.createElement(r.a,{className:S.a.videoErrorBtn}),n.createElement("div",{className:S.a.videoErrorTxt},Object(E.t)("msg_video_not_supported")),n.createElement("div",{className:S.a.videoErrorSuggestion},Object(E.t)("msg_suggest_chrome"))))),!k&&n.createElement(h.a,{src:i&&i.mediaId?Object(f.b)(i.mediaId):"",className:S.a.mediaPreview,placeholderClassName:S.a.imagePlaceholder}),!!y&&n.createElement("div",{className:d()(S.a.overlayWrapper,(e={},e[S.a.hidden]=k&&P!==p.c.ENDED,e))},n.createElement(u.a,{overlays:y,previewInfo:_,flashSaleInfo:w})),a&&n.createElement("div",{className:S.a.arrowLeft,onClick:o},n.createElement(m.a,null)),a&&n.createElement("div",{className:S.a.arrowRight,onClick:s},n.createElement(v.a,null)))},a}(n.Component),P=i(54),k=i(2311),I=i(280),b=i(3289),C=i.n(b);var N=Object(P.connect)(function(e,t){var i=t.item?Object(I.b)(e,t.item.shopid):null;return{shop:i&&i.shopInfo}})(function(e){var t=e.item,i=e.overlays;return a.a.createElement("div",{className:C.a.container},a.a.createElement("div",{className:C.a.title},t?t.name:null),a.a.createElement("div",{className:C.a.thumbnails},e.mediaList.map(function(n,o){return a.a.createElement(k.a,{key:o,media:n,isActive:e.selectedIndex===o,className:C.a.thumbnail,onClick:function(){return e.onClick(o)},showMediaDuration:!0,showHoverMask:!0,overlays:0===o?i:void 0,previewInfo:t?t.preview_info:void 0,flashSaleInfo:t?t.flash_sale:void 0})})))}),V=i(3290),D=i.n(V);function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var A=-1,x=1,L=function(e){var t,i;function a(t){var i;return(i=e.call(this,t)||this).state={selectedIndex:t.selectedIndex},i.onMediaClick=i.onMediaClick.bind(g(g(i))),i.handleKeyDown=i.handleKeyDown.bind(g(g(i))),i.moveSelectedIndex=i.moveSelectedIndex.bind(g(g(i))),i}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=a.prototype;return o.UNSAFE_componentWillMount=function(){window.addEventListener("keydown",this.handleKeyDown)},o.componentWillUnmount=function(){window.removeEventListener("keydown",this.handleKeyDown)},o.onMediaClick=function(e){this.setState({selectedIndex:e})},o.handleKeyDown=function(e){switch(e.preventDefault(),e.keyCode){case 27:return void this.props.onClose();case 37:return void this.moveSelectedIndex(A);case 39:return void this.moveSelectedIndex(x)}},o.moveSelectedIndex=function(e){var t=this.props.mediaList,i=t?t.length:0;i>1&&this.setState({selectedIndex:(this.state.selectedIndex+e+i)%i})},o.render=function(){var e=this,t=this.props,i=this.state.selectedIndex,a=t.item,o=t.mediaList,r=t.overlays,l=t.addItemToCart;return n.createElement(s.a,{closeWhenClickOverlay:!0,onClose:t.onClose},n.createElement("div",{className:d()("flex",D.a.container)},n.createElement(w,{media:o&&o[i],showArrows:o&&o.length>1,onLeftArrowClick:function(){return e.moveSelectedIndex(A)},onRightArrowClick:function(){return e.moveSelectedIndex(x)},overlays:0===i?r:void 0,previewInfo:a?a.preview_info:void 0,flashSaleInfo:a?a.flash_sale:void 0}),n.createElement(N,{item:a,mediaList:o,selectedIndex:i,showMediaDuration:!0,onClick:this.onMediaClick,addItemToCart:l,overlays:r,flashSaleInfo:a?a.flash_sale:void 0})))},a}(n.Component);t.default=L}}]);
//# sourceMappingURL=https://shopee.sg/assets/ProductPageMediaPopup.d1227431988ccc226bd2.js.map