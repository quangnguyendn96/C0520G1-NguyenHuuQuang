(window.miniJsonp=window.miniJsonp||[]).push([[2],{"0O3H":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.saveDraft=void 0;var a,s=d(r("YEIV")),n=d(r("QbLZ")),o=r("6SzI");function d(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=(0,o.createActions)({SAVE_DRAFT:function(e){return{conversationId:e.conversationId,draft:e.draft}}}).saveDraft;t.saveDraft=u;var c,i,l=(0,s.default)({},u,(function(e,t){var r=t.payload,a=r.conversationId,s=r.draft,o=e.draftHash;return o[a]=s,(0,n.default)({},e,{draftHash:o})}));t.default=l,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(u,"saveDraft","/workspace/src/reducers/draft/save.js"),c.register(l,"default","/workspace/src/reducers/draft/save.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},"0fB8":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.populateMessageRequested=void 0;var a=_(r("QbLZ")),s=_(r("14Xm"));t.getPopulateContent=M,t.populateMessage=L,t.watchPopulate=R;var n,o=r("6SzI"),d=r("5rFJ"),u=_(r("3atR")),c=r("vRVn"),i=r("1PJi"),l=r("6JQb"),f=r("OVuk"),p=r("XRLa"),v=r("wyum"),h=r("763i"),g=r("laFX"),b=r("r2BC"),S=r("8TFP"),m=r("4BOJ");function _(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var w,I,x=s.default.mark(M),k=s.default.mark(L),E=s.default.mark(R),y=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,o.createActions)({POPULATE_MESSAGE_REQUESTED:function(e){return{message:e.message}}}).populateMessageRequested);function M(e,t){var r,a,n,o,h,b;return s.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=void 0,a=t.id,n=t.shopId,o=t.creatorId,h=t.cartItems,s.t0=e,s.next="product"===s.t0?5:"order"===s.t0?9:"offer"===s.t0?13:"shop"===s.t0?17:"shops"===s.t0?21:s.t0===u.default.MSG_TYPE_RATE_CARDS?25:s.t0===u.default.MSG_TYPE_VOUCHER_WEB?29:s.t0===u.default.MSG_TYPE_VOUCHER?33:s.t0===u.default.MSG_TYPE_FEED_STORY?38:s.t0===u.default.MSG_TYPE_CART_REMINDER?42:s.t0===u.default.MSG_TYPE_ORDER_REVIEW_REMINDER?46:50;break;case 5:return s.next=7,(0,d.call)(c.showProduct,{payload:{productId:a,shopId:n}});case 7:return r=s.sent,s.abrupt("break",50);case 9:return s.next=11,(0,d.call)(i.showOrder,{payload:{orderId:a,shopId:n}});case 11:return r=s.sent,s.abrupt("break",50);case 13:return s.next=15,(0,d.call)(l.showOffer,{payload:{offerId:a,shopId:n}});case 15:return r=s.sent,s.abrupt("break",50);case 17:return s.next=19,(0,d.call)(f.showShop,{payload:{shopId:n}});case 19:return r=s.sent,s.abrupt("break",50);case 21:return s.next=23,(0,d.call)(f.showShop,{payload:{shopId:t}});case 23:return r=s.sent,s.abrupt("break",50);case 25:return s.next=27,(0,d.call)(v.showRateCard,{shopId:n,ids:a});case 27:return r=s.sent,s.abrupt("break",50);case 29:return s.next=31,(0,d.call)(m.showVoucher,{shopId:n,ids:a});case 31:return r=s.sent,s.abrupt("break",50);case 33:return s.next=35,(0,d.call)(m.showVoucher,{shopId:n,ids:Array.isArray(a)?a:[a]});case 35:return b=s.sent,r=b[0],s.abrupt("break",50);case 38:return s.next=40,(0,d.call)(g.showFeedStory,{payload:{id:a,creatorId:o}});case 40:return r=s.sent,s.abrupt("break",50);case 42:return s.next=44,(0,d.call)(p.showCartReminder,{id:a,cartItems:h});case 44:return r=s.sent,s.abrupt("break",50);case 46:return s.next=48,(0,d.call)(i.showUnrateOrder,{payload:{orderId:a,shopId:n}});case 48:return r=s.sent,s.abrupt("break",50);case 50:return s.abrupt("return",{type:e,content:r});case 51:case"end":return s.stop()}}),x,this)}function L(e){var t,r,n=e.payload.message;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete n.fetchStatus,e.t0=S.isSubAccountSelector,e.next=4,(0,d.select)((function(e){return e}));case 4:return e.t1=e.sent,t=(0,e.t0)(e.t1),e.t2=S.currentUserShopIdSelector,e.next=9,(0,d.select)((function(e){return e}));case 9:return e.t3=e.sent,r=(0,e.t2)(e.t3),e.next=13,(0,d.call)(b.populateMessageWithSourceAndContent,[n],r,t);case 13:return e.next=15,(0,d.put)((0,h.updateRecord)({name:"messages",id:n.id,record:(0,a.default)({},n)}));case 15:case"end":return e.stop()}}),k,this)}function R(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeEvery)(y,L);case 2:case"end":return e.stop()}}),E,this)}t.populateMessageRequested=y,(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(y,"populateMessageRequested","/workspace/src/reducers/message/populate.js"),w.register(M,"getPopulateContent","/workspace/src/reducers/message/populate.js"),w.register(L,"populateMessage","/workspace/src/reducers/message/populate.js"),w.register(R,"watchPopulate","/workspace/src/reducers/message/populate.js")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)}).call(this,r("YuTi")(e))},"1JFN":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.resendMessageRequested=void 0;var a,s=r("14Xm"),n=(a=s)&&a.__esModule?a:{default:a};t.watchResend=g;var o,d=r("6SzI"),u=r("5rFJ"),c=r("bqMa");(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var i,l,f=n.default.mark(h),p=n.default.mark(g),v=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,d.createActions)({RESEND_MESSAGE_REQUESTED:function(e){return{conversationId:e.conversationId,message:e.message}}}).resendMessageRequested);function h(e){var t=e.payload,r=t.conversationId,a=t.message;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.sendMessages)({conversationId:r,requestIds:[a.request_id],messages:[a]});case 2:case"end":return e.stop()}}),f,this)}function g(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.takeEvery)(v,h);case 2:case"end":return e.stop()}}),p,this)}t.resendMessageRequested=v,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(v,"resendMessageRequested","/workspace/src/reducers/message/resend.js"),i.register(h,"resendMessageRequestedSaga","/workspace/src/reducers/message/resend.js"),i.register(g,"watchResend","/workspace/src/reducers/message/resend.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,r("YuTi")(e))},"1PJi":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=i(r("14Xm"));t.showOrder=h,t.showUnrateOrder=g;var s,n=i(r("rN3q")),o=i(r("jtha")),d=r("cOd3"),u=r("5rFJ"),c=r("tpro");function i(e){return e&&e.__esModule?e:{default:e}}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);var l,f,p=a.default.mark(h),v=a.default.mark(g);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function h(e){var t,r,s,i,l,f,v=e.payload,h=v.orderId,g=v.shopId;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.call)(o.default,{resource:"order",id:h,params:{shop_id:g}});case 3:return t=e.sent,e.next=6,(0,u.select)((0,d.orderSelector)(h));case 6:return(r=e.sent)&&r.status&&(t.status=r.status),s=(0,n.default)("orders",t),i=s.entities,e.next=11,(0,u.put)((0,c.updateEntities)({entities:i}));case 11:return e.abrupt("return",t);case 14:return e.prev=14,e.t0=e.catch(0),l=(0,n.default)("orders",{id:h,shop_id:g,error:!0}),f=l.entities,e.next=19,(0,u.put)((0,c.updateEntities)({entities:f}));case 19:return e.abrupt("return",{});case 20:case"end":return e.stop()}}),p,this,[[0,14]])}function g(e){var t,r,s,i,l,f,p=e.payload,h=p.orderId,g=p.shopId;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.select)((0,d.orderSelector)(h));case 3:if(!(t=e.sent)||t.error){e.next=6;break}return e.abrupt("return",t);case 6:return e.next=8,(0,u.call)(o.default,{resource:"order",id:h,params:{shop_id:g}});case 8:return r=e.sent,t&&t.status&&(r.status=t.status),s=(0,n.default)("orders",r),i=s.entities,e.next=13,(0,u.put)((0,c.updateEntities)({entities:i}));case 13:return e.abrupt("return",r);case 16:return e.prev=16,e.t0=e.catch(0),l=(0,n.default)("orders",{id:h,shop_id:g,error:!0}),f=l.entities,e.next=21,(0,u.put)((0,c.updateEntities)({entities:f}));case 21:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),v,this,[[0,16]])}(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(h,"showOrder","/workspace/src/reducers/order/show.js"),l.register(g,"showUnrateOrder","/workspace/src/reducers/order/show.js")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}).call(this,r("YuTi")(e))},"3hjT":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateConversationListsHash=void 0;var a,s=u(r("YEIV")),n=u(r("QbLZ")),o=r("6SzI"),d=u(r("xk4V"));function u(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c=(0,o.createActions)({UPDATE_CONVERSATION_LISTS_HASH:function(){return{}}}).updateConversationListsHash;t.updateConversationListsHash=c;var i,l,f=(0,s.default)({},c,(function(e){return(0,n.default)({},e,{listsHash:(0,d.default)()})}));t.default=f,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(c,"updateConversationListsHash","/workspace/src/reducers/conversation/update.js"),i.register(f,"default","/workspace/src/reducers/conversation/update.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,r("YuTi")(e))},"4fYm":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.markMessagesSucceed=t.markMessagesRequested=void 0;var a=h(r("YEIV")),s=h(r("14Xm")),n=h(r("QbLZ")),o=h(r("gDS+"));t.markMessagesRequestedSaga=w,t.watchMark=I;var d,u=r("6SzI"),c=r("5rFJ"),i=h(r("jtha")),l=r("ZGUL"),f=r("WNYn"),p=r("9jhx"),v=r("763i");function h(e){return e&&e.__esModule?e:{default:e}}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&d(e);var g=s.default.mark(w),b=s.default.mark(I),S=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,u.createActions)({MARK_MESSAGES_REQUESTED:function(e){return{conversationId:e.conversationId,isRead:e.isRead,latestMessageId:e.latestMessageId,shopId:e.shopId,unreadCount:e.unreadCount}},MARK_MESSAGES_SUCCEED:function(e){return{conversationId:e.conversationId,markType:e.markType}}})),m=S.markMessagesRequested,_=S.markMessagesSucceed;function w(e){var t,r,a,d,u,h,b=e.payload,S=b.conversationId,m=b.isRead,w=b.latestMessageId,I=b.shopId;b.unreadCount;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=m?"read":"unread",r=m?{last_read_message_id:w}:{},I&&(r.shop_id=I),e.next=6,(0,c.call)(i.default,{method:"PUT",parent:"conversations",parentId:S,resource:t,payload:(0,o.default)((0,n.default)({},r))});case 6:if(!m){e.next=24;break}return e.next=9,(0,c.select)((function(e){return e.conversationReducer}));case 9:return a=e.sent,d=a.conversationMark,u="socket"===d[S],e.next=14,(0,c.put)(_({conversationId:S,markType:u?"":"api"}));case 14:if(u){e.next=24;break}return e.next=17,(0,c.select)((0,f.getConversation)(S));case 17:if(h=e.sent,!h.unread_count){e.next=24;break}return e.next=22,(0,c.put)((0,v.updateRecord)({name:"conversations",id:S,record:{last_read_message_id:w,unread_count:0}}));case 22:return e.next=24,(0,c.put)((0,p.updateUnreadCount)({type:p.unreadCountActions.MARK_AS_READ,conversation:h}));case 24:e.next=30;break;case 26:return e.prev=26,e.t0=e.catch(0),e.next=30,(0,c.put)((0,l.showOperationFailureToastRequested)({error:e.t0}));case 30:case"end":return e.stop()}}),g,this,[[0,26]])}function I(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.takeEvery)(m,w);case 2:case"end":return e.stop()}}),b,this)}t.markMessagesRequested=m,t.markMessagesSucceed=_;var x,k,E=(0,a.default)({},_,(function(e,t){var r=t.payload,s=r.conversationId,o=r.markType;return(0,n.default)({},e,{conversationMark:(0,n.default)({},e.conversationMark,(0,a.default)({},s,o))})}));t.default=E,(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(x.register(m,"markMessagesRequested","/workspace/src/reducers/conversation/mark.js"),x.register(_,"markMessagesSucceed","/workspace/src/reducers/conversation/mark.js"),x.register(w,"markMessagesRequestedSaga","/workspace/src/reducers/conversation/mark.js"),x.register(I,"watchMark","/workspace/src/reducers/conversation/mark.js"),x.register(E,"default","/workspace/src/reducers/conversation/mark.js")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)}).call(this,r("YuTi")(e))},"4qdM":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.resendOfflineMessagesOnceSucceed=t.resendOfflineMessagesOnce=t.resetMessagesFailedByOffline=t.sendMessagesFailedByOffline=void 0;var a,s=S(r("YEIV")),n=S(r("jWXv")),o=S(r("m1cH")),d=S(r("QbLZ")),u=S(r("FyfS")),c=S(r("14Xm")),i=S(r("sk9p")),l=S(r("oF3Q"));t.resendOfflineMessagesOnceSaga=M,t.updateResendConversationMessage=L,t.watchOffline=R;var f,p=r("6SzI"),v=r("5rFJ"),h=r("wNa6"),g=r("bqMa"),b=r("0VV5");function S(e){return e&&e.__esModule?e:{default:e}}(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&f(e);var m=c.default.mark(M),_=c.default.mark(L),w=c.default.mark(R),I=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,p.createActions)({SEND_MESSAGES_FAILED_BY_OFFLINE:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},RESET_MESSAGES_FAILED_BY_OFFLINE:function(){return{}},RESEND_OFFLINE_MESSAGES_ONCE:function(){return{}},RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED:function(e){return{conversationId:e.conversationId,messageIds:e.messageIds}}})),x=I.sendMessagesFailedByOffline,k=I.resetMessagesFailedByOffline,E=I.resendOfflineMessagesOnce,y=I.resendOfflineMessagesOnceSucceed;function M(){var e,t,r,a,s,n,o,d,f,p,h,S,_,w,I,x,E=this;return c.default.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,v.select)(b.offlineMessagesSelector);case 2:e=m.sent,t=(0,l.default)(e),r=[],a=c.default.mark((function e(t){var a,s,n,o,d;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,i.default)(t,2),s=a[0],n=a[1],e.next=3,(0,v.select)((0,b.getMessagesSelector)(n));case 3:o=e.sent,d=n.map((function(e,t){return{conversationId:s,requestIds:[e],messages:[o[t]]}})).filter((function(e){return e.messages[0]})),r=r.concat(d);case 6:case"end":return e.stop()}}),e,E)})),s=!0,n=!1,o=void 0,m.prev=9,d=(0,u.default)(t);case 11:if(s=(f=d.next()).done){m.next=17;break}return p=f.value,m.delegateYield(a(p),"t0",14);case 14:s=!0,m.next=11;break;case 17:m.next=23;break;case 19:m.prev=19,m.t1=m.catch(9),n=!0,o=m.t1;case 23:m.prev=23,m.prev=24,!s&&d.return&&d.return();case 26:if(m.prev=26,!n){m.next=29;break}throw o;case 29:return m.finish(26);case 30:return m.finish(23);case 31:h=!0,S=!1,_=void 0,m.prev=34,w=(0,u.default)(r);case 36:if(h=(I=w.next()).done){m.next=45;break}return x=I.value,m.next=40,(0,g.sendMessages)(x);case 40:return m.next=42,(0,v.delay)(400);case 42:h=!0,m.next=36;break;case 45:m.next=51;break;case 47:m.prev=47,m.t2=m.catch(34),S=!0,_=m.t2;case 51:m.prev=51,m.prev=52,!h&&w.return&&w.return();case 54:if(m.prev=54,!S){m.next=57;break}throw _;case 57:return m.finish(54);case 58:return m.finish(51);case 59:return m.next=61,(0,v.put)(k());case 61:case"end":return m.stop()}}),m,this,[[9,19,23,31],[24,,26,30],[34,47,51,59],[52,,54,58]])}function L(e){var t=e.conversationId,r=e.messageIds;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.put)(y({conversationId:t,messageIds:r}));case 2:case"end":return e.stop()}}),_,this)}function R(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.takeEvery)(E,M);case 2:case"end":return e.stop()}}),w,this)}t.sendMessagesFailedByOffline=x,t.resetMessagesFailedByOffline=k,t.resendOfflineMessagesOnce=E,t.resendOfflineMessagesOnceSucceed=y,window.addEventListener("judge-online",(function(){h.store.dispatch(E())}));var H,G,C=(a={},(0,s.default)(a,x,(function(e,t){var r=t.payload,a=r.conversationId,u=r.requestIds,c=e.offlineMessages,i=(c[a]||[]).concat(u);return(0,d.default)({},e,{offlineMessages:(0,d.default)({},c,(0,s.default)({},a,[].concat((0,o.default)(new n.default(i)))))})})),(0,s.default)(a,k,(function(e){return(0,d.default)({},e,{offlineMessages:{}})})),(0,s.default)(a,y,(function(e,t){var r=t.payload,a=r.conversationId,n=r.messageIds,o=e.messageIdsHash,u=o[a]||{},c=(u.all||[]).filter((function(e){return!n.includes(e)})),i=(u.failed||[]).filter((function(e){return!n.includes(e)})),l=(u.sending||[]).filter((function(e){return!n.includes(e)}));return(0,d.default)({},e,{messageIdsHash:(0,d.default)({},o,(0,s.default)({},a,(0,d.default)({},u,{all:c,failed:i,sending:l})))})})),a);t.default=C,(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(x,"sendMessagesFailedByOffline","/workspace/src/reducers/message/offline.js"),H.register(k,"resetMessagesFailedByOffline","/workspace/src/reducers/message/offline.js"),H.register(E,"resendOfflineMessagesOnce","/workspace/src/reducers/message/offline.js"),H.register(y,"resendOfflineMessagesOnceSucceed","/workspace/src/reducers/message/offline.js"),H.register(M,"resendOfflineMessagesOnceSaga","/workspace/src/reducers/message/offline.js"),H.register(L,"updateResendConversationMessage","/workspace/src/reducers/message/offline.js"),H.register(R,"watchOffline","/workspace/src/reducers/message/offline.js"),H.register(C,"default","/workspace/src/reducers/message/offline.js")),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&G(e)}).call(this,r("YuTi")(e))},"5rLn":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.getConversationDetailRequested=void 0;var a=p(r("14Xm"));t.getConversationDetailRequestedSaga=m,t.watchDetail=_;var s,n=r("6SzI"),o=r("5rFJ"),d=p(r("rN3q")),u=p(r("jtha")),c=r("763i"),i=r("tpro"),l=r("WNYn"),f=r("4fYm");function p(e){return e&&e.__esModule?e:{default:e}}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);var v,h,g=a.default.mark(m),b=a.default.mark(_),S=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,n.createActions)({GET_CONVERSATION_DETAIL_REQUESTED:function(e){return{conversationId:e.conversationId,shopId:e.shopId,needRead:e.needRead}}}).getConversationDetailRequested);function m(e){var t,r,s,n,p,v,h,b,S=e.payload,m=S.conversationId,_=S.shopId,w=S.needRead;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.call)(u.default,{resource:"conversations",id:m,params:{shop_id:_}});case 3:return t=e.sent,e.t0=(0,l.getConversation)(m),e.next=7,(0,o.select)((function(e){return e}));case 7:if(e.t1=e.sent,(0,e.t0)(e.t1).id){e.next=15;break}return r=(0,d.default)("conversations",t),s=r.entities,e.next=13,(0,o.put)((0,i.updateEntities)({entities:s}));case 13:e.next=18;break;case 15:return n=t.unread_count,p=t.flag,e.next=18,(0,o.put)((0,c.updateRecord)({name:"conversations",id:m,record:{unread_count:n,flag:p}}));case 18:if(!w){e.next=23;break}if(v=t.unread_count,h=t.latest_message_id,b=t.shop_id,!(v>0)){e.next=23;break}return e.next=23,(0,o.put)((0,f.markMessagesRequested)({conversationId:m,isRead:!0,latestMessageId:h,shopId:b,unreadCount:v}));case 23:return e.abrupt("return",t);case 26:return e.prev=26,e.t2=e.catch(0),e.abrupt("return",{});case 29:case"end":return e.stop()}}),g,this,[[0,26]])}function _(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.takeEvery)(S,m);case 2:case"end":return e.stop()}}),b,this)}t.getConversationDetailRequested=S,(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(v.register(S,"getConversationDetailRequested","/workspace/src/reducers/conversation/detail.js"),v.register(m,"getConversationDetailRequestedSaga","/workspace/src/reducers/conversation/detail.js"),v.register(_,"watchDetail","/workspace/src/reducers/conversation/detail.js")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)}).call(this,r("YuTi")(e))},"6JQb":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=l(r("14Xm")),s=l(r("QbLZ"));t.showOffer=h;var n,o=l(r("rN3q")),d=l(r("jtha")),u=r("kXhk"),c=r("tpro"),i=r("5rFJ");function l(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var f,p,v=a.default.mark(h);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function h(e){var t,r,n,l,f,p,h=e.payload,g=h.offerId,b=h.shopId;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.select)((0,u.offerSelector)(g));case 3:if(!(t=e.sent)||t.error){e.next=6;break}return e.abrupt("return",t);case 6:return e.next=8,(0,i.call)(d.default,{resource:"offers",id:g,params:{shop_id:b}});case 8:return t=e.sent,r=(0,s.default)({},t,{product:t.product_id}),n=(0,o.default)("offers",r),l=n.entities,e.next=13,(0,i.put)((0,c.updateEntities)({entities:l}));case 13:return e.abrupt("return",r);case 16:return e.prev=16,e.t0=e.catch(0),f=(0,o.default)("offers",{id:g,shop_id:b,error:!0}),p=f.entities,e.next=21,(0,i.put)((0,c.updateEntities)({entities:p}));case 21:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),v,this,[[0,16]])}(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(h,"showOffer","/workspace/src/reducers/offer/show.js"),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,r("YuTi")(e))},"6RWM":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a,s=u(r("QbLZ")),n=u(r("tpro")),o=u(r("763i")),d=r("6SzI");function u(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c,i,l=(0,d.handleActions)((0,s.default)({},n.default,o.default),{users:{},messages:{},conversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},feedStories:{},messageShortcuts:{},persist:null});t.default=l,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&c.register(l,"default","/workspace/src/reducers/entity/index.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},"763i":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.batchUpdateRecord=t.deleteRecord=t.updateRecord=void 0;var a,s=f(r("GQeE")),n=f(r("YEIV")),o=f(r("QbLZ")),d=f(r("14Xm"));t.updateRecordSaga=m,t.watchUpdate=_;var u,c=r("5rFJ"),i=r("6SzI"),l=r("3hjT");function f(e){return e&&e.__esModule?e:{default:e}}(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&u(e);var p=d.default.mark(m),v=d.default.mark(_),h=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,i.createActions)({UPDATE_RECORD:function(e){return{name:e.name,id:e.id,record:e.record}},DELETE_RECORD:function(e){return{name:e.name,id:e.id}},BATCH_UPDATE_RECORD:function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}}})),g=h.updateRecord,b=h.deleteRecord,S=h.batchUpdateRecord;function m(e){var t=e.payload,r=t.name,a=t.id,s=t.record;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("conversations"!==r){e.next=3;break}return e.next=3,(0,c.put)((0,l.updateConversationListsHash)());case 3:return e.next=5,(0,c.put)(g({name:r,id:a,record:s}));case 5:case"end":return e.stop()}}),p,this)}function _(){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.takeEvery)(g,m);case 2:case"end":return e.stop()}}),v,this)}t.updateRecord=g,t.deleteRecord=b,t.batchUpdateRecord=S;var w,I,x=(a={},(0,n.default)(a,g,(function(e,t){var r=t.payload,a=r.name,s=r.id,d=r.record;return(0,o.default)({},e,(0,n.default)({},a,(0,o.default)({},e[a],(0,n.default)({},s,(0,o.default)({},e[a][s],d)))))})),(0,n.default)(a,b,(function(e,t){var r=t.payload,a=r.name,s=r.id,d=e[a];return delete d[s],(0,o.default)({},e,(0,n.default)({},a,d))})),(0,n.default)(a,S,(function(e,t){var r=t.payload,a=r.name,d=r.records,u=r.checkProp,c=(0,o.default)({},e[a]);return(0,s.default)(d).forEach((function(e){(!u||u&&d[e][u]>c[e][u])&&(c[e]=(0,o.default)({},c[e],d[e]))})),(0,o.default)({},e,(0,n.default)({},a,c))})),a);t.default=x,(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(g,"updateRecord","/workspace/src/reducers/entity/record.js"),w.register(b,"deleteRecord","/workspace/src/reducers/entity/record.js"),w.register(S,"batchUpdateRecord","/workspace/src/reducers/entity/record.js"),w.register(m,"updateRecordSaga","/workspace/src/reducers/entity/record.js"),w.register(_,"watchUpdate","/workspace/src/reducers/entity/record.js"),w.register(x,"default","/workspace/src/reducers/entity/record.js")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)}).call(this,r("YuTi")(e))},"7b+N":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.watchProductSagas=void 0;var a,s=u(r("QbLZ")),n=r("6SzI"),o=r("WnRE"),d=u(o);function u(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c,i,l=t.watchProductSagas=[o.watchFetch],f=(0,n.handleActions)((0,s.default)({},d.default),{myShopSearchStatus:"",otherShopSearchStatus:"",fetchResult:{},myShopSearchKeyword:"",otherShopSearchKeyword:"",selectedProductTab:"other",allShopSearchStatus:""});t.default=f,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(l,"watchProductSagas","/workspace/src/reducers/product/index.js"),c.register(f,"default","/workspace/src/reducers/product/index.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},"7nv7":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.fakeConversationSucceeded=void 0;var a,s=d(r("YEIV")),n=d(r("QbLZ")),o=r("6SzI");function d(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=(0,o.createActions)({FAKE_CONVERSATION_SUCCEEDED:function(e){return{conversationId:e.conversationId}}}).fakeConversationSucceeded;t.fakeConversationSucceeded=u;var c,i,l=(0,s.default)({},u,(function(e,t){var r=t.payload.conversationId;return(0,n.default)({},e,{conversationIds:[r].concat(e.conversationIds.filter((function(e){return r!==e})))})}));t.default=l,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(u,"fakeConversationSucceeded","/workspace/src/reducers/conversation/fake.js"),c.register(l,"default","/workspace/src/reducers/conversation/fake.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},"8Ryq":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateConversationTimestamp=t.updateFetchConversationsDirection=t.updateFetchConversationsStatus=t.fetchConversationsSucceeded=t.fetchConversationsRequested=void 0;var a,s=M(r("YEIV")),n=M(r("14Xm")),o=M(r("m1cH")),d=M(r("P2sY")),u=M(r("jWXv")),c=M(r("rfXi")),i=M(r("QbLZ")),l=M(r("sk9p")),f=M(r("gDS+")),p=M(r("4d7F"));t.fetchConversationsRequestedSaga=F,t.watchSubFetch=D;var v,h=M(r("jtha")),g=M(r("b/qR")),b=r("6SzI"),S=r("5rFJ"),m=r("WNYn"),_=r("gXnt"),w=r("UfXg"),I=r("8TFP"),x=r("Gld0"),k=r("0VV5"),E=r("Q8fy"),y=M(r("kiXb"));function M(e){return e&&e.__esModule?e:{default:e}}(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&v(e);var L=n.default.mark(F),R=n.default.mark(D),H=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,b.createActions)({FETCH_CONVERSATIONS_REQUESTED:function(e){var t=e.direction,r=void 0===t?"reset":t,a=e.shopId,s=void 0===a?null:a,n=e.noPending;return{direction:r,shopId:s,noPending:void 0!==n&&n,triggerBySync:e.triggerBySync}},FETCH_CONVERSATIONS_SUCCEEDED:function(e){var t=e.conversationIds,r=e.conversationIdsMap,a=e.oldestReceivedMessageId,s=e.latestReceivedMessageId,n=e.oldestTimestampNano,o=e.latestTimestampNano,d=e.direction;return{conversationIds:t,conversationIdsMap:r,oldestReceivedMessageId:a,latestReceivedMessageId:s,direction:void 0===d?"reset":d,status:e.status,hasMore:e.hasMore,latestTimestampNano:o,oldestTimestampNano:n,persist:e.persist,shouldFetchByTimestamp:e.shouldFetchByTimestamp,maxLatestTimestampNano:e.maxLatestTimestampNano,maxLatestReceivedMessageId:e.maxLatestReceivedMessageId,syncFetchException:e.syncFetchException}},UPDATE_FETCH_CONVERSATIONS_STATUS:function(e){return{status:e.status}},UPDATE_FETCH_CONVERSATIONS_DIRECTION:function(e){return{direction:e.direction}},UPDATE_CONVERSATION_TIMESTAMP:function(e){return{latestTimestampNano:e.latestTimestampNano,oldestTimestampNano:e.oldestTimestampNano}}})),G=H.fetchConversationsRequested,C=H.fetchConversationsSucceeded,T=H.updateFetchConversationsStatus,O=H.updateFetchConversationsDirection,j=H.updateConversationTimestamp;t.fetchConversationsRequested=G,t.fetchConversationsSucceeded=C,t.updateFetchConversationsStatus=T,t.updateFetchConversationsDirection=O,t.updateConversationTimestamp=j;var A=function(e,t,r,a){var s={},n="older"===e?t:"latest"===e?r:"";return s.resource="conversations",s.resource="pinned"===a?"conversation/list":"conversations",s.params={next_timestamp_nano:n,direction:"latest"===e&&n?"latest":"older"},"unread"===a&&(s.params.unread_only=!0),"pinned"===a&&(s.params.type=a,s.version="v1.2"),new p.default((function(e,t){(0,h.default)(s).then((function(t){var r=t.conversations,a=void 0===r?[]:r,s=t.page_result;e([a,void 0===s?{}:s])})).catch((function(e){t(e)}))}))},P=function(e,t,r,a,s,n){var o="older"===t?r:"latest"===t?a:"",d={direction:"latest"===t?"latest":"older"};if(o&&(d.last_received_message_id=o),n)return e&&(d.shop_id=e),s&&["unread","pinned"].includes(s)&&(d.type=s),new p.default((function(e,t){(0,h.default)({parent:"subaccount",resource:"conversations",params:d}).then((function(t){var r=t.conversations;e(void 0===r?[]:r)})).catch((function(e){t(e)}))}))},N=function(e){return new p.default((function(t){(0,h.default)({parent:"setting",resource:"auto_translations",params:{shop_ids:(0,f.default)(e)}}).then((function(e){var r=e.auto_translations;t(void 0===r?[]:r)})).catch((function(){t([])}))}))},q=function(e,t){e.sort((function(e,t){return t.latest_message_id-e.latest_message_id}));var r=e[0],a=r.last_message_time_nano,s=r.next_timestamp_nano;return t&&!s&&(s=t.next_message_time_nano),{nextTimestampNano:s,oldestTimestampNano:s,latestTimestampNano:a}};function F(e){var t,r,a,s,f,p,v,h,b,M,R,H,O,j,F,D,U,Y,Q,V,X,B,z,W,Z,J,K,$,ee,te,re,ae,se,ne,oe,de,ue,ce,ie,le,fe,pe,ve,he,ge,be,Se,me,_e,we,Ie,xe=e.payload,ke=xe.direction,Ee=xe.shopId,ye=xe.noPending,Me=xe.triggerBySync;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.select)(I.isSubAccountSelector);case 2:return t=e.sent,e.next=5,(0,S.select)(I.isScChatSelector);case 5:return r=e.sent,e.next=8,(0,S.select)(m.filterSelector);case 8:if(a=e.sent.toLowerCase(),s=!t&&["all","unread","pinned"].includes(a),"reset"!==ke){e.next=13;break}return e.next=13,(0,S.put)(C({conversationIds:[],oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",oldestTimestampNano:"",latestTimestampNano:"",maxLatestTimestampNano:"",direction:"reset",hasMore:!0,status:g.default.SUCCEED,persist:null,shouldFetchByTimestamp:s}));case 13:return e.next=15,(0,S.select)((function(e){return e.conversationReducer}));case 15:if(f=e.sent,p=f.oldestTimestampNano,v=f.latestTimestampNano,h=f.maxLatestTimestampNano,b=f.oldestReceivedMessageId,M=f.latestReceivedMessageId,R=f.maxLatestReceivedMessageId,H=f.hasMore,O=f.persist,j=f.conversationIds,F=f.status,D=f.syncFetchException,U="reset"===ke||(s?!p:!b)&&"older"===ke,e.prev=28,"older"===ke&&(s?"0"===p:!H)){e.next=148;break}if(ye){e.next=33;break}return e.next=33,(0,S.put)(T({status:U?g.default.INIT_PENDING:g.default.PENDING}));case 33:if(Y=[],Q={},!s){e.next=44;break}return e.next=38,(0,S.call)(A,ke,p,v,a);case 38:V=e.sent,X=(0,l.default)(V,2),Y=X[0],Q=X[1],e.next=47;break;case 44:return e.next=46,(0,S.call)(P,Ee,ke,b,M,a,t);case 46:Y=e.sent;case 47:if(!(B=Y.length)){e.next=144;break}if(!("reset"!==ke||s&&"pinned"!==a)){e.next=61;break}if(z=Y[B-1],W="older"===ke,Z=void 0,J=void 0,s?(Z=W?p:v,J=W?z.next_timestamp_nano:z.last_message_time_nano):(Z=W?b:M,J=z.latest_message_id),!Z||!J){e.next=61;break}if(W?J<Z:J>Z){e.next=61;break}return e.next=60,(0,S.put)(C({direction:ke,status:g.default.SUCCEED,hasMore:"latest"===ke,persist:O,oldestReceivedMessageId:b,latestReceivedMessageId:M,maxLatestReceivedMessageId:M,conversationIds:j,oldestTimestampNano:p,latestTimestampNano:v,maxLatestTimestampNano:v,shouldFetchByTimestamp:s}));case 60:return e.abrupt("return");case 61:if(Y=Y.map((function(e){return"censored_blacklist"===e.last_message_state?(0,i.default)({},e,{latestMessageStatus:"failed",latestMessage:{type:"text",content:{text:y.default.t("common.blacklist.replaced_text")}}}):e})),r||t){e.next=72;break}return e.next=65,(0,S.select)(x.autoTranslation);case 65:if("enabled"===e.sent){e.next=72;break}return K=(0,c.default)(new u.default(Y.map((function(e){return e.to_shop_id})))),e.next=70,(0,S.call)(N,K);case 70:$=e.sent,Y=Y.map((function(e){var t=$.find((function(t){return t.shop_id===e.to_shop_id}));return(0,i.default)({},e,{translationAccess:!!t&&t.is_auto_translation})}));case 72:if(ee={},Y.forEach((function(e){ee[e.id]=!0})),te={status:g.default.SUCCEED,direction:ke,conversationIdsMap:ee,shouldFetchByTimestamp:s},re=q(Y,Q.next_cursor),!s){e.next=91;break}return ae=re.oldestTimestampNano,se=re.latestTimestampNano,e.next=80,(0,S.select)((function(e){return e.conversationReducer}));case 80:return ne=e.sent,oe=ne.conversationIds,de=ne.persist,e.next=85,(0,S.call)(w.saveToStore,Y,oe,de,ke);case 85:ue=e.sent,ce=ue.persistObj,ie=ue.resultConversationIds,te=(0,d.default)({},te,{oldestTimestampNano:ae,latestTimestampNano:se,persist:ce,conversationIds:ie,maxLatestTimestampNano:!h||h<se?se:h}),e.next=110;break;case 91:if(le=new Date(Y[0].last_message_time).getTime()/1e3,fe=void 0,!t){e.next=104;break}return pe=[],Y.forEach((function(e){pe.push(e.shop_id)})),e.next=98,(0,S.call)(_.fetchShopsByIds,{shopIds:[].concat((0,o.default)(new u.default(pe)))});case 98:return ve=e.sent,e.next=101,(0,S.call)(w.saveToStore,Y,j,O,ke,ve);case 101:fe=e.sent,e.next=107;break;case 104:return e.next=106,(0,S.call)(w.saveToStore,Y,j,O,ke);case 106:fe=e.sent;case 107:he=Y[0].latest_message_id,ge=Y[B-1].latest_message_id,te=(0,d.default)({},te,{hasMore:!0,latestTimestamp:le,conversationIdsMap:ee,persist:fe.persistObj,oldestReceivedMessageId:ge,latestReceivedMessageId:he,maxLatestReceivedMessageId:!R||R<he?he:R,conversationIds:fe.resultConversationIds});case 110:if(!Me){e.next=124;break}return e.next=113,(0,S.select)(m.currentConversationIdSelector);case 113:if(!(be=e.sent)||!ee[be]){e.next=124;break}return Se=Y.find((function(e){return e.id===be})),me=(Se||{}).latest_message_id,e.next=119,(0,S.select)(k.messagesWithSourceSelector);case 119:if(_e=e.sent,we=_e.length?_e[_e.length-1].id:"",me===we){e.next=124;break}return e.next=124,(0,S.put)((0,E.fetchMessagesRequested)({conversation:Se,reset:!0}));case 124:return e.next=126,(0,S.put)(C(te));case 126:if("latest"!==ke){e.next=139;break}if(!s){e.next=135;break}if(Ie=re.nextTimestampNano,e.t0="0"!==Ie,!e.t0){e.next=133;break}return e.next=133,(0,S.put)(G({direction:ke,noPending:!0}));case 133:e.next=137;break;case 135:return e.next=137,(0,S.put)(G({direction:ke,shopId:Ee,noPending:!0}));case 137:e.next=142;break;case 139:if(!(te.conversationIds.length<=20)){e.next=142;break}return e.next=142,(0,S.put)(G({direction:"older",shopId:Ee,noPending:!0}));case 142:e.next=146;break;case 144:return e.next=146,(0,S.put)(C({direction:ke,status:g.default.SUCCEED,hasMore:"latest"===ke,persist:O,oldestReceivedMessageId:b,latestReceivedMessageId:M,maxLatestReceivedMessageId:R,conversationIds:j,oldestTimestampNano:p,latestTimestampNano:v,maxLatestTimestampNano:h,shouldFetchByTimestamp:s,syncFetchException:Me?D+1:0}));case 146:e.next=151;break;case 148:if(F===g.default.INIT_FAILED){e.next=151;break}return e.next=151,(0,S.put)(T({status:g.default.SUCCEED}));case 151:e.next=157;break;case 153:return e.prev=153,e.t1=e.catch(28),e.next=157,(0,S.put)(T({status:U?g.default.INIT_FAILED:g.default.FAILED}));case 157:case"end":return e.stop()}}),L,this,[[28,153]])}function D(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.takeEvery)(G,F);case 2:case"end":return e.stop()}}),R,this)}var U,Y,Q=(a={},(0,s.default)(a,C,(function(e,t){var r=t.payload,a=r.conversationIds,s=r.conversationIdsMap,n=void 0===s?{}:s,o=r.oldestReceivedMessageId,d=r.latestReceivedMessageId,u=r.direction,c=void 0===u?"reset":u,l=r.status,f=r.hasMore,p=r.latestTimestamp,v=void 0===p?-1:p,h=r.oldestTimestampNano,g=r.latestTimestampNano,b=r.persist,S=r.shouldFetchByTimestamp,m=r.maxLatestReceivedMessageId,_=r.maxLatestTimestampNano,w=r.syncFetchException,I=void 0===w?0:w,x=(0,i.default)({},e,{status:l,hasMore:f,persist:b,conversationIds:a,conversationIdsMap:"reset"===c?n:(0,i.default)({},e.conversationIdsMap,n),latestTimestamp:v>e.latestTimestamp?v:e.latestTimestamp,direction:"latest"===c?c:"older",maxLatestReceivedMessageId:m,maxLatestTimestampNano:_,syncFetchException:I});switch(c){case"reset":S?(x.latestTimestampNano=g,x.oldestTimestampNano=h):(x.oldestReceivedMessageId=o,x.latestReceivedMessageId=d);break;case"latest":S?x.latestTimestampNano=g>e.latestTimestampNano?g:e.latestTimestampNano:x.latestReceivedMessageId=d;break;case"older":S?x.oldestTimestampNano=h:x.oldestReceivedMessageId=o}return x})),(0,s.default)(a,T,(function(e,t){var r=t.payload.status;return(0,i.default)({},e,{status:r})})),(0,s.default)(a,O,(function(e,t){var r=t.payload.direction;return(0,i.default)({},e,{direction:r})})),(0,s.default)(a,j,(function(e,t){var r=t.payload,a=r.latestTimestampNano,s=r.oldestTimestampNano;return(0,i.default)({},e,{latestTimestampNano:a,oldestTimestampNano:s})})),a);t.default=Q,(U="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(U.register(G,"fetchConversationsRequested","/workspace/src/reducers/conversation/subFetch.js"),U.register(C,"fetchConversationsSucceeded","/workspace/src/reducers/conversation/subFetch.js"),U.register(T,"updateFetchConversationsStatus","/workspace/src/reducers/conversation/subFetch.js"),U.register(O,"updateFetchConversationsDirection","/workspace/src/reducers/conversation/subFetch.js"),U.register(j,"updateConversationTimestamp","/workspace/src/reducers/conversation/subFetch.js"),U.register(A,"fetchConversationsByTimestamp","/workspace/src/reducers/conversation/subFetch.js"),U.register(P,"fetchConversationsByMessageId","/workspace/src/reducers/conversation/subFetch.js"),U.register(N,"getTranslationAccess","/workspace/src/reducers/conversation/subFetch.js"),U.register(q,"getTimestamp","/workspace/src/reducers/conversation/subFetch.js"),U.register(F,"fetchConversationsRequestedSaga","/workspace/src/reducers/conversation/subFetch.js"),U.register(D,"watchSubFetch","/workspace/src/reducers/conversation/subFetch.js"),U.register(Q,"default","/workspace/src/reducers/conversation/subFetch.js")),(Y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&Y(e)}).call(this,r("YuTi")(e))},"9vGo":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.pinConversationRequested=void 0;var a=i(r("14Xm")),s=i(r("gDS+"));t.pinConversationRequestedSaga=g,t.watchPin=b;var n,o=r("6SzI"),d=r("5rFJ"),u=i(r("jtha")),c=r("ZGUL");function i(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var l,f,p=a.default.mark(g),v=a.default.mark(b),h=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,o.createActions)({PIN_CONVERSATION_REQUESTED:function(e){return{conversationId:e.conversationId,shopId:e.shopId,isPinned:e.isPinned}}}).pinConversationRequested);function g(e){var t,r=e.payload,n=r.conversationId,o=r.shopId,i=r.isPinned;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"PUT",parent:"conversations",parentId:n,resource:i?"unpin":"pin",version:"v1.2"},o&&(t.payload=(0,s.default)({shop_id:o})),e.next=5,(0,d.call)(u.default,t);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,(0,d.put)((0,c.showOperationFailureToastRequested)({error:e.t0}));case 11:case"end":return e.stop()}}),p,this,[[0,7]])}function b(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeEvery)(h,g);case 2:case"end":return e.stop()}}),v,this)}t.pinConversationRequested=h,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(h,"pinConversationRequested","/workspace/src/reducers/conversation/pin.js"),l.register(g,"pinConversationRequestedSaga","/workspace/src/reducers/conversation/pin.js"),l.register(b,"watchPin","/workspace/src/reducers/conversation/pin.js")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}).call(this,r("YuTi")(e))},DIHY:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.replyOfferRequested=void 0;var a=l(r("14Xm")),s=l(r("gDS+"));t.watchReply=S;var n,o=r("6SzI"),d=r("5rFJ"),u=l(r("jtha")),c=r("WNYn"),i=r("ZGUL");function l(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var f,p,v=a.default.mark(b),h=a.default.mark(S),g=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,o.createActions)({REPLY_OFFER_REQUESTED:function(e){return{offerId:e.offerId,shopId:e.shopId,isAccept:e.isAccept,messageId:e.messageId}}}).replyOfferRequested);function b(e){var t,r,n=e.payload,o=n.offerId,l=n.shopId,f=n.isAccept,p=n.messageId;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.select)(c.currentConversationSelector);case 3:if(t=e.sent,"closed"===t.status){e.next=10;break}return r={status:f?"accepted":"rejected",shop_id:l},p&&(r.message_id=p),e.next=10,(0,d.call)(u.default,{method:"PUT",resource:"offers",id:o,suffix:"reply",payload:(0,s.default)(r)});case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,(0,d.put)((0,i.showOperationFailureToastRequested)({error:e.t0}));case 16:case"end":return e.stop()}}),v,this,[[0,12]])}function S(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeEvery)(g,b);case 2:case"end":return e.stop()}}),h,this)}t.replyOfferRequested=g,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(g,"replyOfferRequested","/workspace/src/reducers/offer/reply.js"),f.register(b,"replyOfferRequestedSaga","/workspace/src/reducers/offer/reply.js"),f.register(S,"watchReply","/workspace/src/reducers/offer/reply.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,r("YuTi")(e))},FsNy:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.closeModal=t.showModal=void 0;var a,s,n=u(r("YEIV")),o=u(r("QbLZ")),d=r("6SzI");function u(e){return e&&e.__esModule?e:{default:e}}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c=(0,d.createActions)({SHOW_MODAL:function(e){var t=e.type,r=e.title,a=void 0===r?"":r,s=e.content,n=e.actions,o=void 0===n?{}:n,d=e.additions;return{type:t,title:a,content:s,actions:o,additions:void 0===d?{}:d}},CLOSE_MODAL:function(){return{}}}),i=c.showModal,l=c.closeModal;t.showModal=i,t.closeModal=l;var f,p,v=(0,d.handleActions)((a={},(0,n.default)(a,i,(function(e,t){var r=t.payload,a=r.type,s=r.title;return{show:!0,type:a,content:r.content,title:s,actions:r.actions,additions:r.additions}})),(0,n.default)(a,l,(function(e){return(0,o.default)({},e,{show:!1})})),a),{show:!1,type:"",title:"",content:"",actions:{}});t.default=v,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(i,"showModal","/workspace/src/reducers/modal/index.js"),f.register(l,"closeModal","/workspace/src/reducers/modal/index.js"),f.register(v,"default","/workspace/src/reducers/modal/index.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,r("YuTi")(e))},I45U:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateTotalUnreadCount=t.resetTotalUnreadCountSucceeded=t.resetTotalUnreadCountRequested=void 0;var a,s=l(r("YEIV")),n=l(r("QbLZ")),o=l(r("14Xm"));t.resetTotalUnreadCountRequestedSaga=S,t.watchCount=m;var d,u=r("6SzI"),c=r("5rFJ"),i=l(r("jtha"));function l(e){return e&&e.__esModule?e:{default:e}}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&d(e);var f=o.default.mark(S),p=o.default.mark(m),v=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,u.createActions)({RESET_TOTAL_UNREAD_COUNT_REQUESTED:function(){return{}},RESET_TOTAL_UNREAD_COUNT_SUCCEEDED:function(e){return{count:e.count}},UPDATE_TOTAL_UNREAD_COUNT:function(e){return{action:e.action,count:e.count}}})),h=v.resetTotalUnreadCountRequested,g=v.resetTotalUnreadCountSucceeded,b=v.updateTotalUnreadCount;function S(){var e,t;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,c.call)(i.default,{parent:"messages",resource:"unread-count"});case 2:return e=r.sent,t=e.total_unread_count,r.next=6,(0,c.put)(g({count:t}));case 6:case"end":return r.stop()}}),f,this)}function m(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.takeLatest)(h,S);case 2:case"end":return e.stop()}}),p,this)}t.resetTotalUnreadCountRequested=h,t.resetTotalUnreadCountSucceeded=g,t.updateTotalUnreadCount=b;var _,w,I=(a={},(0,s.default)(a,g,(function(e,t){var r=t.payload.count;return(0,n.default)({},e,{totalUnreadCount:r})})),(0,s.default)(a,b,(function(e,t){var r=t.payload,a=r.action,s=r.count,o=e.totalUnreadCount;return o="increase"===a?o+s:o-s,(0,n.default)({},e,{totalUnreadCount:o})})),a);t.default=I,(_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(_.register(h,"resetTotalUnreadCountRequested","/workspace/src/reducers/conversation/count.js"),_.register(g,"resetTotalUnreadCountSucceeded","/workspace/src/reducers/conversation/count.js"),_.register(b,"updateTotalUnreadCount","/workspace/src/reducers/conversation/count.js"),_.register(S,"resetTotalUnreadCountRequestedSaga","/workspace/src/reducers/conversation/count.js"),_.register(m,"watchCount","/workspace/src/reducers/conversation/count.js"),_.register(I,"default","/workspace/src/reducers/conversation/count.js")),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&w(e)}).call(this,r("YuTi")(e))},N6RE:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.watchOrderSagas=void 0;var a,s=u(r("QbLZ")),n=r("6SzI"),o=r("R/fK"),d=u(o);function u(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c,i,l=t.watchOrderSagas=[o.watchFetch],f=(0,n.handleActions)((0,s.default)({},d.default),{status:"succeed",fetchMyOrdersStatus:"succeed",fetchHisOrdersStatus:"succeed",fetchResult:{}});t.default=f,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(l,"watchOrderSagas","/workspace/src/reducers/order/index.js"),c.register(f,"default","/workspace/src/reducers/order/index.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},OzYK:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateSearchParams=t.searchConversationsSucceeded=t.searchConversationsRequested=void 0;var a,s=f(r("YEIV")),n=f(r("14Xm")),o=f(r("QbLZ"));t.searchConversationsRequestedSaga=m,t.watchSearch=_;var d,u=r("6SzI"),c=r("5rFJ"),i=r("WNYn"),l=f(r("b/qR"));function f(e){return e&&e.__esModule?e:{default:e}}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&d(e);var p=n.default.mark(m),v=n.default.mark(_),h=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,u.createActions)({SEARCH_CONVERSATIONS_REQUESTED:function(e){var t=e.keyword,r=void 0===t?"":t,a=e.shopId;return{keyword:r,shopId:void 0===a?"":a}},SEARCH_CONVERSATIONS_SUCCEEDED:function(e){return{results:e.results,searchStatus:e.searchStatus}},UPDATE_SEARCH_PARAMS:function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchStatus:e.searchStatus}}})),g=h.searchConversationsRequested,b=h.searchConversationsSucceeded,S=h.updateSearchParams;function m(e){var t,r,a,s,d,u=e.payload.keyword;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r=u.trim(),e.next=4,(0,c.put)(S({keyword:r,searchStatus:l.default.INIT_PENDING}));case 4:if(!r){e.next=14;break}return a=r.toLocaleLowerCase(),e.next=8,(0,c.select)((function(e){return e.entityReducer}));case 8:return s=e.sent,d=s.shops,e.next=12,(0,c.select)(i.conversationsSelector);case 12:e.sent.forEach((function(e){(e.to_name||"").toLocaleLowerCase().includes(a)&&!e.faking&&t.push((0,o.default)({},e,{shop_name:(d[e.shop_id]||{}).name}))}));case 14:return e.next=16,(0,c.put)(b({results:t,searchStatus:l.default.SUCCEED}));case 16:case"end":return e.stop()}}),p,this)}function _(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.takeLatest)(g,m);case 2:case"end":return e.stop()}}),v,this)}t.searchConversationsRequested=g,t.searchConversationsSucceeded=b,t.updateSearchParams=S;var w,I,x=(a={},(0,s.default)(a,b,(function(e,t){var r=t.payload,a=r.results,s=r.searchStatus;return(0,o.default)({},e,{results:a,searchStatus:s})})),(0,s.default)(a,S,(function(e,t){var r=t.payload,a=r.keyword,s=r.searchStatus;return(0,o.default)({},e,{keyword:a,searchStatus:s})})),a);t.default=x,(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(g,"searchConversationsRequested","/workspace/src/reducers/conversation/search.js"),w.register(b,"searchConversationsSucceeded","/workspace/src/reducers/conversation/search.js"),w.register(S,"updateSearchParams","/workspace/src/reducers/conversation/search.js"),w.register(m,"searchConversationsRequestedSaga","/workspace/src/reducers/conversation/search.js"),w.register(_,"watchSearch","/workspace/src/reducers/conversation/search.js"),w.register(x,"default","/workspace/src/reducers/conversation/search.js")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)}).call(this,r("YuTi")(e))},Q8fy:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.resetMessagesFetchOffset=t.updateFetchMessagesRequestedStatus=t.fetchMessagesSucceeded=t.fetchMessagesRequested=void 0;var a,s=x(r("YEIV")),n=x(r("14Xm")),o=x(r("QbLZ")),d=x(r("4d7F"));t.watchFetch=j;var u,c=r("6SzI"),i=r("5rFJ"),l=r("8TFP"),f=r("0VV5"),p=r("r2BC"),v=r("KmjB"),h=x(r("rN3q")),g=x(r("jtha")),b=x(r("b/qR")),S=r("763i"),m=r("WNYn"),_=r("eYUK"),w=x(r("kiXb")),I=r("3atR");function x(e){return e&&e.__esModule?e:{default:e}}(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&u(e);var k=n.default.mark(T),E=n.default.mark(O),y=n.default.mark(j),M=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,c.createActions)({FETCH_MESSAGES_REQUESTED:function(e){return{conversation:e.conversation,reset:e.reset}},FETCH_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,messageIds:e.messageIds,limit:e.limit,persist:e.persist,status:e.status,messageRequestIds:e.messageRequestIds}},UPDATE_FETCH_MESSAGES_REQUESTED_STATUS:function(e){return{status:e.status}},RESET_MESSAGES_FETCH_OFFSET:function(e){return{conversationId:e.conversationId,offset:e.offset}}})),L=M.fetchMessagesRequested,R=M.fetchMessagesSucceeded,H=M.updateFetchMessagesRequestedStatus,G=M.resetMessagesFetchOffset;t.fetchMessagesRequested=L,t.fetchMessagesSucceeded=R,t.updateFetchMessagesRequestedStatus=H,t.resetMessagesFetchOffset=G;var C=function(e){var t=e.conversationId,r=e.shopId,a=e.offset,s=e.limit,n=void 0===s?20:s;return new d.default((function(e,s){(0,g.default)({parent:"conversations",parentId:t,resource:"messages",params:{shop_id:r,offset:a,limit:n}}).then((function(t){var r=t.messages,a=(void 0===r?[]:r).map((function(e){var t=e.type,r=e.status;return"text"===t&&"censored_blacklist"===r?(0,o.default)({},e,{errorCode:43,send_status:2,content:{text:w.default.t("common.blacklist.replaced_text")}}):e}));e({messages:a,limit:n})})).catch((function(e){s(e)}))}))};function T(e,t){var r,a,s,o,d,u;return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.select)((0,m.getConversation)(e));case 2:if(r=n.sent,s=(a=r||{}).latestMessageStatus,o=a.latestMessage,d=void 0===o?{}:o,!s){n.next=9;break}if(u=t.map((function(e){return e.request_id})),!d.id||!u.includes(d.id)){n.next=9;break}return n.next=9,(0,i.put)((0,S.updateRecord)({name:"conversations",id:e,record:{latestMessage:{},latestMessageStatus:""}}));case 9:case"end":return n.stop()}}),k,this)}function O(e){var t,r,a,s,o,d,u,c,v,g,S,m,w,x,k=e.payload,y=k.conversation,M=k.reset;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.select)((function(e){return e.conversationReducer}));case 3:return t=e.sent,r=t.persist,e.next=7,(0,i.select)(l.currentUserShopIdSelector);case 7:return a=e.sent,e.next=10,(0,i.select)(l.isSubAccountSelector);case 10:if(s=e.sent,o=y.id,d=y.shop_id,u=void 0,!M){e.next=17;break}u=0,e.next=23;break;case 17:return e.next=19,(0,i.select)((function(e){return e.messageReducer}));case 19:c=e.sent,v=c.messageIdsHash,g=v[o]||{},u=g.offset||0;case 23:return e.next=25,(0,i.put)(H({status:M?b.default.INIT_PENDING:b.default.PENDING}));case 25:return e.next=27,(0,i.call)(C,{conversationId:o,shopId:d,offset:u});case 27:if(S=e.sent,m=S.messages,w=S.limit,e.t0=M,!e.t0){e.next=34;break}return e.next=34,(0,i.fork)(T,o,m);case 34:return m.sort((function(e,t){return t.id-e.id})),m.forEach((function(e){return e.send_status=I.MSG_STATUS.SUCCEED})),e.next=38,(0,i.call)(p.populateMessageWithSourceAndContent,m,a,s);case 38:return e.next=40,(0,i.select)(f.messagesWithSourceSelector);case 40:return x=e.sent,e.next=43,(0,i.call)(_.updateOrReplaceAction,x,m,"messages");case 43:return e.next=45,(0,i.put)(R({limit:w,conversationId:o,status:b.default.SUCCEED,persist:r,messageIds:(0,h.default)("messages",m).result,messageRequestIds:m.map((function(e){return e.request_id}))}));case 45:e.next=51;break;case 47:return e.prev=47,e.t1=e.catch(0),e.next=51,(0,i.put)(H({status:M?b.default.INIT_FAILED:b.default.FAILED}));case 51:case"end":return e.stop()}}),E,this,[[0,47]])}function j(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.takeLatest)(L,O);case 2:case"end":return e.stop()}}),y,this)}var A,P,N=(a={},(0,s.default)(a,R,(function(e,t){var r=t.payload,a=r.limit,n=r.status,d=r.conversationId,u=r.messageIds,c=r.persist,i=r.messageRequestIds,l=e.messageIdsHash,f=l[d]||{},p=f.all||[],h=f.failed||[],g=f.offset,b=u[u.length-1],S=u.length>=a;return(0,o.default)({},e,{status:n,messageIdsHash:(0,o.default)({},l,(0,s.default)({},d,(0,o.default)({},f,{hasNext:S,offset:g?b<g?b:g:b,all:(0,v.handleIds)(p.filter((function(e){return!i.includes(e)})),u),failed:h.filter((function(e){return!i.includes(e)}))}))),persist:c})})),(0,s.default)(a,H,(function(e,t){var r=t.payload.status;return(0,o.default)({},e,{status:r})})),(0,s.default)(a,G,(function(e,t){var r=t.payload,a=r.conversationId,n=r.offset,d=e.messageIdsHash,u=d[a];return(0,o.default)({},e,{messageIdsHash:(0,o.default)({},d,(0,s.default)({},a,(0,o.default)({},u,{offset:n})))})})),a);t.default=N,(A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(A.register(L,"fetchMessagesRequested","/workspace/src/reducers/message/fetch.js"),A.register(R,"fetchMessagesSucceeded","/workspace/src/reducers/message/fetch.js"),A.register(H,"updateFetchMessagesRequestedStatus","/workspace/src/reducers/message/fetch.js"),A.register(G,"resetMessagesFetchOffset","/workspace/src/reducers/message/fetch.js"),A.register(C,"fetchConversationMessages","/workspace/src/reducers/message/fetch.js"),A.register(T,"changeConversationMessageStatus","/workspace/src/reducers/message/fetch.js"),A.register(O,"fetchMessagesRequestedSaga","/workspace/src/reducers/message/fetch.js"),A.register(j,"watchFetch","/workspace/src/reducers/message/fetch.js"),A.register(N,"default","/workspace/src/reducers/message/fetch.js")),(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&P(e)}).call(this,r("YuTi")(e))},"R/fK":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateFetchOrdersStatus=t.fetchOrdersSucceed=t.fetchOrdersRequested=t.fetchAllOrdersRequested=void 0;var a,s=S(r("YEIV")),n=S(r("QbLZ")),o=S(r("jWXv")),d=S(r("m1cH")),u=S(r("14Xm"));t.fetchAllOrders=M,t.fetchOrders=L,t.watchFetch=R;var c,i=r("6SzI"),l=r("5rFJ"),f=r("tpro"),p=S(r("rN3q")),v=S(r("jtha")),h=S(r("b/qR")),g=r("UP2C"),b=r("cOd3");function S(e){return e&&e.__esModule?e:{default:e}}(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&c(e);var m=u.default.mark(M),_=u.default.mark(L),w=u.default.mark(R),I=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,i.createActions)({FETCH_ALL_ORDERS_REQUESTED:function(e){return{shopId:e.shopId,buyerShopId:e.buyerShopId,userId:e.userId}},FETCH_ORDERS_REQUESTED:function(e){var t=e.from;return{from:void 0===t?g.ListTabs.MINE:t,shopId:e.shopId,userId:e.userId,reset:e.reset,isFromAll:e.isFromAll}},FETCH_ORDERS_SUCCEED:function(e){var t=e.shopId,r=e.userId,a=e.pagination;return{shopId:t,userId:r,result:e.result,pagination:a}},UPDATE_FETCH_ORDERS_STATUS:function(e){return{type:e.type,status:e.status}}})),x=I.fetchAllOrdersRequested,k=I.fetchOrdersRequested,E=I.fetchOrdersSucceed,y=I.updateFetchOrdersStatus;function M(e){var t=e.payload,r=t.shopId,a=t.buyerShopId,s=t.userId;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.put)(y({status:h.default.INIT_PENDING}));case 2:return e.prev=2,e.next=5,(0,l.all)([(0,l.call)(L,{payload:{shopId:r,userId:s,reset:!0,isFromAll:!0}}),(0,l.call)(L,{payload:{from:g.ListTabs.HIS,shopId:a,userId:s,reset:!0,isFromAll:!0}})]);case 5:return e.next=7,(0,l.put)(y({status:h.default.SUCCEED}));case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),e.next=13,(0,l.put)(y({status:h.default.INIT_FAILED}));case 13:case"end":return e.stop()}}),m,this,[[2,9]])}function L(e){var t,r,a,s,n,c,i,S,m,w,I,x,k,M,L,R,H,G,C,T,O,j,A=e.payload,P=A.from,N=A.shopId,q=A.userId,F=A.reset,D=A.isFromAll,U=void 0!==D&&D;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=[],r={},F){e.next=9;break}return e.next=6,(0,l.select)((0,b.currentOrderFetchResultSelector)(N,q));case 6:a=e.sent,t=a.result,r=a.pagination;case 9:if(n=(s=r).currentPage,c=void 0===n?0:n,i=s.perPage,S=void 0===i?10:i,m=s.hasMore,!(void 0===m||m)){e.next=44;break}if(w=h.default.PENDING,!F){e.next=16;break}return e.next=15,(0,l.put)(E({shopId:N,userId:q,result:t,pagination:r}));case 15:w=h.default.INIT_PENDING;case 16:return e.next=18,(0,l.put)(y({type:P,status:w}));case 18:return x={ssl:!0,suffix:"orders_by_buyer_id",resource:"orders",params:{shop_id:N,buyer_id:q,per_page:S,page:I=F?1:c+1}},P===g.ListTabs.HIS&&(delete x.params.buyer_id,x.suffix="purchased"),e.next=23,(0,l.call)(v.default,x);case 23:if(k=e.sent,M=k.total,L=k.orders,H=null,G=null,!(C=(R=void 0===L?[]:L).length)){e.next=38;break}return T=(0,p.default)("orders",R),O=T.entities,j=T.result,e.next=34,(0,l.put)((0,f.updateEntities)({entities:O}));case 34:H={currentPage:I,perPage:S,total:M,hasMore:C>=S},G=F?j:[].concat((0,d.default)(new o.default(t.concat(j)))),e.next=40;break;case 38:H={currentPage:I,perPage:S,total:M,hasMore:!1},G=t;case 40:return e.next=42,(0,l.put)(E({shopId:N,userId:q,result:G,pagination:H}));case 42:return e.next=44,(0,l.put)(y({type:P,status:h.default.SUCCEED}));case 44:e.next=52;break;case 46:return e.prev=46,e.t0=e.catch(0),e.next=50,(0,l.put)(y({type:P,status:F?h.default.INIT_FAILED:h.default.FAILED}));case 50:if(!U){e.next=52;break}throw e.t0;case 52:case"end":return e.stop()}}),_,this,[[0,46]])}function R(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.takeEvery)(x,M);case 2:return e.next=4,(0,l.takeEvery)(k,L);case 4:case"end":return e.stop()}}),w,this)}t.fetchAllOrdersRequested=x,t.fetchOrdersRequested=k,t.fetchOrdersSucceed=E,t.updateFetchOrdersStatus=y;var H,G,C=(a={},(0,s.default)(a,E,(function(e,t){var r=t.payload,a=r.shopId,o=r.userId,d=r.pagination,u=r.result,c=a+"_"+o;return(0,n.default)({},e,{fetchResult:(0,n.default)({},e.fetchResult,(0,s.default)({},c,{pagination:d,result:u}))})})),(0,s.default)(a,y,(function(e,t){var r=t.payload,a=r.type,s=r.status;switch(a){case g.ListTabs.MINE:e.fetchMyOrdersStatus=s;break;case g.ListTabs.HIS:e.fetchHisOrdersStatus=s;break;default:e.status=s}return(0,n.default)({},e)})),a);t.default=C,(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(x,"fetchAllOrdersRequested","/workspace/src/reducers/order/fetch.js"),H.register(k,"fetchOrdersRequested","/workspace/src/reducers/order/fetch.js"),H.register(E,"fetchOrdersSucceed","/workspace/src/reducers/order/fetch.js"),H.register(y,"updateFetchOrdersStatus","/workspace/src/reducers/order/fetch.js"),H.register(M,"fetchAllOrders","/workspace/src/reducers/order/fetch.js"),H.register(L,"fetchOrders","/workspace/src/reducers/order/fetch.js"),H.register(R,"watchFetch","/workspace/src/reducers/order/fetch.js"),H.register(C,"default","/workspace/src/reducers/order/fetch.js")),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&G(e)}).call(this,r("YuTi")(e))},SrNb:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.watchMessageShortcutSagas=void 0;var a,s=u(r("QbLZ")),n=r("6SzI"),o=r("dlOA"),d=u(o);function u(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c,i,l=t.watchMessageShortcutSagas=[o.watchFetch],f=(0,n.handleActions)((0,s.default)({},d.default),{messageShortcutIds:[],status:""});t.default=f,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(l,"watchMessageShortcutSagas","/workspace/src/reducers/messageShortcut/index.js"),c.register(f,"default","/workspace/src/reducers/messageShortcut/index.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},UfXg:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=h(r("14Xm")),s=h(r("m1cH"));t.saveToStore=m;var n,o=h(r("rN3q")),d=r("5rFJ"),u=r("lInC"),c=r("z+6U"),i=r("cokx"),l=r("tpro"),f=r("eYUK"),p=r("3hjT"),v=r("WNYn");function h(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var g,b,S=a.default.mark(m);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function m(e,t,r,n,h){var g,b,m,_,w,I,x,k,E,y,M,L,R,H,G;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return g=(0,o.default)("conversations",e),b=g.result,m=g.entities,a.next=3,(0,d.select)(v.currentConversationSelector);case 3:return _=a.sent,a.next=6,(0,d.select)((function(e){return e.entityReducer}));case 6:return w=a.sent,I=w.conversations,x=void 0===I?{}:I,k=[],_&&_.faking?(E=_.id,k=(0,c.getConversationIds)(t,b,n,E)):k=(0,c.getConversationIds)(t,b,n),y=k.length<i.persistLimit?null:[].concat((0,s.default)(k)).splice(0,i.persistLimit),a.next=14,(0,d.put)((0,l.updateEntities)({entities:{persist:y}}));case 14:return a.next=16,(0,d.call)(f.updateOrReplaceAction,x,e,"conversations");case 16:if(!h){a.next=20;break}return M=(0,o.default)("shops",h),a.next=20,(0,d.put)((0,l.updateEntities)({entities:M.entities}));case 20:return a.next=22,(0,d.put)((0,p.updateConversationListsHash)());case 22:if(!(L=(0,u.generatePersist)(y,r,t))||!L.changed){a.next=35;break}if(R=void 0,H=L.lastConversationId,"older"!==n&&"reset"!==n){a.next=30;break}R=m.conversations[H],a.next=34;break;case 30:return a.next=32,(0,d.select)(v.conversationsSelector);case 32:G=a.sent,R=G.find((function(e){return e.id===H}));case 34:R&&(h?L.oldestReceivedMessageId=R.latest_message_id:L.oldestTimestamp=new Date(R.last_message_time).getTime()/1e3);case 35:return a.abrupt("return",{persistObj:L,resultConversationIds:k});case 36:case"end":return a.stop()}}),S,this)}(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&g.register(m,"saveToStore","/workspace/src/reducers/conversation/handle.js"),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)}).call(this,r("YuTi")(e))},WnRE:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAllProductsRequested=t.updateSelectedProductTab=t.updateOtherShopSearchKeyword=t.updateMyShopSearchKeyword=t.updateAllShopProductsRequestedStatus=t.updateOtherShopProductsRequestedStatus=t.updateMyShopProductsRequestedStatus=t.fetchProductsSucceed=t.fetchMyShopProducts=t.fetchProductsRequested=void 0;var a,s=b(r("YEIV")),n=b(r("QbLZ")),o=b(r("14Xm"));t.fetchAllShopProducts=T,t.fetchProducts=O,t.watchFetch=j;var d,u=r("6SzI"),c=r("5rFJ"),i=b(r("jtha")),l=b(r("rN3q")),f=r("hZed"),p=r("tpro"),v=r("WNYn"),h=r("nbEg"),g=b(r("b/qR"));function b(e){return e&&e.__esModule?e:{default:e}}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&d(e);var S=o.default.mark(T),m=o.default.mark(O),_=o.default.mark(j),w=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,10),I=(0,u.createActions)({FETCH_PRODUCTS_REQUESTED:function(e){var t=e.shopId,r=e.keyword,a=void 0===r?"":r,s=e.reset;return{shopId:t,keyword:a,reset:void 0!==s&&s}},FETCH_PRODUCTS_SUCCEED:function(e){return{shopId:e.shopId,pagination:e.pagination,result:e.result}},UPDATE_MY_SHOP_PRODUCTS_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_OTHER_SHOP_PRODUCTS_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_ALL_SHOP_PRODUCTS_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_MY_SHOP_SEARCH_KEYWORD:function(e){return{keyword:e.keyword}},UPDATE_OTHER_SHOP_SEARCH_KEYWORD:function(e){return{keyword:e.keyword}},UPDATE_SELECTED_PRODUCT_TAB:function(e){return{selectedTab:e}},FETCH_ALL_PRODUCTS_REQUESTED:function(e){return{myShopId:e.myShopId,otherShopId:e.otherShopId}}}),x=I.fetchProductsRequested,k=I.fetchMyShopProducts,E=I.fetchProductsSucceed,y=I.updateMyShopProductsRequestedStatus,M=I.updateOtherShopProductsRequestedStatus,L=I.updateAllShopProductsRequestedStatus,R=I.updateMyShopSearchKeyword,H=I.updateOtherShopSearchKeyword,G=I.updateSelectedProductTab,C=I.fetchAllProductsRequested;function T(e){var t=e.payload,r=t.myShopId,a=t.otherShopId;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.put)(L({status:g.default.INIT_PENDING}));case 2:return e.prev=2,e.next=5,(0,c.all)([O({payload:{shopId:r,keyword:"",reset:!0,isFromAll:!0}}),O({payload:{shopId:a,keyword:"",reset:!0,isFromAll:!0}})]);case 5:return e.next=7,(0,c.put)(L({status:g.default.SUCCEED}));case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),e.next=13,(0,c.put)(L({status:g.default.INIT_FAILED}));case 13:case"end":return e.stop()}}),S,this,[[2,9]])}function O(e){var t,r,a,s,n,d,u,b,S,_,I,x,k,L,G,C,T,O,j,A,P,N,q=e.payload,F=q.shopId,D=q.keyword,U=q.reset,Y=q.isFromAll,Q=void 0!==Y&&Y;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.select)(v.currentShopIdSelector);case 2:if(t=e.sent,r=t===F,e.prev=4,a={},s=[],U){e.next=15;break}return e.next=10,(0,c.select)((0,h.currentFetchResultSelector)(F));case 10:n=e.sent,a=n.pagination,s=n.result,e.next=22;break;case 15:if(!r){e.next=20;break}return e.next=18,(0,c.put)(R({keyword:D}));case 18:e.next=22;break;case 20:return e.next=22,(0,c.put)(H({keyword:D}));case 22:if(u=(d=a).currentPage,b=void 0===u?0:u,S=d.perPage,_=void 0===S?w:S,I=d.hasMore,!(void 0===I||I)){e.next=60;break}if(k={shop_id:F,keyword:D,per_page:_,page:x=U?1:b+1},!r){e.next=31;break}return e.next=29,(0,c.put)(y({status:U?g.default.INIT_PENDING:g.default.PENDING}));case 29:e.next=33;break;case 31:return e.next=33,(0,c.put)(M({status:U?g.default.INIT_PENDING:g.default.PENDING}));case 33:return e.next=35,(0,c.call)(i.default,{ssl:!0,resource:"items",params:k,cleaner:f.productCleaner});case 35:if(L=e.sent,G=L.total,C=L.items,O=null,j=null,!(T=void 0===C?[]:C).length){e.next=49;break}return A=(0,l.default)("products",T),P=A.entities,N=A.result,e.next=45,(0,c.put)((0,p.updateEntities)({entities:P}));case 45:O={currentPage:x,perPage:_,total:G,hasMore:T.length>=_},j=U?N:s.concat(N),e.next=51;break;case 49:O={currentPage:x,perPage:_,total:G,hasMore:!1},j=s;case 51:return e.next=53,(0,c.put)(E({shopId:F,pagination:O,result:j}));case 53:if(!r){e.next=58;break}return e.next=56,(0,c.put)(y({status:g.default.SUCCEED}));case 56:e.next=60;break;case 58:return e.next=60,(0,c.put)(M({status:g.default.SUCCEED}));case 60:e.next=76;break;case 62:if(e.prev=62,e.t0=e.catch(4),!U){e.next=67;break}return e.next=67,(0,c.put)(E({shopId:F,pagination:{currentPage:0,perPage:w,hasMore:!0},result:[]}));case 67:if(!r){e.next=72;break}return e.next=70,(0,c.put)(y({status:U?g.default.INIT_FAILED:g.default.FAILED}));case 70:e.next=74;break;case 72:return e.next=74,(0,c.put)(M({status:U?g.default.INIT_FAILED:g.default.FAILED}));case 74:if(!Q){e.next=76;break}throw e.t0;case 76:case"end":return e.stop()}}),m,this,[[4,62]])}function j(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.takeEvery)(x,O);case 2:return e.next=4,(0,c.takeEvery)(C,T);case 4:case"end":return e.stop()}}),_,this)}t.fetchProductsRequested=x,t.fetchMyShopProducts=k,t.fetchProductsSucceed=E,t.updateMyShopProductsRequestedStatus=y,t.updateOtherShopProductsRequestedStatus=M,t.updateAllShopProductsRequestedStatus=L,t.updateMyShopSearchKeyword=R,t.updateOtherShopSearchKeyword=H,t.updateSelectedProductTab=G,t.fetchAllProductsRequested=C;var A,P,N=(a={},(0,s.default)(a,E,(function(e,t){var r=t.payload,a=r.shopId,o=r.pagination,d=r.result;return(0,n.default)({},e,{fetchResult:(0,n.default)({},e.fetchResult,(0,s.default)({},a,{pagination:o,result:d}))})})),(0,s.default)(a,y,(function(e,t){var r=t.payload.status;return(0,n.default)({},e,{myShopSearchStatus:r})})),(0,s.default)(a,M,(function(e,t){var r=t.payload.status;return(0,n.default)({},e,{otherShopSearchStatus:r})})),(0,s.default)(a,L,(function(e,t){var r=t.payload.status;return(0,n.default)({},e,{allShopSearchStatus:r})})),(0,s.default)(a,R,(function(e,t){var r=t.payload.keyword;return(0,n.default)({},e,{myShopSearchKeyword:r})})),(0,s.default)(a,H,(function(e,t){var r=t.payload.keyword;return(0,n.default)({},e,{otherShopSearchKeyword:r})})),(0,s.default)(a,G,(function(e,t){var r=t.payload.selectedTab;return(0,n.default)({},e,{selectedProductTab:r})})),a);t.default=N,(A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(A.register(w,"PAGE_SIZE","/workspace/src/reducers/product/fetch.js"),A.register(x,"fetchProductsRequested","/workspace/src/reducers/product/fetch.js"),A.register(k,"fetchMyShopProducts","/workspace/src/reducers/product/fetch.js"),A.register(E,"fetchProductsSucceed","/workspace/src/reducers/product/fetch.js"),A.register(y,"updateMyShopProductsRequestedStatus","/workspace/src/reducers/product/fetch.js"),A.register(M,"updateOtherShopProductsRequestedStatus","/workspace/src/reducers/product/fetch.js"),A.register(L,"updateAllShopProductsRequestedStatus","/workspace/src/reducers/product/fetch.js"),A.register(R,"updateMyShopSearchKeyword","/workspace/src/reducers/product/fetch.js"),A.register(H,"updateOtherShopSearchKeyword","/workspace/src/reducers/product/fetch.js"),A.register(G,"updateSelectedProductTab","/workspace/src/reducers/product/fetch.js"),A.register(C,"fetchAllProductsRequested","/workspace/src/reducers/product/fetch.js"),A.register(T,"fetchAllShopProducts","/workspace/src/reducers/product/fetch.js"),A.register(O,"fetchProducts","/workspace/src/reducers/product/fetch.js"),A.register(j,"watchFetch","/workspace/src/reducers/product/fetch.js"),A.register(N,"default","/workspace/src/reducers/product/fetch.js")),(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&P(e)}).call(this,r("YuTi")(e))},XRLa:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=u(r("14Xm")),s=u(r("gDS+"));t.showCartReminder=f;var n,o=u(r("jtha")),d=r("5rFJ");function u(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var c,i,l=a.default.mark(f);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function f(e){var t,r,n,u,c=e.id,i=e.cartItems;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="get",r=i.slice(0,4),e.next=5,(0,d.call)(o.default,{ssl:!0,parent:"product",resource:t,method:"POST",payload:(0,s.default)({items:r})});case 5:return n=e.sent,u=n[t],e.abrupt("return",{id:c,result:u});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{id:c,fetchStatus:"failed"});case 13:case"end":return e.stop()}}),l,this,[[0,10]])}(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&c.register(f,"showCartReminder","/workspace/src/reducers/cartReminder/show.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},ZiTx:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.getPendingOffersCountSucceed=t.getPendingOffersCountRequested=t.updateFetchOffersRequestedStatus=t.fetchOffersSucceed=t.fetchOffersRequested=void 0;var a,s=S(r("YEIV")),n=S(r("14Xm")),o=S(r("jWXv")),d=S(r("rfXi")),u=S(r("QbLZ"));t.fetchOffers=L,t.getPendingOffersCount=R,t.watchFetch=H;var c,i=r("6SzI"),l=r("5rFJ"),f=r("tpro"),p=r("vRVn"),v=r("kXhk"),h=S(r("rN3q")),g=S(r("jtha")),b=S(r("b/qR"));function S(e){return e&&e.__esModule?e:{default:e}}(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&c(e);var m=n.default.mark(L),_=n.default.mark(R),w=n.default.mark(H),I=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,i.createActions)({FETCH_OFFERS_REQUESTED:function(e){return{shopId:e.shopId,buyerId:e.buyerId,reset:e.reset}},FETCH_OFFERS_SUCCEED:function(e){var t=e.shopId,r=e.buyerId,a=e.pagination,s=e.result,n=e.status;return{shopId:t,buyerId:r,pagination:a,result:s,status:void 0===n?b.default.SUCCEED:n}},UPDATE_FETCH_OFFERS_REQUESTED_STATUS:function(e){return{status:e.status}},GET_PENDING_OFFERS_COUNT_REQUESTED:function(e){return{shopId:e.shopId,buyerId:e.buyerId}},GET_PENDING_OFFERS_COUNT_SUCCEED:function(e){return{shopId:e.shopId,buyerId:e.buyerId,count:e.count}}})),x=I.fetchOffersRequested,k=I.fetchOffersSucceed,E=I.updateFetchOffersRequestedStatus,y=I.getPendingOffersCountRequested,M=I.getPendingOffersCountSucceed;function L(e){var t,r,a,s,c,i,S,_,w,I,x,y,M,L,R,H,G,C,T,O,j,A,P,N=e.payload,q=N.shopId,F=N.buyerId,D=N.reset;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t={},r=[],D){e.next=9;break}return e.next=6,(0,l.select)((0,v.currentOffersFetchResultSelector)(q,F));case 6:a=e.sent,t=a.pagination,r=a.result;case 9:if(c=(s=t).currentPage,i=void 0===c?0:c,S=s.perPage,_=void 0===S?20:S,w=s.hasMore,!(void 0===w||w)){e.next=46;break}if(!D){e.next=16;break}return e.next=14,(0,l.put)(k({shopId:q,buyerId:F,result:r,pagination:t,status:b.default.INIT_PENDING}));case 14:e.next=18;break;case 16:return e.next=18,(0,l.put)(E({status:b.default.PENDING}));case 18:return x={page:I=D?1:i+1,per_page:_,buyer_id:F,shop_id:q},e.next=22,(0,l.call)(g.default,{ssl:!0,resource:"offer",suffix:"given",params:x});case 22:if(y=e.sent,M=y.total,L=y.offers,H=null,G=null,!(C=(R=void 0===L?[]:L).length)){e.next=42;break}return R=R.map((function(e){return(0,u.default)({},e,{product:e.product_id})})),T=(0,d.default)(new o.default(R.map((function(e){return e.product_id})))),O=T.map((function(e){return(0,l.call)(p.showProduct,{payload:{productId:e,shopId:q}})})),e.next=35,(0,l.all)(O);case 35:return j=(0,h.default)("offers",R),A=j.entities,P=j.result,e.next=38,(0,l.put)((0,f.updateEntities)({entities:A}));case 38:H={currentPage:I,perPage:_,total:M,hasMore:C>=_},G=D?P:r.concat(P),e.next=44;break;case 42:H={currentPage:I,perPage:_,total:M,hasMore:!1},G=r;case 44:return e.next=46,(0,l.put)(k({shopId:q,buyerId:F,result:G,status:b.default.SUCCEED,pagination:H}));case 46:e.next=52;break;case 48:return e.prev=48,e.t0=e.catch(0),e.next=52,(0,l.put)(E({status:D?b.default.INIT_FAILED:b.default.FAILED}));case 52:case"end":return e.stop()}}),m,this,[[0,48]])}function R(e){var t,r,a=e.payload,s=a.shopId,o=a.buyerId;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.call)(g.default,{parent:"offer",resource:"count",params:{shop_id:s,buyer_id:o}});case 3:return t=e.sent,r=t.pending_count,e.next=7,(0,l.put)(M({shopId:s,buyerId:o,count:r}));case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,(0,l.put)(M({shopId:s,buyerId:o,count:0}));case 13:case"end":return e.stop()}}),_,this,[[0,9]])}function H(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.takeEvery)(x,L);case 2:return e.next=4,(0,l.takeEvery)(y,R);case 4:case"end":return e.stop()}}),w,this)}t.fetchOffersRequested=x,t.fetchOffersSucceed=k,t.updateFetchOffersRequestedStatus=E,t.getPendingOffersCountRequested=y,t.getPendingOffersCountSucceed=M;var G,C,T=(a={},(0,s.default)(a,k,(function(e,t){var r=t.payload,a=r.shopId,n=r.buyerId,o=r.pagination,d=r.result,c=r.status,i=a+"_"+n;return(0,u.default)({},e,{status:c,fetchResult:(0,u.default)({},e.fetchResult,(0,s.default)({},i,{pagination:o,result:d}))})})),(0,s.default)(a,E,(function(e,t){var r=t.payload.status;return(0,u.default)({},e,{status:r})})),(0,s.default)(a,M,(function(e,t){var r=t.payload,a=r.shopId,n=r.buyerId,o=r.count,d=a+"_"+n;return(0,u.default)({},e,{pendingOffersCount:(0,u.default)({},e.pendingOffersCount,(0,s.default)({},d,o))})})),a);t.default=T,(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(G.register(x,"fetchOffersRequested","/workspace/src/reducers/offer/fetch.js"),G.register(k,"fetchOffersSucceed","/workspace/src/reducers/offer/fetch.js"),G.register(E,"updateFetchOffersRequestedStatus","/workspace/src/reducers/offer/fetch.js"),G.register(y,"getPendingOffersCountRequested","/workspace/src/reducers/offer/fetch.js"),G.register(M,"getPendingOffersCountSucceed","/workspace/src/reducers/offer/fetch.js"),G.register(L,"fetchOffers","/workspace/src/reducers/offer/fetch.js"),G.register(R,"getPendingOffersCount","/workspace/src/reducers/offer/fetch.js"),G.register(H,"watchFetch","/workspace/src/reducers/offer/fetch.js"),G.register(T,"default","/workspace/src/reducers/offer/fetch.js")),(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&C(e)}).call(this,r("YuTi")(e))},ZoJF:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.watchOfferSagas=void 0;var a,s=c(r("QbLZ")),n=r("6SzI"),o=r("ZiTx"),d=c(o),u=r("DIHY");function c(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,l,f=t.watchOfferSagas=[o.watchFetch,u.watchReply],p=(0,n.handleActions)((0,s.default)({},d.default),{status:"",fetchResult:{},pendingOffersCount:{},pendingOfferIdsHash:{}});t.default=p,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(f,"watchOfferSagas","/workspace/src/reducers/offer/index.js"),i.register(p,"default","/workspace/src/reducers/offer/index.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,r("YuTi")(e))},"aQ+w":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.watchMessageSagas=void 0;var a,s=m(r("QbLZ")),n=r("6SzI"),o=r("Q8fy"),d=m(o),u=r("bqMa"),c=m(u),i=r("1JFN"),l=r("vqUA"),f=m(l),p=m(r("ryDM")),v=r("g28w"),h=r("0fB8"),g=r("4qdM"),b=m(g),S=r("wyum");function m(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var _,w,I=t.watchMessageSagas=[o.watchFetch,u.watchSend,i.watchResend,l.watchReceive,v.watchTranslate,h.watchPopulate,g.watchOffline,S.watchEvaluation,l.watchOldConversationMessageQueue,l.watchNewConversationMessageQueue],x=(0,n.handleActions)((0,s.default)({},d.default,c.default,f.default,p.default,b.default),{status:"",messageIdsHash:{},offlineMessages:{}});t.default=x,(_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(_.register(I,"watchMessageSagas","/workspace/src/reducers/message/index.js"),_.register(x,"default","/workspace/src/reducers/message/index.js")),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&w(e)}).call(this,r("YuTi")(e))},bqMa:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.uploadImage=t.abortAllSendingMessages=t.sendMessagesFailed=t.sendMessagesToPending=t.sendingMessages=t.sendMessagesSucceeded=t.sendMessagesRequested=void 0;var a,s=V(r("sk9p")),n=V(r("oF3Q")),o=V(r("YEIV")),d=V(r("m1cH")),u=V(r("gDS+")),c=V(r("4d7F")),i=V(r("QbLZ")),l=V(r("14Xm")),f=V(r("FyfS"));t.sendMessages=_e,t.handleSendSucceededMessages=we,t.watchSend=xe;var p,v=r("6SzI"),h=r("5rFJ"),g=r("tpro"),b=r("763i"),S=r("yDfg"),m=V(r("jtha")),_=V(r("rN3q")),w=r("KmjB"),I=r("8TFP"),x=r("0VV5"),k=r("ZGUL"),E=V(r("Q1t1")),y=V(r("Cb94")),M=V(r("P0rt")),L=V(r("vaWs")),R=V(r("MkZr")),H=V(r("b/qR")),G=V(r("kiXb")),C=r("QCYR"),T=r("WNYn"),O=r("zjIh"),j=r("eYUK"),A=r("r2BC"),P=r("3atR"),N=V(P),q=r("FsNy"),F=r("wNa6"),D=r("1JFN"),U=r("4qdM"),Y=V(r("xk4V")),Q=V(r("CmkM"));function V(e){return e&&e.__esModule?e:{default:e}}(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&p(e);var X=l.default.mark(pe),B=l.default.mark(ve),z=l.default.mark(me),W=l.default.mark(_e),Z=l.default.mark(we),J=l.default.mark(Ie),K=l.default.mark(xe),$=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,{FORBIDDEN:28,LIMITING:29,CUSTOM_ERROR:42,BLACK_LIST:43,CANCEL_ORDER:44,DEFAULT:-1}),ee=N.default.MSG_TYPE_IMAGE,te=N.default.MSG_TYPE_TEXT,re=N.default.MSG_TYPE_VOUCHER,ae=N.default.MSG_TYPE_VOUCHER_WEB,se=N.default.MSG_TYPE_WEBVIEW,ne=(0,v.createActions)({SEND_MESSAGES_REQUESTED:function(e){return{conversationId:e.conversationId,conversationUserId:e.conversationUserId,messages:e.messages,isFakingSource:e.isFakingSource}},SEND_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,requestIdToMessageId:e.requestIdToMessageId}},SENDING_MESSAGES:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},SEND_MESSAGES_TO_PENDING:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},SEND_MESSAGES_FAILED:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},ABORT_ALL_SENDING_MESSAGES:function(){return{}}}),oe=ne.sendMessagesRequested,de=ne.sendMessagesSucceeded,ue=ne.sendingMessages,ce=ne.sendMessagesToPending,ie=ne.sendMessagesFailed,le=ne.abortAllSendingMessages;t.sendMessagesRequested=oe,t.sendMessagesSucceeded=de,t.sendingMessages=ue,t.sendMessagesToPending=ce,t.sendMessagesFailed=ie,t.abortAllSendingMessages=le;var fe=t.uploadImage=function(e){var t=e.file,r="string"==typeof t?(0,O.convertBase64ToBlob)(t):t,a=new window.FormData;return a.append("file",r),(0,m.default)({method:"POST",resource:"images",payload:a})};function pe(e){var t,r,a,s,n,o,d,u,c,i;return l.default.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:l.prev=0,t=!0,r=!1,a=void 0,l.prev=4,s=(0,f.default)(e);case 6:if(t=(n=s.next()).done){l.next=18;break}if(o=n.value,d=o.type,u=o.content,d!==ee){l.next=15;break}return l.next=12,fe(u);case 12:c=l.sent,i=c.url,o.content={url:i};case 15:t=!0,l.next=6;break;case 18:l.next=24;break;case 20:l.prev=20,l.t0=l.catch(4),r=!0,a=l.t0;case 24:l.prev=24,l.prev=25,!t&&s.return&&s.return();case 27:if(l.prev=27,!r){l.next=30;break}throw a;case 30:return l.finish(27);case 31:return l.finish(24);case 32:l.next=39;break;case 34:return l.prev=34,l.t1=l.catch(0),l.next=38,(0,h.put)((0,k.showOperationFailureToastRequested)({error:l.t1}));case 38:return l.abrupt("return",!1);case 39:case"end":return l.stop()}}),X,this,[[0,34],[4,20,24,32],[25,,27,31]])}function ve(e){var t,r,a,s,n,o,d,u,c,f,p,v,m,w,k=e.payload,E=k.conversationId,y=k.conversationUserId,M=k.messages,L=k.isFakingSource;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.call)(pe,M);case 2:if(void 0!==e.sent){e.next=45;break}return e.next=6,(0,h.select)(I.isSubAccountSelector);case 6:return t=e.sent,e.next=9,(0,h.select)(x.messagesWithSourceSelector);case 9:return r=e.sent,e.next=12,(0,h.call)(C.getItem,"mini-sc_redirect");case 12:return a=e.sent,s=M.map((function(e){return(0,S.makeMessagePayload)({recipientID:y,message:e,isSubAccount:t,redirectInfo:a,conversationId:E})})),e.next=16,(0,h.select)(I.currentUserIdSelector);case 16:return n=e.sent,e.t0=I.currentUserShopIdSelector,e.next=20,(0,h.select)((function(e){return e}));case 20:if(e.t1=e.sent,o=(0,e.t0)(e.t1),d=s.map((function(e){var t=(0,i.default)({},e);t.id=e.request_id,t.from_id=n;var r=t.type,a=t.content;if(["product","order"].includes(r)){var s=r+"_id",o=a[s];t.fetchStatus="done";var d=M.find((function(e){return e.content[s]===o}));d&&(t.textContent=d.textContent)}else r===te&&(t.translateStatus=H.default.PENDING);return t})),u=r.filter((function(e){return e.hasMessageSource&&!e.isFaking})),c=r.filter((function(e){return e.hasMessageSource&&e.isFaking})),f=c[c.length-1],!c.length){e.next=32;break}return p=[],L||(d[0].sourceContent=f.sourceContent),c.forEach((function(e){p.push((0,h.put)((0,b.deleteRecord)({name:"messages",id:e.id})))})),e.next=32,(0,h.all)(p);case 32:if(!L){e.next=40;break}if(v=d[0]||{},m=v.source_content||{},!u.filter((function(e){var t=e.source_content||{};return m.shop_id===t.shop_id&&m.product_id===t.product_id&&m.order_id===t.order_id})).length){e.next=38;break}return e.abrupt("return");case 38:return e.next=40,(0,h.call)(A.populateMessageWithSourceAndContent,d,o,t,!0);case 40:return w=(0,_.default)("messages",d),e.next=43,(0,h.put)((0,g.updateEntities)({entities:w.entities}));case 43:return e.next=45,_e({conversationId:E,requestIds:w.result,messages:s,isRedirect:!!a,isFakingSource:L});case 45:case"end":return e.stop()}}),B,this)}function he(e){return e.content&&e.content.translation&&e.content.translation.text}function ge(e,t){return delete e.errorCode,delete e.error,(0,i.default)({},e,{chat_send_option:{force_send_cancel_order_warning:t,comply_cancel_order_warning:!t}})}var be=["request_id","to_id","type","content","shop_id","order_id","source","chat_send_option","source_content","source_type"],Se=function(e,t,r){var a={};return be.forEach((function(t){e[t]&&(a[t]=e[t])})),e.retryRequestId&&(a.request_id=e.retryRequestId),new c.default((function(s){(0,m.default)({method:"POST",resource:"messages",payload:(0,u.default)((0,i.default)({},a,{source:r?"minichat":"pc_mall"}))}).then((function(e){s(e),t&&(0,C.removeItem)("mini-sc_redirect")})).catch((function(t){var r=void 0;switch(!0){case t instanceof M.default:r=$.FORBIDDEN;break;case t instanceof E.default:r=$.LIMITING;break;case t instanceof L.default:r=$.CUSTOM_ERROR;break;case t instanceof y.default:r=$.BLACK_LIST,e.content={text:G.default.t("common.blacklist.replaced_text")};break;case t instanceof R.default:r=$.CANCEL_ORDER;break;default:r=$.DEFAULT}s((0,i.default)({},e,{requestId:e.request_id,errorCode:r,error:t}))}))}))};function me(e,t){return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,h.delay)(1e3);case 2:return r.next=4,(0,h.put)(ce({conversationId:e,requestIds:t}));case 4:case"end":return r.stop()}}),z,this)}function _e(e){var t,r,a,s,n,o,u,c,f,p,v,g,S,m,_,w,E,y,M,L,R,G,C=e.conversationId,O=e.requestIds,j=e.messages,A=e.isRedirect,N=e.isFakingSource;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.select)(I.networkStatusSelector);case 2:return t=e.sent,e.next=5,(0,h.select)(I.isScChatSelector);case 5:return r=e.sent,a=j.length,e.next=9,(0,h.put)(ue({conversationId:C,requestIds:O}));case 9:if(N){e.next=79;break}return e.next=12,(0,h.spawn)(me,C,O);case 12:return e.next=14,(0,h.put)((0,b.updateRecord)({name:"conversations",id:C,record:{latestMessageStatus:"sending",latestMessage:j[a-1]}}));case 14:if(s=0,n=[],o=[],u=[],c={},"offline"!==t){e.next=26;break}f=j.map((function(e){return(0,i.default)({},e,{requestId:e.request_id})})),u.push.apply(u,(0,d.default)(f)),o.push.apply(o,(0,d.default)(f)),c=j[a-1],e.next=37;break;case 26:if(!(s<a)){e.next=37;break}return p=j[s],e.next=30,(0,h.call)(Se,p,A,r);case 30:(v=e.sent).errorCode?o.push(v):n.push(v),v.error&&v.error.offlineError&&u.push(v),++s===a&&(c=v),e.next=26;break;case 37:if(!n.length){e.next=41;break}return n.forEach((function(e){e.send_status=P.MSG_STATUS.SUCCEED})),e.next=41,(0,h.call)(we,n,C);case 41:if(!o.length){e.next=74;break}return e.next=44,(0,h.select)((0,T.getConversation)(C));case 44:if(!(g=e.sent)||!g.faking){e.next=51;break}if(S=o.find((function(e){return[-1,42].includes(e.errorCode)})),e.t0=S,!e.t0){e.next=51;break}return e.next=51,(0,h.put)((0,k.showOperationFailureToastRequested)({error:S.error}));case 51:return m=[],o.forEach((function(e){var t=e.errorCode,r=e.error,a=e.request_id,s=e.type,n=e.content;t===$.LIMITING&&m.push((0,h.put)((0,k.showOperationFailureToastRequested)({error:r})));var o={errorCode:t,translateStatus:H.default.FAILED,retryRequestId:(0,Y.default)()};s===te&&t===$.BLACK_LIST&&(o.content=n),m.push((0,h.put)((0,b.updateRecord)({name:"messages",id:a,record:o})))})),e.next=55,(0,h.all)(m);case 55:return _=o.map((function(e){return e.requestId})),e.next=58,(0,h.put)((0,b.updateRecord)({name:"conversations",id:C,record:{latestMessage:c,latestMessageStatus:"failed"}}));case 58:return e.next=60,(0,h.put)(ie({conversationId:C,requestIds:_}));case 60:if(!(w=o.find((function(e){return e.errorCode===$.CANCEL_ORDER})))){e.next=74;break}return e.next=64,(0,h.select)((0,x.getMessageSelector)(w.request_id));case 64:return E=e.sent,e.next=67,(0,h.select)(T.currentConversationSelector);case 67:return y=e.sent,M=(y||{}).shop,L=(M=void 0===M?{}:M).country,R=L&&L.toLowerCase(),e.next=74,(0,h.put)((0,q.showModal)({type:"Cancel_ORDER_WARNING_MODAL",title:{key:"cancel_order.modal.title"},additions:{content:{key:"cancel_order.modal.content"},region:R||"sg"},actions:{cancel:{label:{key:"cancel_order.modal.send_it"},handler:function(){F.store.dispatch((0,q.closeModal)());var e=ge(E,!0);F.store.dispatch((0,D.resendMessageRequested)({conversationId:C,message:e}))}},confirm:{label:{key:"cancel_order.modal.not_send"},handler:function(){F.store.dispatch((0,q.closeModal)());var e=ge(E,!1);F.store.dispatch((0,D.resendMessageRequested)({conversationId:C,message:e}))}}}}));case 74:if(!u.length){e.next=79;break}return G=u.map((function(e){return e.requestId})),e.next=78,(0,h.put)((0,U.sendMessagesFailedByOffline)({conversationId:C,requestIds:G}));case 78:(0,Q.default)();case 79:case"end":return e.stop()}}),W,this)}function we(e,t){var r,a,s,n,d,u,c,f,p,v,g,S,m;return l.default.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return r=[],a=[],l.next=4,(0,h.select)(T.currentConversationIdSelector);case 4:if((s=l.sent)===t){l.next=12;break}return l.next=8,(0,h.select)((0,x.conversationMessageIdsSelector)(t));case 8:return r=l.sent,l.next=11,(0,h.select)((0,x.getMessagesSelector)(r.all));case 11:a=l.sent;case 12:return l.next=14,(0,h.select)(x.messagesWithSourceSelector);case 14:if(n=l.sent,d=(0,_.default)("messages",n).entities.messages||{},u=[],(c=e.map((function(e){var r=e.request_id,o=e.id,c=e.content;if(e.type===se&&c&&c.type===re&&(c.type=ae),d[r]){u.push((0,h.put)((0,b.deleteRecord)({name:"messages",id:r})));var l=(0,i.default)({},d[r],{translateStatus:he(e)?H.default.SHOW:H.default.FAILED});return d[o]?null:(0,w.deepMerge)(l,e)}var f=null;if((f=s!==t?a.filter((function(e){return e&&e.retryRequestId===r})):n.filter((function(e){return e.retryRequestId===r}))).length){var p=f[0].request_id;u.push((0,h.put)((0,b.deleteRecord)({name:"messages",id:p})));var v=(0,i.default)({},d[p],{translateStatus:he(e)?H.default.SHOW:H.default.FAILED}),g=d[o]?null:(0,w.deepMerge)(v,e);return g&&g.retryRequestId&&(g.original_request_id=p),g}return null})).filter((function(e){return e}))).length){l.next=20;break}return l.abrupt("return");case 20:return l.next=22,(0,h.call)(j.updateOrReplaceAction,d,c,"messages");case 22:return l.next=24,(0,h.put)(de({conversationId:t,requestIdToMessageId:c.reduce((function(e,t){return t.original_request_id?(0,i.default)({},e,(0,o.default)({},t.original_request_id,t.id)):(0,i.default)({},e,(0,o.default)({},t.request_id,t.id))}),{})}));case 24:return c.sort((function(e,t){return t.id-e.id})),l.next=27,(0,h.all)(u);case 27:return f=c[0],p=f.id,v=f.content,g=f.created_at,S=f.type,m=f.message_option,l.next=30,(0,h.put)((0,b.updateRecord)({name:"conversations",id:t,record:{latest_message_id:p,latest_message_type:S,latest_message_content:v,last_message_time:g,unread_count:0,flag:"normal",latestMessage:66496===m?{content:v,type:S}:{},latestMessageStatus:66496===m?"failed":""}}));case 30:case"end":return l.stop()}}),Z,this)}function Ie(){var e,t,r;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.select)((function(e){return e}));case 2:return e=a.sent,a.next=5,(0,h.select)(x.messageIdsHashSelector);case 5:return t=a.sent,r=[],(0,n.default)(t).forEach((function(t){var a=(0,s.default)(t,2),n=a[0],o=a[1].sending||[];if(o.length){r.push((0,h.put)(ie({conversationId:n,requestIds:o})));var d=((0,T.getConversation)(n)(e)||{}).latestMessage,u=void 0===d?{}:d;u.id&&o.includes(u.id)&&r.push((0,h.put)((0,b.updateRecord)({name:"conversations",id:n,record:{latestMessageStatus:"failed"}})))}})),a.next=10,(0,h.all)(r);case 10:case"end":return a.stop()}}),J,this)}function xe(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.takeLatest)(oe,ve);case 2:return e.next=4,(0,h.takeLatest)(le,Ie);case 4:case"end":return e.stop()}}),K,this)}var ke,Ee,ye=(a={},(0,o.default)(a,ue,(function(e,t){var r=t.payload,a=r.conversationId,s=r.requestIds,n=e.messageIdsHash,d=n[a]||{},u=d.all||[],c=d.failed||[];return(0,i.default)({},e,{messageIdsHash:(0,i.default)({},n,(0,o.default)({},a,(0,i.default)({},d,{all:s.reverse().filter((function(e){return!u.includes(e)})).concat(u),failed:c.filter((function(e){return!s.includes(e)}))})))})})),(0,o.default)(a,ce,(function(e,t){var r=t.payload,a=r.conversationId,s=r.requestIds,n=e.messageIdsHash,d=n[a]||{},u=d.sending||[],c=d.all||[],l=d.failed||[],f=s.filter((function(e){return c.includes(e)&&!l.includes(e)}));return(0,i.default)({},e,{messageIdsHash:(0,i.default)({},n,(0,o.default)({},a,(0,i.default)({},d,{sending:u.concat(f)})))})})),(0,o.default)(a,de,(function(e,t){var r=t.payload,a=r.conversationId,s=r.requestIdToMessageId,n=e.messageIdsHash,d=n[a]||{},u=(d.all||[]).map((function(e){return s[e]?s[e]:e})),c=d.sending||[];return(0,i.default)({},e,{messageIdsHash:(0,i.default)({},n,(0,o.default)({},a,(0,i.default)({},d,{all:u,offset:u[u.length-1],sending:c.filter((function(e){return!s.hasOwnProperty(e)}))})))})})),(0,o.default)(a,ie,(function(e,t){var r=t.payload,a=r.conversationId,s=r.requestIds,n=e.messageIdsHash,d=n[a]||{},u=d.failed||[],c=d.sending||[];return(0,i.default)({},e,{messageIdsHash:(0,i.default)({},n,(0,o.default)({},a,(0,i.default)({},d,{sending:c.filter((function(e){return!s.includes(e)})),failed:u.concat(s)})))})})),a);t.default=ye,(ke="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(ke.register($,"errorCodeMap","/workspace/src/reducers/message/send.js"),ke.register(ee,"MSG_TYPE_IMAGE","/workspace/src/reducers/message/send.js"),ke.register(te,"MSG_TYPE_TEXT","/workspace/src/reducers/message/send.js"),ke.register(re,"MSG_TYPE_VOUCHER","/workspace/src/reducers/message/send.js"),ke.register(ae,"MSG_TYPE_VOUCHER_WEB","/workspace/src/reducers/message/send.js"),ke.register(se,"MSG_TYPE_WEBVIEW","/workspace/src/reducers/message/send.js"),ke.register(oe,"sendMessagesRequested","/workspace/src/reducers/message/send.js"),ke.register(de,"sendMessagesSucceeded","/workspace/src/reducers/message/send.js"),ke.register(ue,"sendingMessages","/workspace/src/reducers/message/send.js"),ke.register(ce,"sendMessagesToPending","/workspace/src/reducers/message/send.js"),ke.register(ie,"sendMessagesFailed","/workspace/src/reducers/message/send.js"),ke.register(le,"abortAllSendingMessages","/workspace/src/reducers/message/send.js"),ke.register(fe,"uploadImage","/workspace/src/reducers/message/send.js"),ke.register(pe,"handleImageMessages","/workspace/src/reducers/message/send.js"),ke.register(ve,"sendMessagesRequestedSaga","/workspace/src/reducers/message/send.js"),ke.register(he,"checkTranslation","/workspace/src/reducers/message/send.js"),ke.register(ge,"handleCancelOrderMessage","/workspace/src/reducers/message/send.js"),ke.register(be,"sendMesageParams","/workspace/src/reducers/message/send.js"),ke.register(Se,"sendMessage","/workspace/src/reducers/message/send.js"),ke.register(me,"delayTodo","/workspace/src/reducers/message/send.js"),ke.register(_e,"sendMessages","/workspace/src/reducers/message/send.js"),ke.register(we,"handleSendSucceededMessages","/workspace/src/reducers/message/send.js"),ke.register(Ie,"abortAllSendingMessagesSaga","/workspace/src/reducers/message/send.js"),ke.register(xe,"watchSend","/workspace/src/reducers/message/send.js"),ke.register(ye,"default","/workspace/src/reducers/message/send.js")),(Ee="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&Ee(e)}).call(this,r("YuTi")(e))},cokx:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.sagas=t.reducers=t.preload=t.persistLimit=void 0;var a=U(r("14Xm")),s=U(r("m1cH")),n=r("ptXS");Object.defineProperty(t,"preload",{enumerable:!0,get:function(){return n.preload}});var o,d=r("SVmU"),u=r("5rFJ"),c=r("JbkK"),i=U(r("y8ld")),l=U(r("6RWM")),f=U(r("QJ1Q")),p=r("/gpY"),v=U(p),h=r("igIW"),g=U(h),b=r("GXei"),S=U(b),m=r("ZoJF"),_=U(m),w=r("N6RE"),I=U(w),x=r("oKYE"),k=U(x),E=r("aQ+w"),y=U(E),M=r("zTxb"),L=U(M),R=r("7b+N"),H=U(R),G=r("7VPt"),C=U(G),T=r("eAbP"),O=U(T),j=r("rfE5"),A=U(j),P=U(r("FsNy")),N=r("RArh"),q=U(N),F=r("SrNb"),D=U(F);function U(e){return e&&e.__esModule?e:{default:e}}(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var Y,Q,V=t.persistLimit=(0,j.supportDB)()?1e3:100,X={blacklist:["modalReducer","userReducer"]},B={key:"mini-root",storage:A.default,blacklist:["toastReducer","socketReducer","draftReducer","modalReducer","productReducer","voucherReducer"],debug:!1},z={userReducer:v.default,shopReducer:g.default,orderReducer:I.default,toastReducer:S.default,draftReducer:i.default,offerReducer:_.default,entityReducer:l.default,socketReducer:k.default,messageReducer:y.default,stickerReducer:L.default,productReducer:H.default,settingsReducer:f.default,unreadCountReducer:C.default,conversationReducer:O.default,modalReducer:P.default,voucherReducer:q.default,messageShortcutReducer:D.default},W=(0,c.resetReducers)(X,z),Z=t.reducers=(0,d.persistCombineReducers)(B,W),J=t.sagas=a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.all)([].concat((0,s.default)(p.watchUserSagas),(0,s.default)(h.watchShopSagas),(0,s.default)(m.watchOfferSagas),(0,s.default)(b.watchToastSagas),(0,s.default)(x.watchSocketSagas),(0,s.default)(G.watchUnreadSagas),(0,s.default)(M.watchStickerSagas),(0,s.default)(E.watchMessageSagas),(0,s.default)(R.watchProductSagas),(0,s.default)(T.watchConversationSagas),(0,s.default)(w.watchOrderSagas),(0,s.default)(N.watchVoucherSagas),(0,s.default)(F.watchMessageShortcutSagas)).map(u.call));case 2:case"end":return e.stop()}}),e,this)}));(Y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(Y.register(V,"persistLimit","/workspace/src/reducers/index.js"),Y.register(X,"ResetConfig","/workspace/src/reducers/index.js"),Y.register(B,"PersistConfig","/workspace/src/reducers/index.js"),Y.register(z,"appReducers","/workspace/src/reducers/index.js"),Y.register(W,"resetableReducers","/workspace/src/reducers/index.js"),Y.register(Z,"reducers","/workspace/src/reducers/index.js"),Y.register(J,"sagas","/workspace/src/reducers/index.js")),(Q="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&Q(e)}).call(this,r("YuTi")(e))},dlOA:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateMessageShortcutStatus=t.fetchMessageShortcutSucceed=t.fetchMessageShortcutRequested=void 0;var a,s=v(r("YEIV")),n=v(r("QbLZ")),o=v(r("14Xm"));t.watchFetch=I;var d,u=r("6SzI"),c=r("5rFJ"),i=r("tpro"),l=v(r("rN3q")),f=v(r("jtha")),p=v(r("b/qR"));function v(e){return e&&e.__esModule?e:{default:e}}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&d(e);var h=o.default.mark(w),g=o.default.mark(I),b=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,u.createActions)({FETCH_MESSAGE_SHORTCUT_REQUESTED:function(){return{}},FETCH_MESSAGE_SHORTCUT_SUCCEED:function(e){return{messageShortcutIds:e.messageShortcutIds}},UPDATE_MESSAGE_SHORTCUT_STATUS:function(e){return{status:e.status}}})),S=b.fetchMessageShortcutRequested,m=b.fetchMessageShortcutSucceed,_=b.updateMessageShortcutStatus;function w(){var e,t,r,a,s;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,c.put)(_({status:p.default.INIT_PENDING}));case 3:return n.next=5,(0,c.call)(f.default,{resource:"message_shortcuts",parent:"user"});case 5:return e=n.sent,t=e.message_shortcuts,r=(0,l.default)("messageShortcuts",t),a=r.entities,s=r.result,n.next=10,(0,c.put)((0,i.updateEntities)({entities:a}));case 10:return n.next=12,(0,c.put)(m({messageShortcutIds:s}));case 12:return n.next=14,(0,c.put)(_({status:p.default.SUCCEED}));case 14:n.next=20;break;case 16:return n.prev=16,n.t0=n.catch(0),n.next=20,(0,c.put)(_({status:p.default.INIT_FAILED}));case 20:case"end":return n.stop()}}),h,this,[[0,16]])}function I(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.takeEvery)(S,w);case 2:case"end":return e.stop()}}),g,this)}t.fetchMessageShortcutRequested=S,t.fetchMessageShortcutSucceed=m,t.updateMessageShortcutStatus=_;var x,k,E=(a={},(0,s.default)(a,m,(function(e,t){var r=t.payload.messageShortcutIds;return(0,n.default)({},e,{messageShortcutIds:r})})),(0,s.default)(a,_,(function(e,t){var r=t.payload.status;return(0,n.default)({},e,{status:r})})),a);t.default=E,(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(x.register(S,"fetchMessageShortcutRequested","/workspace/src/reducers/messageShortcut/fetch.js"),x.register(m,"fetchMessageShortcutSucceed","/workspace/src/reducers/messageShortcut/fetch.js"),x.register(_,"updateMessageShortcutStatus","/workspace/src/reducers/messageShortcut/fetch.js"),x.register(w,"fetchMessageShortcutSaga","/workspace/src/reducers/messageShortcut/fetch.js"),x.register(I,"watchFetch","/workspace/src/reducers/messageShortcut/fetch.js"),x.register(E,"default","/workspace/src/reducers/messageShortcut/fetch.js")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)}).call(this,r("YuTi")(e))},eAbP:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.watchConversationSagas=void 0;var a,s=y(r("QbLZ")),n=r("6SzI"),o=r("mzZX"),d=y(o),u=r("gv+x"),c=y(u),i=r("9vGo"),l=y(i),f=y(r("vack")),p=r("OzYK"),v=y(p),h=r("8Ryq"),g=y(h),b=r("I45U"),S=y(b),m=y(r("wgPM")),_=r("4fYm"),w=y(_),I=r("twjD"),x=r("5rLn"),k=y(r("7nv7")),E=y(r("3hjT"));function y(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var M,L,R=t.watchConversationSagas=[o.watchDelete,u.watchShow,i.watchPin,p.watchSearch,_.watchMark,b.watchCount,I.watchChangeStatus,h.watchSubFetch,x.watchDetail],H=(0,n.handleActions)((0,s.default)({},d.default,c.default,l.default,f.default,v.default,S.default,m.default,g.default,k.default,E.default,w.default),{conversationIds:[],conversationIdsMap:{},latestTimestamp:-1,oldestTimestamp:-1,maxLatestTimestampNano:"",latestTimestampNano:"",oldestTimestampNano:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",currentConversationId:null,currentConversationCanRead:!0,filter:"All",keyword:"",draftHash:{},totalUnreadCount:0,status:"",hasMore:!0,persist:null,results:[],searchStatus:"",direction:"",listsHash:"",syncFetchException:0,conversationMark:{}});t.default=H,(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(M.register(R,"watchConversationSagas","/workspace/src/reducers/conversation/index.js"),M.register(H,"default","/workspace/src/reducers/conversation/index.js")),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)}).call(this,r("YuTi")(e))},g28w:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.changeTranslateStatus=t.translateMessagesRequested=void 0;var a=l(r("14Xm")),s=l(r("gDS+"));t.watchTranslate=x;var n,o=r("6SzI"),d=r("5rFJ"),u=l(r("jtha")),c=r("763i"),i=l(r("b/qR"));function l(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var f=a.default.mark(w),p=a.default.mark(I),v=a.default.mark(x),h=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,o.createActions)({TRANSLATE_MESSAGES_REQUESTED:function(e){return{messageId:e.messageId,text:e.text,toUserId:e.toUserId,shopId:e.shopId,from:e.from}},CHANGE_TRANSLATE_STATUS:function(e){return{messageId:e.messageId,status:e.status}}})),g=h.translateMessagesRequested,b=h.changeTranslateStatus;t.translateMessagesRequested=g,t.changeTranslateStatus=b;var S,m,_=function(e,t,r,a){var s="failed"!==a?t:{translateStatus:i.default.FAILED,content:{text:r,translation:{text:"",manual:a}}};return(0,d.put)((0,c.updateRecord)({name:"messages",id:e,record:s}))};function w(e){var t,r,n,o=e.payload,c=o.messageId,l=o.text,p=o.toUserId,v=o.shopId,h=o.from;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={translateStatus:i.default.PENDING},e.next=4,_(c,t);case 4:return e.next=6,(0,d.call)(u.default,{method:"POST",resource:"messages",suffix:"translate",payload:(0,s.default)({text:l,from:h,to_user_id:p,shop_id:v})});case 6:if(!(r=e.sent).text){e.next=13;break}return n={translateStatus:i.default.SUCCEED,content:{text:l,translation:r}},e.next=11,_(c,n);case 11:e.next=15;break;case 13:return e.next=15,_(c,null,l,"failed");case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(0),e.next=21,_(c,null,l,"failed");case 21:case"end":return e.stop()}}),f,this,[[0,17]])}function I(e){var t,r=e.payload,s=r.messageId,n=r.status;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={translateStatus:n},e.next=3,_(s,t);case 3:case"end":return e.stop()}}),p,this)}function x(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeEvery)(g,w);case 2:return e.next=4,(0,d.takeEvery)(b,I);case 4:case"end":return e.stop()}}),v,this)}(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(S.register(g,"translateMessagesRequested","/workspace/src/reducers/message/translate.js"),S.register(b,"changeTranslateStatus","/workspace/src/reducers/message/translate.js"),S.register(_,"generateRecordAction","/workspace/src/reducers/message/translate.js"),S.register(w,"translateMessagesRequestedSaga","/workspace/src/reducers/message/translate.js"),S.register(I,"changeTranslateStatusSaga","/workspace/src/reducers/message/translate.js"),S.register(x,"watchTranslate","/workspace/src/reducers/message/translate.js")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)}).call(this,r("YuTi")(e))},"gv+x":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.resetConversationSucceeded=t.resetConversationRequested=t.showConversationSucceeded=t.showConversationRequested=void 0;var a,s=_(r("YEIV")),n=_(r("14Xm")),o=_(r("QbLZ")),d=_(r("GQeE"));t.showConversationRequestedSaga=G,t.watchShow=T;var u,c=r("6SzI"),i=r("Q8fy"),l=r("ziGp"),f=r("763i"),p=r("5rFJ"),v=r("4fYm"),h=r("gXnt"),g=r("OVuk"),b=r("Bk9M"),S=r("8TFP"),m=r("vqUA");function _(e){return e&&e.__esModule?e:{default:e}}(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&u(e);var w=n.default.mark(G),I=n.default.mark(C),x=n.default.mark(T),k=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,{hasSCAccess:"login_sellercenter",hasEditOrderAccess:"webchat_order_edit",hasViewOrderAccess:"access_my_sale",hasViewProductAccess:"access_my_product",hasEditVoucherAccess:"my_marketing_voucher_edit",hasViewVoucherAccess:"my_marketing_voucher_access"}),E=function(e){var t={},r=e.length;return(0,d.default)(k).forEach((function(a){t[a]=!r||e.includes(k[a])})),t},y=(0,c.createActions)({SHOW_CONVERSATION_REQUESTED:function(e){return{conversation:e.conversation,refresh:e.refresh,read:e.read}},SHOW_CONVERSATION_SUCCEEDED:function(e){return{conversationId:e.conversationId}},RESET_CONVERSATION_REQUESTED:function(){return{}},RESET_CONVERSATION_SUCCEEDED:function(){return{}}}),M=y.showConversationRequested,L=y.showConversationSucceeded,R=y.resetConversationRequested,H=y.resetConversationSucceeded;function G(e){var t,r,a,s,d,u,c,_,I,x,k,y,M,R,H,G,C,T,O,j=e.payload,A=j.conversation,P=j.refresh,N=j.read;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.select)(S.isSubAccountSelector);case 3:return t=e.sent,r=A.faking,a=A.status,s=A.to_id,d=A.shop_id,u=A.to_shop_id,c=A.id,_=A.unread_count,I=A.latest_message_id,e.next=7,(0,p.spawn)(l.showUser,{userId:s,shopId:d,buyerShopId:u});case 7:return e.next=9,(0,p.put)(L({conversationId:c}));case 9:return e.next=11,(0,p.call)(m.handleCurrentConversationChange,c);case 11:if(x=e.sent,!P){e.next=17;break}return e.next=15,(0,p.put)((0,i.fetchMessagesRequested)({conversation:A,reset:!0}));case 15:e.next=25;break;case 17:return e.next=19,(0,p.select)((function(e){return e.messageReducer}));case 19:if(k=e.sent,y=k.messageIdsHash,M=y[c]||{},R=M.all,!((void 0===R?[]:R).length<20)){e.next=25;break}return e.next=25,(0,p.put)((0,i.fetchMessagesRequested)({conversation:A}));case 25:if(!(!r&&N&&"closed"!==a&&_>0||x)){e.next=30;break}return H=x||I,e.next=30,(0,p.put)((0,v.markMessagesRequested)({conversationId:c,isRead:!0,latestMessageId:H,shopId:d,unreadCount:_}));case 30:if(G=null,!t){e.next=40;break}return e.next=34,(0,p.call)(h.fetchShopAuth,(0,h.fetchShopAuthRequested)({shopId:d}));case 34:C=e.sent,T=C.auth_names,G=E(void 0===T?[]:T),e.next=41;break;case 40:G=E([]);case 41:return e.next=43,(0,p.select)((0,b.shopSelector)(d));case 43:if(O=e.sent){e.next=48;break}return e.next=47,(0,p.call)(g.showShop,{payload:{shopId:d}});case 47:O=e.sent;case 48:return e.next=50,(0,p.put)((0,f.updateRecord)({name:"conversations",id:c,record:(0,o.default)({shop:O},G)}));case 50:e.next=55;break;case 52:e.prev=52,e.t0=e.catch(0),console.error("*** Show Conversation Failed: ",e.t0);case 55:case"end":return e.stop()}}),w,this,[[0,52]])}function C(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.put)(H());case 2:case"end":return e.stop()}}),I,this)}function T(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.takeLatest)(M,G);case 2:return e.next=4,(0,p.takeEvery)(R,C);case 4:case"end":return e.stop()}}),x,this)}t.showConversationRequested=M,t.showConversationSucceeded=L,t.resetConversationRequested=R,t.resetConversationSucceeded=H;var O,j,A=(a={},(0,s.default)(a,L,(function(e,t){var r=t.payload.conversationId;return(0,o.default)({},e,{currentConversationId:r})})),(0,s.default)(a,H,(function(e){return(0,o.default)({},e,{currentConversationId:null})})),a);t.default=A,(O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(O.register(k,"SHOP_ACCESSES","/workspace/src/reducers/conversation/show.js"),O.register(E,"getAccesses","/workspace/src/reducers/conversation/show.js"),O.register(M,"showConversationRequested","/workspace/src/reducers/conversation/show.js"),O.register(L,"showConversationSucceeded","/workspace/src/reducers/conversation/show.js"),O.register(R,"resetConversationRequested","/workspace/src/reducers/conversation/show.js"),O.register(H,"resetConversationSucceeded","/workspace/src/reducers/conversation/show.js"),O.register(G,"showConversationRequestedSaga","/workspace/src/reducers/conversation/show.js"),O.register(C,"resetConversationSaga","/workspace/src/reducers/conversation/show.js"),O.register(T,"watchShow","/workspace/src/reducers/conversation/show.js"),O.register(A,"default","/workspace/src/reducers/conversation/show.js")),(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&j(e)}).call(this,r("YuTi")(e))},hZed:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.productCleaner=void 0;var a,s=d(r("sk9p")),n=d(r("QbLZ")),o=r("EOYI");function d(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u,c,i=t.productCleaner=function(e){return(0,n.default)({},e,l(e))},l=function(e){var t=e.original_prices,r=e.actual_prices,a=t.map((function(t){return(0,o.formatPrice)(t,e.country)})),n=(0,s.default)(a,2),d=n[0],u=n[1],c=r.map((function(t){return(0,o.formatPrice)(t,e.country)})),i=(0,s.default)(c,2),l=i[0],f=i[1],p=d===u?d:d+" - "+u,v=l===f?l:l+" - "+f;return{original_price_string:p===v?"":p,actual_price_string:v,storedTimestamp:Date.now()}};(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(i,"productCleaner","/workspace/src/reducers/product/formater.js"),u.register(l,"priceString","/workspace/src/reducers/product/formater.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r("YuTi")(e))},kiXb:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.changeLanguage=t.language=void 0;var a,s,n=r("XzT5"),o=(a=n)&&a.__esModule?a:{default:a};(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var d=function(){var e=window.location.hostname;if("localhost"===e)return"vi-VN";switch(e.split(".").pop()){case"tw":return"zh-Hant";case"th":return"th-TH";case"vn":return"vi-VN";case"id":return"id-ID";case"my":return"ms-MY";case"br":return"pt-BR";default:return"en"}},u=t.language=d();o.default.init({lng:u,fallbackLng:u,defaultNS:"common",keySeparator:!1,debug:!1,resources:{},interpolation:{escapeValue:!1},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}});var c,i,l=t.changeLanguage=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common";o.default.changeLanguage(e),o.default.addResourceBundle(e,r,t,!0,!0)},f=o.default;t.default=f,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register("vi-VN","locale","/workspace/src/i18n.js"),c.register(d,"getLanguage","/workspace/src/i18n.js"),c.register(u,"language","/workspace/src/i18n.js"),c.register(l,"changeLanguage","/workspace/src/i18n.js"),c.register(f,"default","/workspace/src/i18n.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},laFX:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=p(r("14Xm")),s=p(r("gDS+"));t.showFeedStory=b;var n,o=p(r("rN3q")),d=p(r("jtha")),u=r("lInC"),c=r("5rFJ"),i=r("tpro"),l=r("WNYn"),f=r("esz8");function p(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var v,h,g=a.default.mark(b);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function b(e){var t,r,n,p,v,h,b,S,m=e.payload,_=m.id,w=m.creatorId;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.select)(l.currentConversationSelector);case 2:return t=e.sent,r=t.shop_id,e.prev=4,e.next=7,(0,c.select)((0,f.feedStorySelector)(_));case 7:if(n=e.sent,(0,u.shouldPersistItem)(n,!1)){e.next=17;break}return e.next=11,(0,c.call)(d.default,{parent:"feed",resource:"stories",params:{ids:(0,s.default)([_]),creator:w,shop_id:r}});case 11:return p=e.sent,(n=p.stories[0]).storedTimestamp=Date.now(),v=(0,o.default)("feedStories",n),h=v.entities,e.next=17,(0,c.put)((0,i.updateEntities)({entities:h}));case 17:return e.abrupt("return",n);case 20:return e.prev=20,e.t0=e.catch(4),b=(0,o.default)("feedStories",{id:_,shop_id:r,creator_id:w,error:!0}),S=b.entities,e.next=25,(0,c.put)((0,i.updateEntities)({entities:S}));case 25:return e.abrupt("return",{});case 26:case"end":return e.stop()}}),g,this,[[4,20]])}(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&v.register(b,"showFeedStory","/workspace/src/reducers/feedStory/show.js"),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)}).call(this,r("YuTi")(e))},mzZX:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.deleteConversationSucceeded=t.deleteConversationRequested=void 0;var a=p(r("rfXi")),s=p(r("jWXv")),n=p(r("YEIV")),o=p(r("QbLZ")),d=p(r("14Xm"));t.deleteConversationRequestedSaga=m,t.watchDelete=_;var u,c=r("6SzI"),i=r("5rFJ"),l=p(r("jtha")),f=r("ZGUL");function p(e){return e&&e.__esModule?e:{default:e}}(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&u(e);var v=d.default.mark(m),h=d.default.mark(_),g=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,c.createActions)({DELETE_CONVERSATION_REQUESTED:function(e){return{conversationId:e.conversationId,shopId:e.shopId}},DELETE_CONVERSATION_SUCCEEDED:function(e){return{conversationId:e.conversationId}}})),b=g.deleteConversationRequested,S=g.deleteConversationSucceeded;function m(e){var t=e.payload,r=t.conversationId,a=t.shopId;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.call)(l.default,{method:"DELETE",resource:"conversations",id:r,params:{shop_id:a}});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,(0,i.put)((0,f.showOperationFailureToastRequested)({error:e.t0}));case 9:case"end":return e.stop()}}),v,this,[[0,5]])}function _(){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.takeEvery)(b,m);case 2:case"end":return e.stop()}}),h,this)}t.deleteConversationRequested=b,t.deleteConversationSucceeded=S;var w,I,x=(0,n.default)({},S,(function(e,t){var r=t.payload.conversationId,d=(0,o.default)({},e.conversationIdsMap,(0,n.default)({},r,!1)),u=new s.default(e.conversationIds);u.delete(r);var c=(0,a.default)(u),i=e.currentConversationId;return(0,o.default)({},e,{currentConversationId:i===r?void 0:i,conversationIds:c,conversationIdsMap:d})}));t.default=x,(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(b,"deleteConversationRequested","/workspace/src/reducers/conversation/delete.js"),w.register(S,"deleteConversationSucceeded","/workspace/src/reducers/conversation/delete.js"),w.register(m,"deleteConversationRequestedSaga","/workspace/src/reducers/conversation/delete.js"),w.register(_,"watchDelete","/workspace/src/reducers/conversation/delete.js"),w.register(x,"default","/workspace/src/reducers/conversation/delete.js")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)}).call(this,r("YuTi")(e))},"osg/":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.removeAllDraft=t.removeSingleDraft=void 0;var a,s,n=u(r("YEIV")),o=u(r("QbLZ")),d=r("6SzI");function u(e){return e&&e.__esModule?e:{default:e}}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c=(0,d.createActions)({REMOVE_SINGLE_DRAFT:function(e){return{conversationId:e.conversationId}},REMOVE_ALL_DRAFT:function(){return{}}}),i=c.removeSingleDraft,l=c.removeAllDraft;t.removeSingleDraft=i,t.removeAllDraft=l;var f,p,v=(a={},(0,n.default)(a,i,(function(e,t){var r=t.payload.conversationId,a=(0,o.default)({},e.draftHash);return delete a[r],(0,o.default)({},e,{draftHash:a})})),(0,n.default)(a,l,(function(e){return(0,o.default)({},e,{draftHash:{}})})),a);t.default=v,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(i,"removeSingleDraft","/workspace/src/reducers/draft/remove.js"),f.register(l,"removeAllDraft","/workspace/src/reducers/draft/remove.js"),f.register(v,"default","/workspace/src/reducers/draft/remove.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,r("YuTi")(e))},ptXS:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a,s=r("14Xm"),n=(a=s)&&a.__esModule?a:{default:a};t.preload=_;var o,d=r("SVmU"),u=r("5rFJ"),c=r("QCYR"),i=r("Vt/u"),l=r("JbkK"),f=r("gv+x"),p=r("9jhx"),v=r("zd/2"),h=r("8Ryq"),g=r("xcHk");(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var b,S,m=n.default.mark(_);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function _(){var e,t,r,a,s,o,b;return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,u.take)(d.REHYDRATE);case 3:return n.next=5,(0,u.put)((0,g.updateChatEntryStatus)({showEntry:!1}));case 5:return n.next=7,(0,u.put)((0,g.setChatSource)({isScChat:(0,i.getChatSource)()}));case 7:return n.next=9,(0,u.put)((0,f.resetConversationRequested)());case 9:return n.next=11,(0,u.put)((0,g.updateChatWindowStatus)({shouldShowWindow:!1}));case 11:return n.next=13,(0,c.getItem)("mini-session");case 13:return e=n.sent,n.next=16,(0,u.call)(v.login,(0,v.loginRequested)());case 16:return t=n.sent,n.next=19,(0,u.select)((function(e){return e.conversationReducer}));case 19:if(r=n.sent,r.oldestTimestampNano,s=r.latestTimestampNano,o=r.oldestTimestamp,b=r.latestTimestamp,void 0!==s&&s){n.next=29;break}return s=-1===b?"":b+"000000000",a=-1===o?"":0===o?"0":o+"000000000",n.next=29,(0,u.put)((0,h.updateConversationTimestamp)({oldestTimestampNano:a,latestTimestampNano:s}));case 29:if(!e){n.next=45;break}if(!t){n.next=41;break}if(t.id===e.user.id){n.next=35;break}return n.next=35,(0,u.put)((0,l.reduxReset)());case 35:return n.next=37,(0,u.call)(v.handleLoginSucceeded,t);case 37:return n.next=39,(0,u.put)((0,g.updateLoginSuccessStatus)({loginSuccess:!0}));case 39:n.next=43;break;case 41:return n.next=43,(0,u.put)((0,g.updateLoginSuccessStatus)({loginSuccess:!1}));case 43:n.next=51;break;case 45:return n.next=47,(0,u.put)((0,l.reduxReset)());case 47:return n.next=49,(0,u.call)(v.handleLoginSucceeded,t);case 49:return n.next=51,(0,u.put)((0,g.updateLoginSuccessStatus)({loginSuccess:!0}));case 51:return n.next=53,(0,u.put)((0,p.updateUnreadCount)({type:p.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 53:n.next=60;break;case 55:return n.prev=55,n.t0=n.catch(0),console.error("load chat failed!",n.t0),n.next=60,(0,u.put)((0,g.updateLoginSuccessStatus)({loginSuccess:!1}));case 60:case"end":return n.stop()}}),m,this,[[0,55]])}(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&b.register(_,"preload","/workspace/src/reducers/preload.js"),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&S(e)}).call(this,r("YuTi")(e))},ryDM:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a,s=d(r("YEIV")),n=d(r("QbLZ")),o=r("mzZX");function d(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u,c,i=(0,s.default)({},o.deleteConversationSucceeded,(function(e,t){var r=t.payload.conversationId,a=e.messageIdsHash;return delete a[r],(0,n.default)({},e,{messageIdsHash:(0,n.default)({},a)})}));t.default=i,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&u.register(i,"default","/workspace/src/reducers/message/delete.js"),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r("YuTi")(e))},tjUo:function(e,t,r){"use strict";(function(e){var t=g(r("q1tI")),a=g(r("i8i4")),s=r("/MKj"),n=r("9kay"),o=g(r("kiXb")),d=r("0cfB"),u=r("mhGz"),c=r("wNa6"),i=g(r("8cBu"));r("p2bk");var l,f=r("WN6i"),p=r("Vt/u"),v=r("2AY/"),h=r("zd/2");function g(e){return e&&e.__esModule?e:{default:e}}(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&l(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;(0,f.initSentry)();var b,S,m=function(e,r){a.default.render(t.default.createElement(d.AppContainer,null,t.default.createElement(n.I18nextProvider,{i18n:o.default},t.default.createElement(s.Provider,{store:c.store},t.default.createElement(u.PersistGate,{persistor:c.persistor,loading:null},t.default.createElement(e,null))))),document.getElementById(r))},_=(0,p.getChatSource)(),w=function(e){return"position: fixed; right: "+(_?16:8)+"px; bottom: "+(_?(e?64:0)+16:0)+"px; z-index: 99999"},I={create:function(e){var t=void 0,r=void 0,a=document.getElementById(e);_&&(t=(((r=(window.SellerFramework?window.SellerFramework.app:window.dev)||{}).componentData||{}).FixBottomCard||{}).isFixed,r.on&&r.on("FixBottomCardChange",(function(e){a.style=w(e)}))),a||((a=document.createElement("div")).setAttribute("id",e),a.style=w(t),document.body.appendChild(a)),window.miniChatContainerId=e,m(i.default,e)},startOrderChat:function(e,t,r){c.store.dispatch((0,v.redirectConversationRequested)({userId:t,shopId:e,orderId:r}))},startChatWithText:function(e,t){c.store.dispatch((0,v.redirectConversationRequested)({userId:e,message:t}))},startChat:function(e,t,r){c.store.dispatch((0,v.redirectConversationRequested)({userId:t,shopId:e,productId:r}))},updateLoginStatus:function(){c.store.dispatch((0,h.loginRequested)())},logout:function(){c.store.dispatch((0,h.forceLogoutRequested)())}};window.ChatEasy=I,"function"==typeof window.chatReady&&window.chatReady(),I.create("shopee-mini-chat-embedded"),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(m,"render","/workspace/src/index.js"),b.register(_,"isScChat","/workspace/src/index.js"),b.register(w,"getMinichatDomStyle","/workspace/src/index.js"),b.register(I,"Chat","/workspace/src/index.js")),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&S(e)}).call(this,r("YuTi")(e))},tpro:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateEntities=void 0;var a,s=c(r("YEIV")),n=c(r("QbLZ")),o=c(r("sk9p")),d=c(r("oF3Q")),u=r("6SzI");function c(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=(0,u.createActions)({UPDATE_ENTITIES:function(e){return{entities:e.entities}}}).updateEntities;t.updateEntities=i;var l,f,p=(0,s.default)({},i,(function(e,t){var r=t.payload.entities;return(0,d.default)(r).reduce((function(e,t){var r=(0,o.default)(t,2),a=r[0],d=r[1];return"persist"!==a?(0,n.default)({},e,(0,s.default)({},a,(0,n.default)({},e[a],d))):(0,n.default)({},e,(0,s.default)({},a,d))}),e)}));t.default=p,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(i,"updateEntities","/workspace/src/reducers/entity/entity.js"),l.register(p,"default","/workspace/src/reducers/entity/entity.js")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}).call(this,r("YuTi")(e))},twjD:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.changeConversationStatusRequested=void 0;var a=i(r("14Xm")),s=i(r("gDS+"));t.changeConversationStatusRequestedSaga=g,t.watchChangeStatus=b;var n,o=r("6SzI"),d=r("5rFJ"),u=i(r("jtha")),c=r("ZGUL");function i(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var l,f,p=a.default.mark(g),v=a.default.mark(b),h=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,o.createActions)({CHANGE_CONVERSATION_STATUS_REQUESTED:function(e){return{conversationId:e.conversationId,shopId:e.shopId,status:e.status}}}).changeConversationStatusRequested);function g(e){var t=e.payload,r=t.conversationId,n=t.shopId,o=t.status;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.call)(u.default,{method:"PUT",resource:"conversations",id:r,suffix:"status",payload:(0,s.default)({shop_id:n,status:o})});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,(0,d.put)((0,c.showOperationFailureToastRequested)({error:e.t0}));case 9:case"end":return e.stop()}}),p,this,[[0,5]])}function b(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeEvery)(h,g);case 2:case"end":return e.stop()}}),v,this)}t.changeConversationStatusRequested=h,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(h,"changeConversationStatusRequested","/workspace/src/reducers/conversation/status.js"),l.register(g,"changeConversationStatusRequestedSaga","/workspace/src/reducers/conversation/status.js"),l.register(b,"watchChangeStatus","/workspace/src/reducers/conversation/status.js")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}).call(this,r("YuTi")(e))},vRVn:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=f(r("14Xm"));t.showProduct=g;var s,n=r("5rFJ"),o=f(r("jtha")),d=f(r("rN3q")),u=r("hZed"),c=r("tpro"),i=r("nbEg"),l=r("lInC");function f(e){return e&&e.__esModule?e:{default:e}}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);var p,v,h=a.default.mark(g);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function g(e){var t,r,s,f,p,v=e.payload,g=v.productId,b=v.shopId;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.select)((0,i.productSelector)(g));case 3:if(t=e.sent,(0,l.shouldPersistItem)(t)){e.next=12;break}return e.next=7,(0,n.call)(o.default,{resource:"products",id:g,params:{shop_id:b},cleaner:u.productCleaner});case 7:return(t=e.sent).storedTimestamp=Date.now(),r=(0,d.default)("products",t),s=r.entities,e.next=12,(0,n.put)((0,c.updateEntities)({entities:s}));case 12:return e.abrupt("return",t);case 15:return e.prev=15,e.t0=e.catch(0),f=(0,d.default)("products",{id:g,shop_id:b,error:!0}),p=f.entities,e.next=20,(0,n.put)((0,c.updateEntities)({entities:p}));case 20:return e.abrupt("return",{});case 21:case"end":return e.stop()}}),h,this,[[0,15]])}(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&p.register(g,"showProduct","/workspace/src/reducers/product/show.js"),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)}).call(this,r("YuTi")(e))},vack:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateConversationFilter=void 0;var a,s=d(r("YEIV")),n=d(r("QbLZ")),o=r("6SzI");function d(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=(0,o.createActions)({UPDATE_CONVERSATION_FILTER:function(e){return{filter:e.filter}}}).updateConversationFilter;t.updateConversationFilter=u;var c,i,l=(0,s.default)({},u,(function(e,t){var r=t.payload.filter;return(0,n.default)({},e,{filter:r})}));t.default=l,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(u,"updateConversationFilter","/workspace/src/reducers/conversation/filter.js"),c.register(l,"default","/workspace/src/reducers/conversation/filter.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},vqUA:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.resetConversationQueue=t.resetOldConversationQueue=t.resetNewConversationQueue=t.updateNewMessageFlag=t.receiveMessageSucceeded=t.receiveMessageRequested=void 0;var a,s=M(r("YEIV")),n=M(r("jWXv")),o=M(r("rfXi")),d=M(r("FyfS")),u=M(r("14Xm")),c=M(r("QbLZ"));t.watchNewConversationMessageQueue=Z,t.watchOldConversationMessageQueue=J,t.handleCurrentConversationChange=$,t.watchReceive=ee;var i,l=r("6SzI"),f=r("5rFJ"),p=r("763i"),v=r("tpro"),h=r("bqMa"),g=r("8Ryq"),b=r("kXhk"),S=r("0VV5"),m=r("8TFP"),_=r("WNYn"),w=M(r("rN3q")),I=M(r("3atR")),x=r("r2BC"),k=r("1tZ5"),E=r("9jhx"),y=r("4fYm");function M(e){return e&&e.__esModule?e:{default:e}}(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&i(e);var L=u.default.mark(z),R=u.default.mark(W),H=u.default.mark(Z),G=u.default.mark(J),C=u.default.mark($),T=u.default.mark(ee),O=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,I.default.MSG_TYPE_OFFER),j=(0,l.createActions)({RECEIVE_MESSAGE_REQUESTED:function(e){return{message:e.message}},RECEIVE_MESSAGE_SUCCEEDED:function(e){return{conversationId:e.conversationId,message:e.message}},UPDATE_NEW_MESSAGE_FLAG:function(e){return{flag:e.flag}},RESET_NEW_CONVERSATION_QUEUE:function(){return{}},RESET_OLD_CONVERSATION_QUEUE:function(){return{}},RESET_CONVERSATION_QUEUE:function(){return{}}}),A=j.receiveMessageRequested,P=j.receiveMessageSucceeded,N=j.updateNewMessageFlag,q=j.resetNewConversationQueue,F=j.resetOldConversationQueue,D=j.resetConversationQueue;t.receiveMessageRequested=A,t.receiveMessageSucceeded=P,t.updateNewMessageFlag=N,t.resetNewConversationQueue=q,t.resetOldConversationQueue=F,t.resetConversationQueue=D;var U=2e3,Y=8e3,Q=U,V=U,X=[],B=[];function z(e){var t,r,a,s,n,o,d,i;return u.default.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.content,r=e.conversation_id,s=(a=t||{}).offer_id,n=a.model_id,o=a.product_id,d=[],i={},u.next=6,(0,f.select)((0,b.relatedOfferIdsSelector)(r,n,s,o));case 6:return u.sent.forEach((function(e){var t=e.id;i[t]=(0,c.default)({},e,{status:"cancelled"})})),d.push((0,f.put)((0,p.batchUpdateRecord)({name:"offers",records:i}))),u.next=11,(0,f.all)(d);case 11:case"end":return u.stop()}}),L,this)}function W(e){var t,r,a,s,n,o,c,i,l,b,I,E,M,L,H,G,C,T,j,A,N,q,F,D,U,Y,Q,V,W,Z,J,K,$,ee,te,re,ae=e.payload.message;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ae.id,r=ae.type,a=ae.request_id,s=ae.to_shop_id,n=ae.conversation_id,o=ae.send_by_yourself,c=ae.content,i=ae.created_at,e.next=3,(0,f.select)(m.isSubAccountSelector);case 3:return l=e.sent,e.next=6,(0,f.select)((function(e){return e.conversationReducer}));case 6:return b=e.sent,I=b.conversationIdsMap,E=b.currentConversationId,M=b.currentConversationCanRead,e.next=12,(0,f.select)((0,_.getConversation)(n));case 12:if(L=e.sent,H=L.id&&void 0!==L.faking,!!(I&&I[n.toString()]||H)){e.next=19;break}X.push(ae),e.next=114;break;case 19:if(!(r===O)){e.next=23;break}return e.next=23,(0,f.call)(z,ae);case 23:if(!(E===n)){e.next=113;break}if(!o){e.next=84;break}return e.next=28,(0,f.select)(S.messagesWithSourceSelector);case 28:G=e.sent,C=!1,T=!1,j=!1,A=!0,N=!1,q=void 0,e.prev=35,F=(0,d.default)(G);case 37:if(A=(D=F.next()).done){e.next=48;break}if(U=D.value,Y=U.id,Q=U.retryRequestId,T=Y===a,j=Q===a,!((C=Y===t)||T||j)){e.next=45;break}return e.abrupt("break",48);case 45:A=!0,e.next=37;break;case 48:e.next=54;break;case 50:e.prev=50,e.t0=e.catch(35),N=!0,q=e.t0;case 54:e.prev=54,e.prev=55,!A&&F.return&&F.return();case 57:if(e.prev=57,!N){e.next=60;break}throw q;case 60:return e.finish(57);case 61:return e.finish(54);case 62:if(!C){e.next=64;break}return e.abrupt("return");case 64:if(!T&&!j){e.next=69;break}return e.next=67,(0,f.call)(h.handleSendSucceededMessages,[ae],n);case 67:e.next=82;break;case 69:return e.next=71,(0,f.select)(m.currentUserSelector)||{};case 71:return V=e.sent,W=V.shop_id,e.next=75,(0,f.call)(x.populateMessageWithSourceAndContent,[ae],W,l);case 75:return Z=(0,w.default)("messages",ae),e.next=78,(0,f.put)((0,v.updateEntities)({entities:Z.entities}));case 78:return e.next=80,(0,f.put)((0,p.updateRecord)({name:"conversations",id:n,record:{latest_message_id:t,latest_message_type:r,latest_message_content:c,last_message_time:i,latestMessage:{},latestMessageStatus:""}}));case 80:return e.next=82,(0,f.put)(P({conversationId:n,message:ae}));case 82:e.next=105;break;case 84:return e.next=86,(0,f.select)(m.currentUserSelector)||{};case 86:return J=e.sent,K=J.shop_id,e.next=90,(0,f.select)(_.currentConversationSelector);case 90:return $=e.sent,e.next=93,(0,f.call)(x.populateMessageWithSourceAndContent,[ae],K,l);case 93:return ee=(0,w.default)("messages",ae),e.next=96,(0,f.put)((0,v.updateEntities)({entities:ee.entities}));case 96:if(te=$.unread_count,re=M?te:te+1,0!==te||M){e.next=101;break}return e.next=101,(0,f.put)((0,k.syncUnreadCount)({totalShop:{num:1},action:"increase"}));case 101:return e.next=103,(0,f.put)((0,p.updateRecord)({name:"conversations",id:n,record:{latest_message_id:t,latest_message_type:r,latest_message_content:c,last_message_time:i,unread_count:re,latestMessage:{},latestMessageStatus:""}}));case 103:return e.next=105,(0,f.put)(P({conversationId:n,message:ae}));case 105:if(!H){e.next=111;break}return e.next=108,(0,f.put)((0,g.fetchConversationsRequested)({direction:"latest"}));case 108:if(o||!M){e.next=111;break}return e.next=111,(0,f.put)((0,y.markMessagesRequested)({conversationId:n,isRead:!0,latestMessageId:t,shopId:s}));case 111:e.next=114;break;case 113:B.push(ae);case 114:case"end":return e.stop()}}),R,this,[[35,50,54,62],[55,,57,61]])}function Z(){var e,t,r;return u.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,(0,f.delay)(Q);case 3:if(e=X.length){a.next=8;break}Q=Q===Y?Q:2*Q,a.next=21;break;case 8:return t=X.splice(0,e).sort((function(e,t){return e.created_timestamp-t.created_timestamp})),Q=U,a.next=12,(0,f.select)((function(e){return e.conversationReducer}));case 12:if(r=a.sent,!(r.latestTimestamp<=t[0].created_timestamp)){a.next=21;break}return a.next=17,(0,f.put)((0,g.fetchConversationsRequested)({direction:"latest"}));case 17:return a.next=19,(0,f.take)(g.fetchConversationsSucceeded);case 19:return a.next=21,(0,f.put)((0,E.refreshTotalUnreadConversationsCount)({}));case 21:a.next=0;break;case 23:case"end":return a.stop()}}),H,this)}function J(){var e,t=this;return u.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,(0,f.delay)(V);case 3:if(e=B.length){r.next=8;break}V=V===Y?V:2*V,r.next=9;break;case 8:return r.delegateYield(u.default.mark((function r(){var a,s,d,i,l;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.put)((0,g.updateFetchConversationsDirection)({direction:"latest"}));case 2:return a=B.splice(0,e),V=U,s=(0,o.default)(new n.default(a.map((function(e){return e.conversation_id})))),t.next=7,(0,f.select)((0,_.getConversations)(s));case 7:return d=t.sent,i={},l=0,a.forEach((function(e){var t=e.id,r=e.type,a=e.content,s=e.created_at,n=e.conversation_id,o=e.send_by_yourself,u={latest_message_id:t,latest_message_type:r,latest_message_content:a,last_message_time:s},f=i[n];if(f)t>f.latest_message_id?i[n]=(0,c.default)({},f,u,{unread_count:o?f.unread_count:f.unread_count+1}):i[n]=(0,c.default)({},f,{unread_count:o?f.unread_count:f.unread_count+1});else{var p=(d.find((function(e){return e.id===n}))||{}).unread_count,v=void 0===p?0:p;i[n]=(0,c.default)({},u,{latestMessage:{},latestMessageStatus:"",unread_count:o?v:v+1}),o||0!==v||(l+=1)}})),t.next=13,(0,f.put)((0,p.batchUpdateRecord)({name:"conversations",records:i,checkProp:"latest_message_id"}));case 13:return t.next=15,(0,f.put)((0,k.syncUnreadCount)({totalShop:{num:l},action:"increase"}));case 15:case"end":return t.stop()}}),r,t)}))(),"t0",9);case 9:r.next=0;break;case 11:case"end":return r.stop()}}),G,this)}function K(){var e=X.length,t=B.length;e&&X.splice(0,e),t&&B.splice(0,t)}function $(e){var t,r,a,s,n,o,d,c;return u.default.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(!(t=B.filter((function(t){return t.conversation_id===e}))).length){u.next=9;break}return t.forEach((function(e){var t=B.findIndex((function(t){return t.id===e.id}));B.splice(t,1)})),r=t.sort((function(e,t){return t.latest_message_id-e.latest_message_id})),a=r[0],s=a.id,n=a.type,o=a.content,d=a.created_at,c={latest_message_id:s,latest_message_type:n,latest_message_content:o,last_message_time:d,latestMessage:{},latestMessageStatus:""},u.next=8,(0,f.put)((0,p.updateRecord)({name:"conversations",id:e,record:c}));case 8:return u.abrupt("return",s);case 9:return u.abrupt("return",null);case 10:case"end":return u.stop()}}),C,this)}function ee(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.takeEvery)(A,W);case 2:return e.next=4,(0,f.takeEvery)(D,K);case 4:case"end":return e.stop()}}),T,this)}var te,re,ae=(a={},(0,s.default)(a,P,(function(e,t){var r=t.payload,a=r.conversationId,n=r.message,o=n.id,d=n.request_id,u=e.messageIdsHash,i=u[a]||{},l=i.all||[],f=i.sending||[],p=[];p=l.includes(o)?l:[o].concat(l).filter((function(e){return e!==d}));var v=l[l.length-1]||o;return(0,c.default)({},e,{messageIdsHash:(0,c.default)({},u,(0,s.default)({},a,(0,c.default)({},i,{offset:v,all:p,sending:f.filter((function(e){return!f.includes(d)}))})))})})),(0,s.default)(a,N,(function(e,t){var r=t.payload.flag;return(0,c.default)({},e,{newMessageFlag:r})})),a);t.default=ae,(te="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(te.register(O,"MSG_TYPE_OFFER","/workspace/src/reducers/message/receive.js"),te.register(A,"receiveMessageRequested","/workspace/src/reducers/message/receive.js"),te.register(P,"receiveMessageSucceeded","/workspace/src/reducers/message/receive.js"),te.register(N,"updateNewMessageFlag","/workspace/src/reducers/message/receive.js"),te.register(q,"resetNewConversationQueue","/workspace/src/reducers/message/receive.js"),te.register(F,"resetOldConversationQueue","/workspace/src/reducers/message/receive.js"),te.register(D,"resetConversationQueue","/workspace/src/reducers/message/receive.js"),te.register(U,"BASE_DELAY_TIME","/workspace/src/reducers/message/receive.js"),te.register(Y,"MAX_DELAY_TIME","/workspace/src/reducers/message/receive.js"),te.register(Q,"_newConversationDelayTime","/workspace/src/reducers/message/receive.js"),te.register(V,"_oldConversationDelayTime","/workspace/src/reducers/message/receive.js"),te.register(X,"_newConversationMessageQueue","/workspace/src/reducers/message/receive.js"),te.register(B,"_oldConversationMessageQueue","/workspace/src/reducers/message/receive.js"),te.register(z,"handleOfferMessages","/workspace/src/reducers/message/receive.js"),te.register(W,"receiveMessage","/workspace/src/reducers/message/receive.js"),te.register(Z,"watchNewConversationMessageQueue","/workspace/src/reducers/message/receive.js"),te.register(J,"watchOldConversationMessageQueue","/workspace/src/reducers/message/receive.js"),te.register(K,"resetQueue","/workspace/src/reducers/message/receive.js"),te.register($,"handleCurrentConversationChange","/workspace/src/reducers/message/receive.js"),te.register(ee,"watchReceive","/workspace/src/reducers/message/receive.js"),te.register(ae,"default","/workspace/src/reducers/message/receive.js")),(re="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&re(e)}).call(this,r("YuTi")(e))},wgPM:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setCurrentConversationCanRead=void 0;var a,s=d(r("YEIV")),n=d(r("QbLZ")),o=r("6SzI");function d(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=(0,o.createActions)({SET_CURRENT_CONVERSATION_CAN_READ:function(e){return{canRead:e.canRead}}}).setCurrentConversationCanRead;t.setCurrentConversationCanRead=u;var c,i,l=(0,s.default)({},u,(function(e,t){var r=t.payload.canRead;return(0,n.default)({},e,{currentConversationCanRead:r})}));t.default=l,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(u,"setCurrentConversationCanRead","/workspace/src/reducers/conversation/set.js"),c.register(l,"default","/workspace/src/reducers/conversation/set.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},wyum:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.evaluationRequested=void 0;var a=f(r("gDS+")),s=f(r("14Xm"));t.showRateCard=g,t.watchEvaluation=w;var n,o=r("6SzI"),d=f(r("jtha")),u=r("5rFJ"),c=r("763i"),i=r("3atR"),l=r("ZGUL");function f(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var p=s.default.mark(g),v=s.default.mark(_),h=s.default.mark(w);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function g(e){var t,r,a,n,o=e.ids,c=e.shopId;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="rating_cards",r=Array.isArray(o)?"["+o.join(",")+"]":"["+o+"]",a={ids:r},"0"!==c&&(a.shop_id=c),e.next=7,(0,u.call)(d.default,{ssl:!0,resource:t,params:a});case 7:return n=e.sent,e.abrupt("return",n[t]||[]);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),p,this,[[0,11]])}var b,S,m=(0,o.createActions)({EVALUATION_REQUESTED:function(e){var t=e.id,r=e.shopId,a=e.grade,s=e.reason;return{id:t,shopId:r,grade:a,reason:void 0===s?[]:s}}}).evaluationRequested;function _(e){var t,r=e.payload,n=r.id,o=r.shopId,f=r.grade,p=r.reason;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={grade:f,reason:p},o&&(t.shop_id=o),e.next=5,(0,u.call)(d.default,{method:"PUT",parent:"rating_cards",parentId:n,resource:"evaluate",payload:(0,a.default)(t)});case 5:return e.next=7,(0,u.put)((0,c.updateRecord)({name:"rateCards",id:n,record:{grade:f,status:i.EvaluationStatus.Rated}}));case 7:e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,(0,u.put)((0,c.updateRecord)({name:"rateCards",id:n,record:{status:Math.random()}}));case 13:return e.next=15,(0,u.put)((0,l.showOperationFailureToastRequested)({error:e.t0}));case 15:case"end":return e.stop()}}),v,this,[[0,9]])}function w(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.takeLatest)(m,_);case 2:case"end":return e.stop()}}),h,this)}t.evaluationRequested=m,(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(g,"showRateCard","/workspace/src/reducers/message/evaluation.js"),b.register(m,"evaluationRequested","/workspace/src/reducers/message/evaluation.js"),b.register(_,"evaluationSaga","/workspace/src/reducers/message/evaluation.js"),b.register(w,"watchEvaluation","/workspace/src/reducers/message/evaluation.js")),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&S(e)}).call(this,r("YuTi")(e))},y8ld:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a,s=u(r("QbLZ")),n=r("6SzI"),o=u(r("0O3H")),d=u(r("osg/"));function u(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c,i,l=(0,n.handleActions)((0,s.default)({},o.default,d.default),{draftHash:{}});t.default=l,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&c.register(l,"default","/workspace/src/reducers/draft/index.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))}}]);
//# sourceMappingURL=app~970f9218.77789d06b8cb1a89602a.js.map